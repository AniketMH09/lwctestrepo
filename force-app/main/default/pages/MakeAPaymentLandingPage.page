<apex:page standardcontroller="ChargentOrders__ChargentOrder__c" action="{!onLoadMethod}" extensions="MPLPController,PaymentSourceControllerExtensionpopup,UIHelper" id="PaymentPage" showheader="false" doctype="html-5.0" sidebar="false" standardstylesheets="false">
 
<apex:form id="theForm">
<html>
<head>
    <script language="javascript" type="text/javascript">
      
        var webID = '{!userfedID}';  //This is the ID the client should provide
        var Nth ; //= '{!$Label.HondaPaymentSurvey}'; //Defect:114010 - Read Honda Payment Survey Nth value from custom setting    
        
        
        // 114189 STARTS
        function load() {
            
            var ishondaacc =  '{!Honda}' ;
            
            if ( ishondaacc === true || ishondaacc === 'true' ){
                Nth = '{!$Label.HondaPaymentSurvey}';
            } else {
                Nth = '{!$Label.AccuraPaymentSurvey}'; 
            }
             
          
            okBrowser() && (NthVal = 0, NthVal = typeof Nth == "undefined" ? 1 : Nth, haveCookie(icName) || CheckNth(NthVal) && (createCookie(icName, webID, 60), createInvite(), centobj = new centerObj, setTimeout("centobj.init(0)", iPopDel)));
           // loadScript("{!URLFOR($Resource.Survey_Popup, 'page_popup/js/subPaymentH.js')}");
         }
      window.onload = load;
      
      
      
      
      
      function loadScript(URL, oCallback) {
        var oHead = document.getElementsByTagName('head')[0];
        var oScript = document.createElement('script');
        oScript.type = 'text/javascript';
        oScript.src = URL;
        oScript.async = false;
        oScript.onload = oCallback;
        oScript.onreadystatechange = function() {
            if (this.readyState == 'complete') {
                oCallback();
            }
        }
        oHead.appendChild(oScript);
    }
      //114189 ENDS
        
                    
    </script> 
    <meta name="viewport" content="width=640"/>
    <apex:outputpanel rendered="{!Honda}">
    <apex:stylesheet value="{!URLFOR($Resource.AFSHFS, 'AfsHfs/css/style.css')}" />
    <apex:includescript value="{!URLFOR($Resource.Survey_Popup, 'page_popup/js/subPaymentH.js')}"  />
    </apex:outputpanel>
    <apex:outputpanel rendered="{!Not(Honda)}">
    <apex:stylesheet value="{!URLFOR($Resource.AFSHFS, 'AfsHfs/css/acura-style.css')}" />
    <apex:includescript value="{!URLFOR($Resource.Survey_Popup, 'page_popup/js/subPaymentA.js')}"/>
    </apex:outputpanel>
    <apex:stylesheet value="{!URLFOR($Resource.AFSHFS, 'AfsHfs/css/common.css')}" />
    <apex:outputpanel rendered="{!Honda}">
    <apex:stylesheet value="{!URLFOR($Resource.AFSHFS, 'AfsHfs/css/hfs-accordion.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.Calender,'datepicker/css/honda-datepicker.css')}" />
    </apex:outputpanel>
    <apex:outputpanel rendered="{!Not(Honda)}">
    <apex:stylesheet value="{!URLFOR($Resource.AFSHFS, 'AfsHfs/css/afs-accordion.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.Calender,'datepicker/css/acura-datepicker.css')}" />
    </apex:outputpanel>
    
    <apex:includescript value="{!$Resource.jquery1113min}" />
    <apex:includescript value="{!URLFOR($Resource.jQueryFiles,'jquery-ui-1.11.4.custom/jquery-ui.min.js')}" />
    <apex:includescript value="{!URLFOR($Resource.Calender,'datepicker/javascript/zebra_datepicker.js')}" />
    <apex:includescript value="{!URLFOR($Resource.TrackingJS, 'AppMeasurement_JavaScript-1.5.2/VisitorAPI.js')}"/>
    <apex:includescript value="{!URLFOR($Resource.TrackingJS, 'AppMeasurement_JavaScript-1.5.2/AppMeasurement.js')}"/>
    
    <!-- Defect:114079 : Timeout popup dialog modified by Tiru--> 
    <apex:includescript value="{!URLFOR($Resource.TimeoutDialog, 'Timeout/js/idle-timer.js')}"/>  
    <apex:includescript value="{!URLFOR($Resource.TimeoutDialog, 'Timeout/js/timeout-dialog.js')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.TimeoutDialog,'Timeout/css/timeout-dialog.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.TimeoutDialog,'Timeout/css/index.css')}" />
    <!-- End Defect:114079 -->
  
    <style media='print'>
        @media print {
            body * {
                visibility: hidden;
            }
 
            #divname * {
                visibility: visible;
            }
 
            #divname {
                position: absolute;
                top: 40px;
                left: 40px;
            }
 
            header {
                visibility: hidden;
            }
 
            footer {
                display: none;
            }
       }
 
    </style>
    
    <!-- Defect #114079 : Timeout dialog modified by Tiru  -->
    <script type="text/javascript">
        function timeoutjs() {
            var pj = jQuery.noConflict();
            pj(function () {
             pj.timeoutDialog({timeout:{!$Label.Community_Session_Timeout}});  
             pj(".overlay-sec").addClass('overlay');          
            });
        }
        //Start the idle timer 
        $.idleTimer({!$Label.Community_Session_Timeout}*60000);
        $(document).bind("idle.idleTimer", function(){
          // function you want to fire when the user goes idle       
           if (!inIframe()) {
              timeoutjs();
           }
         });    
         
         function inIframe() {
            try {
        
                return window.self !== window.top;
        
            } catch (e) {
        
                return true;
        
            }
         }
       </script>
       <!-- End Defect:114079 -->
        <script type="text/javascript">
        var isselected = false;
            function printDiv(divname){
                var printContents = document.getElementById(divname).innerHTML;
                var originalContents = document.body.innerHTML;
                document.body.innerHTML = printContents;
                window.print();
                document.body.innerHTML = originalContents;
            }
 
            function printDivBank(t,tb){
 
                document.getElementById(tb).style.display = 'Block';
 
                var printContents = document.getElementById(t).innerHTML;
 
                var originalContents = document.body.innerHTML;
                document.body.innerHTML = printContents;
                window.print();
                document.body.innerHTML = originalContents;
            }
            function highlight()
            {
               // alert("called");
                var ChargeDateid = '{!$Component.ChargeDateid}';
                var select = document.getElementById(ChargeDateid);
                var selectedString = select.options[select.selectedIndex].value;
               // alert(selectedString);
            }           
        </script>
        <script type="text/javascript">
                //j$ = jQuery.noConflict();
                var closeBoolean = false;
               function validateDataJs(){
              bankAccountTypeJs();
              bankNumberJs();
              reEnterbankNumberJs();
              validateTermsConditions();
             validateRNJS();
              if(document.getElementById("PaymentPage:theForm:pbMainBlock:bankNameId") != null)
              {
              validateBankName();
              }
            
              if(!document.getElementById("errorsAccountTypeId").innerHTML == ''
              || !document.getElementById("errorsRoutingNumberId").innerHTML == ''
              || !document.getElementById("errorsBankAccountNumberId").innerHTML == ''
              || !document.getElementById("errorsReEnterBankNumberId").innerHTML == ''
              || !document.getElementById("errorscheck1Id").innerHTML == ''
              || !document.getElementById("errorsBankNameId").innerHTML == ''
              )
              {
            //  alert('If');
              return  false;
              }
              reviewBankAccounts();
              //return true;
                
             }
             function validateRNJS()
        {
            var numbers = /^[-+]?[0-9]+$/;
            document.getElementById("errorsRoutingNumberId").innerHTML = '';
            document.getElementById("PaymentPage:theForm:pbMainBlock:routingNumberId").style.border = "";
            var routingNumber = document.getElementById(routingNumberids).value;
            
            if(routingNumber.length == 0 || routingNumber.length < 9) 
            {
                 var error  = '<br>Enter a valid 9-digit routing number.';
            }
            if(routingNumber.length > 0 && !routingNumber.match(numbers))
            {
                 var error = '<br>Enter a valid 9-digit routing number.';
            }
            if(error)
                {
                 document.getElementById("PaymentPage:theForm:pbMainBlock:routingNumberId").style.border = "1px solid #FF6600";
                 document.getElementById("errorsRoutingNumberId").innerHTML = error;
                // return false;
            }
            // return true;
        }
 
        function validateRoutingNumberJs()
        {  
            var numbers = /^[-+]?[0-9]+$/;
            document.getElementById("errorsRoutingNumberId").innerHTML = '';
            document.getElementById("PaymentPage:theForm:pbMainBlock:routingNumberId").style.border = "";
            var routingNumber = document.getElementById(routingNumberids).value;
            if(routingNumber.length > 0 && !routingNumber.match(numbers))
            {
                 var error = '<br>Enter a valid 9-digit routing number.';
                 document.getElementById("PaymentPage:theForm:pbMainBlock:routingNumberId").style.border = "1px solid #FF6600";
                 document.getElementById("errorsRoutingNumberId").innerHTML = error;
                 return false;
            }
            else if(routingNumber.length == 0 || routingNumber.length < 9) {
                 var error  = '<br>Enter a valid 9-digit routing number.';
                 document.getElementById("PaymentPage:theForm:pbMainBlock:routingNumberId").style.border = "1px solid #FF6600";
                 document.getElementById("errorsRoutingNumberId").innerHTML = error;
                 return false;
            }
            else
                {   
                    validateRoutingNumber();
                }
            //return true;
            
        }
        function bankAccountTypeJs()
        {   
         //   alert('Inside account type');
            document.getElementById("errorsAccountTypeId").innerHTML = '';
            document.getElementById("PaymentPage:theForm:pbMainBlock:accountTypeId").style.border = "";
            var accountType = document.getElementById("PaymentPage:theForm:pbMainBlock:accountTypeId").value;
        //    alert(accountType);
            if(accountType.length == 0 || accountType == 'Select One' )
            {
                 var error  = '<br>Select a bank account type.';
                 document.getElementById("PaymentPage:theForm:pbMainBlock:accountTypeId").style.border = "1px solid #FF6600";
                 document.getElementById("errorsAccountTypeId").innerHTML = error;
                 // return false;
            }
            // return true;
            
        }
        function validateBankName()
        {
            document.getElementById("errorsBankNameId").innerHTML = '';
            document.getElementById("PaymentPage:theForm:pbMainBlock:bankNameId").style.border = "";
            var bankname = document.getElementById("PaymentPage:theForm:pbMainBlock:bankNameId").value; 
            if(bankname.length == 0)
            {
                var error = '<br>Enter your bank name.';
                document.getElementById("PaymentPage:theForm:pbMainBlock:bankNameId").style.border = "1px solid #FF6600";
                document.getElementById("errorsBankNameId").innerHTML = error;
                // return false;
            }
            // return true;
        }
        function bankNumberJs()
        {   
            
            var numbers = /^[-+]?[0-9]+$/;
            document.getElementById("errorsBankAccountNumberId").innerHTML = '';
            document.getElementById("PaymentPage:theForm:pbMainBlock:bankAccountNumberId").style.border = "";
            var bankaccountNumber = document.getElementById("PaymentPage:theForm:pbMainBlock:bankAccountNumberId").value; 
            
            //114067 -  Added by Shubham
            var numberValbankaccountNumber = Number(bankaccountNumber);
            if(numberValbankaccountNumber < 0 ){
                
                var error = '<br>Enter a valid bank account number.';
            }
                else if(bankaccountNumber.length == 0 )
                {
                 var error = '<br>Enter a bank account number.';
                 }
                else if(bankaccountNumber.length > 0 && !bankaccountNumber.match(numbers))
                {
                 var error = '<br>Enter a bank account number.';
                }
                if(error)
                {
                document.getElementById("PaymentPage:theForm:pbMainBlock:bankAccountNumberId").style.border = "1px solid #FF6600";
                document.getElementById("errorsBankAccountNumberId").innerHTML = error;
                // return false;
                }
            
            // return true;
        }
        function reEnterbankNumberJs()
        {
            var numbers = /^[-+]?[0-9]+$/;
            document.getElementById("errorsReEnterBankNumberId").innerHTML = '';
            document.getElementById("PaymentPage:theForm:pbMainBlock:reEnterBankNumberId").style.border = "";
            var bankaccountNumber = document.getElementById("PaymentPage:theForm:pbMainBlock:bankAccountNumberId").value; 
            var reEnterBankNumber = document.getElementById("PaymentPage:theForm:pbMainBlock:reEnterBankNumberId").value;
                if(reEnterBankNumber.length == 0)
                {
                 var error = '<br>Re-enter bank account number.';
                }
                if(reEnterBankNumber.length > 0 && !reEnterBankNumber.match(numbers))
                {
                 var error = '<br>Re-enter bank account number.';
                }
                if(!error && bankaccountNumber != reEnterBankNumber)
                {
                 var error = '<br>Account numbers do not match.';
                }
                if(error)
                {
                document.getElementById("PaymentPage:theForm:pbMainBlock:reEnterBankNumberId").style.border = "1px solid #FF6600";
                document.getElementById("errorsReEnterBankNumberId").innerHTML = error;
                 // return false;
                }
            
            // return true;
        }
         function validateTermsConditions()
        {
            document.getElementById("errorscheck1Id").innerHTML = '';
            document.getElementById("PaymentPage:theForm:pbMainBlock:check2").style.border = "";
            var checkboxvalue = document.getElementById(checkboxval).checked; 
            if(checkboxvalue == false)
            {
            var error = '<br>You must agree to the Terms &amp; Conditions to continue.';
            document.getElementById("PaymentPage:theForm:pbMainBlock:check2").style.border = "1px solid #FF6600";
            document.getElementById("errorscheck1Id").innerHTML = error;
            // return false;
            }
            // return true;
        }
 
            function cancelBankPopup()
            {
                document.getElementById(outputPanelId).style.display = 'none';
                return false;
            }
 
            function closeBankPopupJS()
            {
                document.getElementById(outputPanelId).style.display = 'none';
            }
        </script>
        <!----------------- renter account number disable Scripts ---------------------------------------------------------- -->
        <script type="text/javascript">
            var pj = jQuery.noConflict();
            pj(document).ready(function() {
                reenterDisable();
            });
        </script> 
 
        <script type="text/javascript">
          function reenterDisable() {
 
 
            pj('[id$=reEnterBankNumberId]').bind("cut copy paste", function(e) {
                e.preventDefault();
                pj('[id$=reEnterBankNumberId]').bind("contextmenu", function(e) {
                    e.preventDefault();
                });
            });
        }
 
 
    </script> 
 
    <!-- Added as part of RSS 41389-->
    <style type="text/css">
       .EasyPayMsg { color: black; }
    </style>
    <!--End of RSS 41389 -->
 
 
</head>
<body onload="acc();" onkeydown = "return (event.keyCode!=13)">

<div class="focustop" />
    <apex:inputhidden id="hdAccordionDrawer" value="{!typecheck}" />
    <div class="overlay"></div>
    <apex:pageblock id="pbMainBlock">
    <apex:outputpanel id="opMainContainer">
     <apex:actionStatus onstart="loading(true,'otpLoading')" onstop="loading(false,'otpLoading')" id="otpStatus"/>
    <!-- Start: Spinner Wheel Message functionality was added by Omkar for the Defect #114048-->  
    <apex:actionStatus onstart="loading(true,'otpLoadingmsg');" onstop="loading(false,'otpLoadingmsg')" id="otpStatusmsg"/>
    <apex:actionStatus onstart="loading(true,'recurringLoading')" onstop="loading(false,'recurringLoading')" id="rpStatus"/>
    <apex:actionStatus onstart="loading(true,'recurringLoadingmsg');" onstop="loading(false,'recurringLoadingmsg')" id="rpStatusmsg"/>
    <apex:actionStatus onstart="loading(true,'pfLoading')" onstop="loading(false,'pfLoading')" id="pfStatus"/>
    <apex:actionStatus onstart="loading(true,'pfLoadingmsg');" onstop="loading(false,'pfLoadingmsg')" id="pfStatusmsg"/>
    <apex:actionStatus onstart="loading(true,'bankLoading')" onstop="loading(false,'bankLoading')" id="bankStatus"/>
    <apex:actionStatus onstart="loading(true,'bankLoadingmsg')" onstop="loading(false,'bankLoadingmsg')" id="bankStatusmsg"/>
    <!-- End -->      
  
        
    <div class="middle-col pB10">
        <div class="middle-title" id="checkindex" tabindex="-1">
        <apex:outputPanel id="AccountOverviewSection">
            <apex:outputpanel rendered="{!successModeOTP == false && successMode == false && successModePF == false}">
            <p>
                <!--Defect:113147:Tiru: Account Overview-->
                <!-- <span>Account Overview </span> -->
                <span data-modal-id="overview-box" class="js-open-modal overview-link"> <apex:commandlink action="{!displaypopupOverview}" id="clickmeaov" value="Account Overview" onclick="ovelayPop('{!$Component.clickmeaov}');" rerender="AccountOverviewSection"/> </span>
                <apex:commandlink action="{!displaypopupOverview}" id="clickmeaovimg" onclick="ovelayPop('{!$Component.clickmeaovimg}');" rerender="AccountOverviewSection"><apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/home.png')}"  width="20" height="20"/></apex:commandlink>
            </p>
 
 
            <!-- Account Overview Popup -->
            <apex:outputpanel id="AOV_id" style="display:block; top:13%; margin:0 auto; position:absolute; right:0; left:0;border:0; outline:none; border-radius:4px; cursor:pointer;" layout="block" rendered="{!displayOverview == true}">
            <div class="window-size-two" id="delete-pop">
                <h3>Go to Account Overview?</h3>
                <div class="pop-up-details">
                    <p class="window-msg">
                        You will now be directed to your Account Overview page. All of the information that you have entered will be lost. Are you sure you want to proceed?
                    </p>
 
 
                    <div class="pop-btn-section">
                        <label><apex:commandbutton styleclass="regular-btn btn-3 js-modal-close close" action="{!hidepopupOverview}" value="No" oncomplete="removeovelayPop('{!$Component.clickmeaov1}');" id="clickmeaov1" rerender="AccountOverviewSection"/></label>
                        <label><apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="{window.top.location={!$Label.AccountOverviewURL}; return false;}" rendered="{!honda}" /><apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="{window.top.location={!$Label.Accura_Account_Overview_URL}; return false;}" rendered="{!!honda}" /></label>
                    </div>
 
                </div>
            </div>
        </apex:outputpanel>
        <!-- End Account Overview Popup -->
    </apex:outputpanel>
   </apex:outputPanel>
    
    <apex:outputPanel id="AccountOverviewSectionSubmitPage">
    <apex:outputpanel rendered="{!(editModeOTP == false && reviewModeOTP == false && successModeOTP == true) || (editMode == false && reviewMode == false && successMode == true) || (editModePF == false && reviewModePF == false && successModePF == true) }">
    <apex:outputPanel rendered="{!Honda}">
            <p>
               
                <span data-modal-id="overview-box" class="js-open-modal overview-link"> <apex:commandlink id="AccHonda" value="Account Overview" onclick="{window.top.location={!$Label.AccountOverviewURL}; return false;}"/> </span>
                <apex:commandlink id="AccHImg" onclick="{window.top.location={!$Label.AccountOverviewURL}; return false;}"><apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/home.png')}"  width="20" height="20"/></apex:commandlink>
            </p>
    </apex:outputPanel>
    
    <apex:outputPanel rendered="{!!Honda}">
            <p>
                
                <span data-modal-id="overview-box" class="js-open-modal overview-link"> <apex:commandlink id="AccAcura" value="Account Overview" onclick="{window.top.location={!$Label.Accura_Account_Overview_URL}; return false;}"/> </span>
                <apex:commandlink id="AccAImg" onclick="{window.top.location={!$Label.Accura_Account_Overview_URL}; return false;}"><apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/home.png')}"  width="20" height="20"/></apex:commandlink>
            </p>
    </apex:outputPanel>        
    </apex:outputPanel>   
    </apex:outputPanel>     
    
    <!-- End Account Overview Section -->
    
    
    
    <h1>Make a Payment</h1>
 
</div>
 
<div class="accordion">
 
    <!-- -------------------- Start of OTP ------------------------------------------------------------ -->
 
    <h1><apex:commandlink action="{!fetchDataOTP}" oncomplete="setCalender(); fndisablechkeach();" value="One-Time Payment" rerender="opOTPMain" status="otpStatus" style="accordionlink" styleClass="accordionlink OTPadope"/></h1>
    <div>
        <apex:outputpanel id="opOTPMain">
        <div class="waitingSearchDiv overlay-loader" id="otpLoading" style="display:none;"> 
            <div class="waitingHolder">
                <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/loading.gif')}" title="Please Wait" width="32" height="32" />
                
            </div>
        </div>  
         <!-- Start: Time out redirection functionality was added by Omkar for the Defect #114048--> 
        <div class="waitingSearchDiv overlay-loader" id="otpLoadingmsg" style="display:none;"> 
            <div class="waitingHolder">
                <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/loading.gif')}"/>
                <br/><div style="margin-left:-150px; width:500px;">
                    <span class="waitingDescription"> <b>Processing your request. Do not refresh this page.</b></span> 
                </div>
            </div>
        </div>  
        <!-- End -->
        
    <!--    <apex:actionFunction name="checkstdAmtactionfunction" action="{!checkStdAmtOTP}"  rerender="OPstdAmt,OPMstd">
          <apex:param name="stdAmt" value="" />
          </apex:actionFunction>  
        
        <apex:actionFunction name="checkDatevalueOTPActFunc" action="{!checkDatevalueOTP}" oncomplete="setCalender()" rerender="PD,OPMpaydate">
        <apex:param name="stdDate" value=""/>
        </apex:actionFunction> -->
        <apex:actionFunction name="checkdateOTP" action="{!checkDatevalueOTP}" oncomplete="setCalender()" rerender="PD,opmgrp" status="otpStatus"/>
        
        <!--- Jayashree added this for defect #113982 ---->
        <apex:actionfunction name="CtOTPBtn" action="{!reviewDetailsOTP}" rerender="opOTPMain" oncomplete="setCalender(); shuffletop(); setOverlay();" status="otpStatus"/>
        <apex:actionfunction name="EditOTPBtn" action="{!editOTP}" rerender="opOTPMain" oncomplete="setCalender(); shuffletop();" status="otpStatus"/>
        <!-- Start: Spinner Wheel Message was added by Omkar for the Defect #114048-->
        <apex:actionfunction name="SubOTPBtn" action="{!submitOTP}"  rerender="opOTPMain,AccountOverviewSectionSubmitPage,AccountOverviewSection" oncomplete="shuffletop();" status="otpStatusmsg"/>
        <!-- End -->
        <!--- Jayashree added this for defect 114188 ----->
        <apex:actionfunction name="reviewOTPNavigate" action="{!reviewdetailsOTPNavigation}"  rerender="opOTPMain" oncomplete="removeovelayPop('{!$Component.clickmeotpconfirmYes}');" status="otpStatus"/>
        <!--- End of defect 114188---------------------->
        <!-- if the user is Eligible to make OTP -->
        <apex:outputpanel rendered="{!finaccountOTP.Fl_OneTime_Payment_Eligible_Web__c == false}">
        <!-- Changes added to the links by Jayashree for 114165--->
        <apex:outputpanel rendered="{!Honda}">
        <div class="secondary-title">Please Contact Us</div>
        <div class="pL10 pR10">Your finance account is currently ineligible for One-Time Payments. Please&nbsp;<a href="{!$Label.HondaCSEP}" target="_blank" styleclass="clkhere"  >click here</a> to contact a customer service representative for assistance.</div>
    </apex:outputpanel>
    <apex:outputpanel rendered="{!Not(Honda)}">
    <div class="secondary-title">Please Contact Us</div>
    <div class="pL10 pR10">Your finance account is currently ineligible for One-Time Payments. Please&nbsp;<a href="{!$Label.AcuraCSEP}" target="_blank" styleclass="clkhere"  >click here</a> to contact a customer service representative for assistance.</div>
</apex:outputpanel>
       <!--- End of defect 114165 ---->
</apex:outputpanel>
 
<!-- if the user is Eligible to make OTP and number of OTP made in the past is more than 6-->
<apex:outputpanel rendered="{!finaccountOTP.Fl_OneTime_Payment_Eligible_Web__c == true && displayModeOTP == false}">
<div class="secondary-title">Maximum Reached</div>
<div class="pL10 pR10">You have reached the maximum number of pending payments allowed for this finance account. You may edit your scheduled payment on the Pending Payments page.</div>
</apex:outputpanel>
 
 
<!--if the user is Eligible and number of payments is under 6 times-->
<apex:outputpanel id="OTPid" style="display:block" rendered="{!finaccountOTP.Fl_OneTime_Payment_Eligible_Web__c == true && displayModeOTP == true}">
<!-- EditModeOTP is true means, you are creating a new OTP-->
<apex:outputpanel id="page3" rendered="{!editModeOTP == true && reviewModeOTP == false}">
<div class="step-pro-breadcrumb">
    <div class="process-level">
        <div class="step-one pull-left">
            <div class="step-name">Set Up</div>
            <div class="step-count">1</div>
        </div>
        <div class="process-control process-none">
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
        </div>
 
    </div>
    <div class="process-level">
        <div class="step-one pull-left step-disable">
            <div class="step-name">Review</div>
            <div class="step-count">2</div>
        </div>
        <div class="process-control process-none">
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
        </div>
    </div>
    <div class="step-one pull-left step-disable last">
        <div class="step-name">Completed</div>
        <div class="step-count">3</div>
    </div>
</div>
</apex:outputpanel>
 
<!-- EditModeOTP is true means, you are creating a new OTP or editing one-->
<apex:outputpanel rendered="{!editModeOTP == true && reviewModeOTP == false}">
<div class="secondary-title">Provide your One-Time Payment Information</div>
<div class="padding10">
<!-- Changes added for the defect 113948 by Jayashree ---->
    Your one-time payment will be credited to your account within 2 business days of your scheduled payment date. <b>Same day one-time payments cannot be edited or cancelled after {!cutOffTime} {!$Setup.Honda_Finance__c.Time_Zone__c}.</b>
</div>
<div class="round-box review-detail">
<apex:outputpanel rendered="{!finaccountOTP.Current_Amount_Due__c != 0 && finaccountOTP.Current_Amount_Due__c != null}">
        <div class="full-size">
                <div class="lbltitle"><apex:outputlabel value="Current Amount Due" />
                </div>
                      <div class="lbldesc"><span>&#36;</span><apex:outputtext value="{!finaccountOTP.Current_Amount_Due__c}" />
                      <apex:outputpanel rendered="{!YEAR(finaccountOTP.Payment_Due_Date__c) < 2100}">
                                Due on <apex:outputtext value="{0, date, MM/dd/yyyy}">
                                <apex:param value="{!finaccountOTP.Payment_Due_Date__c}" />
                                </apex:outputtext>
                        </apex:outputpanel>
                      </div>
                </div>
      </apex:outputpanel>
 
<apex:outputpanel rendered="{!finaccountOTP.Past_Amount_Due__c != 0 && finaccountOTP.Past_Amount_Due__c != null}">
        <div class="full-size">
                <div class="lbltitle"><apex:outputlabel value="Past Amount Due " style="font-weight:bold" /></div>
                        <div class="lbldesc"><span>&#36;</span><apex:outputtext value="{!finaccountOTP.Past_Amount_Due__c}" style="font-weight:bold"/> 
                        <b>Due Today</b>
                        </div>
        </div>
      </apex:outputpanel>
 
<apex:outputpanel rendered="{!finaccountOTP.Total_Fees_Due__c != 0 && finaccountOTP.Total_Fees_Due__c != null}">
        <div class="full-size">
                      <div class="lbltitle"><apex:outputlabel value="Total Fees Due" /></div>
                        <div class="lbldesc"><span>&#36;</span><apex:outputtext value="{!finaccountOTP.Total_Fees_Due__c}" /></div>
              </div>
      </apex:outputpanel>
 
<apex:outputpanel rendered="{!(finaccountOTP.Current_Amount_Due__c != 0 && finaccountOTP.Current_Amount_Due__c != null && finaccountOTP.Past_Amount_Due__c != 0 && finaccountOTP.Past_Amount_Due__c != null && finaccountOTP.Total_Amount_Due__c != null) || (finaccountOTP.Current_Amount_Due__c != 0 && finaccountOTP.Current_Amount_Due__c != 0 && finaccountOTP.Total_Fees_Due__c  != 0 && finaccountOTP.Total_Fees_Due__c  != null && finaccountOTP.Total_Amount_Due__c != null) || (finaccountOTP.Past_Amount_Due__c != 0 && finaccountOTP.Past_Amount_Due__c != null && finaccountOTP.Total_Fees_Due__c != 0 && finaccountOTP.Total_Fees_Due__c != null && finaccountOTP.Total_Amount_Due__c != null) || (finaccountOTP.Current_Amount_Due__c != 0 && finaccountOTP.Current_Amount_Due__c != null && finaccountOTP.Past_Amount_Due__c != 0 && finaccountOTP.Past_Amount_Due__c != null && finaccountOTP.Total_Fees_Due__c  != 0 && finaccountOTP.Total_Fees_Due__c != null && finaccountOTP.Total_Amount_Due__c != null)}">
        <div class="full-size">
                        <div class="lbltitle"><apex:outputlabel value="Total Amount Due" /></div>
                    <div class="lbldesc"><span>&#36;</span><apex:outputtext value="{!finaccountOTP.Total_Amount_Due__c}" /></div>
             </div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!scheduledEasypayAmt != 0 && scheduledEasypayAmt != null}">
        <div class="full-size">
                      <div class="lbltitle"><apex:outputlabel value="Scheduled EasyPay Amount" /></div>
                      <div class="lbldesc">
                             <span>&#36;</span>
<apex:outputtext value="{!scheduledEasypayAmt}" /> on <apex:outputtext value="{0, date, MM/dd/yyyy}">
                                      <apex:param value="{!scheduledNextWithdrawalDate}" />
            </apex:outputtext>
</div>
          </div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!scheduledEasypayAmt != 0 && scheduledEasypayAmt != null}">
<div class="full-size">
                <div class="lbltitle"><apex:outputlabel value="Remaining Amount Due" /> </div>
                               <div class="lbldesc"><span>&#36;</span><apex:outputtext value="{!finaccountOTP.Remaining_Amount_Due__c}" /></div>
</div>
</apex:outputpanel>
 
<!--
<script>
function OTPcheckstdAmt(std){
        var stdAmt= std.value;
        console.log('selectedAmt is ' + stdAmt);
        checkstdAmtactionfunction(stdAmt);
    }
    
    function checkDatevalueOTP(stdDt){
        var stdDate= stdDt.value;
        console.log('selectedAmt is ' + stdDate);
        checkDatevalueOTPActFunc(stdDate);
    }
</script>
-->
<div class="hr clear"></div>
<apex:outputpanel id="opmgrp">
    <apex:pagemessages id="OPM1"></apex:pagemessages>
  <!--- changes added to the defect 114086 by Jayashree --->
    <apex:outputpanel id="OPMstd" rendered="{!haswarningStdAmtmsg}">
        <p><b>{!stdwarnmsg}</b></p>  
    </apex:outputpanel>    
    <apex:outputpanel id="OPMprincipal" rendered="{!haswarningPrnAmtmsg}"> 
        <p>{!prnwarnmsg}</p>
    </apex:outputpanel>
    <apex:outputpanel id="OPMpaydate" rendered="{!haswarningPaydatemsg}"> 
        <p><b>{!paydatewarnmsg}</b></p>
        <!-- End of defect 114086 --->
    </apex:outputpanel>    
</apex:outputpanel>
<div class="otp-info">
    <span class="error-model">* Required Field</span>
   <!-- <form id="form1" method="post" class="ta-center"> -->
        <apex:outputpanel id="OPstdAmt" rendered="{!OTPid == null}">
        <div class="form-field">
            <label for="Standard-Payment-Amount">
                Standard Payment Amount 
                <a href="javascript:;" class="tooltip">
                    <b>?</b>
                    <span class="tooltip-box">The Standard Payment Amount will be applied toward your Total Amount Due.</span>
                </a>
            </label><div class="form-fill">
            <!--Changes made for defect # 113211-->
            <span>&#36;</span><apex:inputtext value="{!standardAmount}" styleclass="medium-input" id="paymentAmount" style="{!IF(errorstdColorPD = 'Red','border:1px solid #FF6600',If(errorstdColorPD = 'Green','border:1px solid #00CC33','border:1px solid #FFF'))}">
            <apex:actionsupport event="onblur" action="{!checkStdAmtOTP}"  rerender="OPstdAmt,opmgrp" status="otpStatus"/> 
                </apex:inputtext>
            </div>
        </div>
        </apex:outputpanel>
 
<!-- <apex:outputpanel id="Linkid" rendered="{!(finaccountOTP.Account_Type__c == 'Retail' && (finaccountOTP.Past_Amount_Due__c == 0 || finaccountOTP.Past_Amount_Due__c == null)) || (finaccountOTP.Account_Type__c == 'Balloon' && finaccountOTP.Fl_Refinanced__c == true && (finaccountOTP.Past_Amount_Due__c == 0 || finaccountOTP.Past_Amount_Due__c == null)) && OTPid  == null }" style="{!IF(PrincipalAmount == null , 'display:block', 'display:none')}"> -->
 
<apex:outputpanel id="Linkid" rendered="{!(((finaccountOTP.Account_Type__c == 'Retail' && pastDueStatus == false) || (finaccountOTP.Account_Type__c == 'Balloon' && finaccountOTP.Fl_Refinanced__c == true && pastDueStatus == false)) && (OTPid  == null || OTPid =='') && (finaccountOTP.Principal_Balance_Amount__c != null && finaccountOTP.Principal_Balance_Amount__c> 0 && isPrincipalEdited=='false'))}" style="{!IF(finaccountOTP.Principal_Balance_Amount__c == null , 'display:none', IF(finaccountOTP.Principal_Balance_Amount__c > 0.00,'display:block','display:none'))}">
<div class="form-field">
    <label for="Want-to-pay">
        <apex:commandlink value="Want to Pay down Principal" onclick="return JSMethod(this,'{!$Component.Linkid}','{!$Component.Principalamountid}');" rerender="Principalamountid" />
        <a href="javascript:void(0);" class="tooltip">
            <b>?</b>
            <span class="tooltip-box">The Principal Payment Amount will be applied toward your principal balance only. This is an additional payment.</span>
        </a>
    </label><div class="disable form-fill"><input type="text" id="principalText" class="medium-input" /></div>
</div>
</apex:outputpanel>
<apex:outputpanel id="Principalamountid" style="{!IF((finaccountOTP.Principal_Balance_Amount__c != null) , IF(errorColorPrincipalPD != 'None','display:block','display:none'), 'display:none')}">
<apex:outputpanel rendered="{!((finaccountOTP.Account_Type__c == 'Retail' && pastDueStatus == false ) || (finaccountOTP.Account_Type__c == 'Balloon' && finaccountOTP.Fl_Refinanced__c == true && pastDueStatus == false ) ) && OTPid  == null}">
                                                       <!-- <apex:outputpanel id="Principalamountid" style="{!IF((PrincipalAmount != null || PrincipalAmount != '') , 'display:block', 'display:none')}">
                                                       <apex:outputpanel rendered="{!((finaccountOTP.Account_Type__c == 'Retail' && finaccountOTP.Past_Amount_Due__c == 0 ) || (finaccountOTP.Account_Type__c == 'Balloon' && finaccountOTP.Fl_Refinanced__c == true && finaccountOTP.Past_Amount_Due__c == 0 ) ) && OTPid  == null}">  -->  
                                                       <div class="form-field">
                                                        <label for="Principal-Payment-Amount">
                                                            Principal Payment Amount
                                                            <a href="javascript:;" class="tooltip">
                                                                <b>?</b>
                                                                <span class="tooltip-box">The Principal Payment Amount will be applied toward your principal balance only. This is an additional payment.</span>
                                                            </a>
                                                        </label>
                                                        <div class="form-fill"><span>&#36;</span><apex:inputtext value="{!PrincipalAmount}" styleclass="medium-input" style="{!IF(errorColorPrincipalPD = 'Red','border:1px solid #FF6600',If(errorColorPrincipalPD = 'Green','border:1px solid #00CC33','border:1px solid #FFF'))}">
                                                            <apex:actionsupport event="onblur" action="{!checkPrincipalOTP}"  rerender="Principalamountid,opmgrp" status="otpStatus"/>
                                                        </apex:inputtext>
                                                    </div>
                                                </div>
                                            </apex:outputpanel>
                                        </apex:outputpanel>
                                        <apex:inputhidden id="hiddenPrincipalFlag" value="{!isPrincipalEdited}"/>
                                        <apex:outputpanel id="OPMstdEdit" rendered="{!OTPid  != null && recordTypeName == true}">
                                        <div class="form-field">
                                            <label>Standard Payment Amount</label>  
                                            <div class="form-fill"><apex:inputtext value="{!StandardAmount}" styleclass="medium-input mL8" style="{!IF(errorstdColorPD = 'Red','border:1px solid #FF6600',If(errorstdColorPD = 'Green','border:1px solid #00CC33','border:1px solid #FFF'))}">
                                                <apex:actionsupport event="onblur" action="{!checkStdAmtOTP}"  rerender="OPMstdEdit,opmgrp" status="otpStatus" />
                                                </apex:inputtext>
                                            </div>
                                        </div>
 
                                        </apex:outputpanel>
 
                                <apex:outputpanel id="principalpay" rendered="{!OTPid  != null && recordTypeName == false}">
                                <div class="form-field">
                                    <div class="lbltitle"><apex:outputlabel value="Principal Payment Amount" /></div>
                                    <div class="lbldesc"><apex:inputtext value="{!PrincipalAmount}" styleclass="medium-input mL8" style="{!IF(errorColorPrincipalPD = 'Red','border:1px solid #FF6600',If(errorColorPrincipalPD = 'Green','border:1px solid #00CC33','border:1px solid #FFF'))}">
                                        <apex:actionsupport event="onblur" action="{!checkPrincipalOTP}" rerender="principalpay,opmgrp" status="otpStatus" />
                                    </apex:inputtext>
                                </div>
                            </div>
                        </apex:outputpanel>
 
                        <apex:outputpanel id="PD">
                        <div class="form-field">
                            <apex:outputlabel value="Payment Date" />
                            <div class="form-fill">
                                <!--- Changes made to the defect 114085 by Jayashree --->
                                <apex:inputtext value="{!PaymentDate}" id="datepickerexample1" styleclass="medium-input mL8" style="{!IF(errorColorPD = 'Red','border:1px solid #FF6600',If(errorColorPD = 'Green','border:1px solid #00CC33','border:1px solid #FFF'))}" html-readonly="true">
                                <!-- End of defect 114085 ------------------------------>
                                <!--changes made on defect# 113255-->
                                <!-- <apex:actionsupport event="onchange" action="{!checkDatevalueOTP}" oncomplete="setCalender()" rerender="PD,opmgrp" status="otpStatus"/> -->
                            </apex:inputtext>
                        </div>
                    </div>
                </apex:outputpanel>
 
                <apex:outputpanel id="BankAcc">
                <div class="form-field">
                    <apex:outputlabel value="Bank Account Nickname" />
                    <div class="form-fill">
                        <!--[if !IE]> -->
                        <div class="select-box-cover mL8">
                            <!-- <![endif]-->
                            <span class="fancyArrow"></span>
 
                            <apex:selectlist id="BanknameOTP" value="{!BankaccntNameOTP}" size="1" title="Bank Account Nickname" styleclass="medium-input" style="{!IF(errorColorBA = 'Red','border:1px solid #FF6600',If(errorColorBA = 'Green','border:1px solid #00CC33','border:1px solid #FFF'))}">
                            <apex:actionsupport event="onchange" action="{!checkdataNew}" rerender="accountoverview" oncomplete="reenterDisable();" status="otpStatus">
                            <apex:param name="transactionType" value="onetime" />
                        </apex:actionsupport>
                        <apex:selectoptions value="{!bankValuesOTP}"></apex:selectoptions>
                    </apex:selectlist> 
                    <script>console.log('Bank values otp called');</script>
                    <!--[if !IE]> -->
                </div>
                <!-- <![endif]-->
            </div>
        </div>
    </apex:outputpanel>
 
 
 
<!--</form>-->
</div>
<div class="hr clear"></div>
<div class="pTB10 clear">Your payment is being submitted in accordance with the&nbsp;<apex:commandlink value="Terms & Conditions" onclick="window.open('/apex/PdfTermsandCondNewBankAcc?ishonda={!Honda}')" target="_blank"  rerender="opOTPMain" oncomplete="setCalender();"/> for Banking Authorization.</div>
</div>
 
 
<div class="padding10 ta-right">
    <apex:commandbutton value="Cancel" onclick="ovelayPop('{!$Component.clickmeotp}');" id="clickmeotp" action="{!displaypopupOTP}" rerender="opOTPMain" styleclass="regular-btn btn-3 getOverlay mR10" oncomplete="shuffletop();"/>
    <!--- Jayashree added this onclick event for defect #113982 ---->
    <apex:commandbutton value="Continue" onclick="DisableButton(this.id,'CtOTPBtn');return false;" id="CtOTPid" oncomplete="setCalender(); shuffletop();" rerender="opOTPMain" styleclass="primary-btn btn-3" status="otpStatus"/>    
</div>
 
<!-- Popup1 added  to defect 114188 by Jayashree -->
<apex:outputpanel id="popupConfirmotp" style="display:block; top:13%; margin:0 auto; position:absolute; right:0; left:0;border:0; outline:none; border-radius:4px; cursor:pointer;" layout="block" rendered="{!displayConfirmationOTP == true}">
<div class="window-size-two" id="deletePopPaymnts" tabindex="1"  onkeydown="clickNoOnEnter(event);">
    <h3>Please Confirm</h3>
    <div class="pop-up-details">
        <p class="window-msg">You already have a payment pending. Payments scheduled for Sunday will process on Monday and be credited to your account as of the payment date.<br/> 
        <br/>Are you sure you want to create another one?</p>
        <input type="hidden" id="dummyFld0" tabindex="1" value="{!displayConfirmationOTP}"  />
 
        <div class="pop-btn-section">
            <label id='labelPaymentNo'><apex:commandbutton styleclass="regular-btn btn-3 js-modal-close close" action="{!hideConfirmationOTP}" value="No" onclick="{window.location='/apex/Pendingpayment?finnumber={!finIDVF}&isReadOnly={!isReadOnlyParam}'; return false;}" id="clickmeotpconfirm"  /></label>
            <label><apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="setZattribute();return false;" id="clickmeotpconfirmYes" rerender="opOTPMain" status="otpStatus"/></label>
        </div>
    </div>
</div>
</apex:outputpanel>
<!------- End of defect 114188 ------------>
 
<!-- Bank Account Terms and condition --------------------- -->
<div id='Termstobeprinted'>
    <apex:outputpanel id="TermsCondition" style="display:none">
    <div>
 
        <div class="print-pdf-section">
            <apex:outputpanel rendered="{!Honda}">
            <p class="tc-head">Payment Withdrawal Authorization</p>
            <p class="tc-content">When you provide your bank account information to us, you authorize Honda Financial Services to withdraw funds by electronic transfer from the account identified by you each time you request a payment using our online or telephone payment services (and to make credits to correct errors). You will select the amount of the payment and the payment date when you request a payment. This authorization will remain in effect until you cancel it. You may cancel your authorization at any time online by accessing this website and removing the bank account information, but the cancellation will not apply to any payments you have already requested and are already in process. If you cancel your authorization, you will no longer be able to request payments using our online or telephone payment services. This method of cancellation (and other methods of cancellation we may make available from time to time) is the only way that you can cancel this authorization.</p>
            <p class="tc-content">If any payment is rejected due to insufficient funds, Honda Financial Services may charge you a fee and your bank may also charge you a fee.</p>
            <p class="tc-content">You agree that the payments authorized by you must comply with the terms of U.S. law.</p>
            <p class="tc-content">Please print or save a copy of this authorization for your records.</p>
            <p class="tc-content">For information about how to contact AMERICAN HONDA FINANCE CORPORATION <a href="#" onclick="{window.top.location={!$Label.HondaCustomerService}; return false;}">click here</a>.</p>
        </apex:outputpanel>
    </div>
 
 
    <div class="print-pdf-section">
        <apex:outputpanel rendered="{!Not(Honda)}">
        <p class="tc-head">Payment Withdrawal Authorization</p>
        <p class="tc-content">When you provide your bank account information to us, you authorize Acura Financial Services to withdraw funds by electronic transfer from the account identified by you each time you request a payment using our online or telephone payment services (and to make credits to correct errors). You will select the amount of the payment and the payment date when you request a payment. This authorization will remain in effect until you cancel it. You may cancel your authorization at any time online by accessing this website and removing the bank account information, but the cancellation will not apply to any payments you have already requested and are already in process. If you cancel your authorization, you will no longer be able to request payments using our online or telephone payment services. This method of cancellation (and other methods of cancellation we may make available from time to time) is the only way that you can cancel this authorization.</p>
        <p class="tc-content">If any payment is rejected due to insufficient funds, Acura Financial Services may charge you a fee and your bank may also charge you a fee.</p>
        <p class="tc-content">You agree that the payments authorized by you must comply with the terms of U.S. law.</p>
        <p class="tc-content">Please print or save a copy of this authorization for your records.</p>
        <p class="tc-content">For information about how to contact AMERICAN HONDA FINANCE CORPORATION <a href="#" onclick="{window.top.location={!$Label.AcuraCustomerSupport}; return false;}">click here</a>.</p>
    </apex:outputpanel>
</div>
</div>
 
</apex:outputpanel>
</div>
<!--------------------End of Terms and Conditions ----------------- -->
</apex:outputpanel>
 
<!--if all validations passes when invoking ReviewDetailsOTP - the following summary page is displayed-->
<apex:outputpanel rendered="{!editModeOTP == false && reviewModeOTP == true}">
<div class="disable_easypayoffDrawer">
    <div class="step-pro-breadcrumb">
        <div class="process-level">
            <div class="step-one pull-left">
                <div class="step-name"><apex:commandlink value="Set Up" action="{!editOTP}" rerender="opOTPMain" style="text-decoration: none;" oncomplete="setCalender();"/></div>
                <div class="step-count">1</div>
            </div>
            <div class="process-control">
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
            </div>
 
        </div>
        <div class="process-level">
            <div class="step-one pull-left">
                <div class="step-name">Review</div>
                <div class="step-count">2</div>
            </div>
            <div class="process-control process-none">
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
            </div>
        </div>
        <div class="step-one pull-left step-disable last">
            <div class="step-name">Completed</div>
            <div class="step-count">3</div>
        </div>
    </div>
    <script> 
         console.log('<<<<MakeAPaymentStep2PageLoad>>>>');
        // _satellite.track('MakeAPaymentStep2PageLoad'); 
                
   </script>      
    <apex:pagemessages id="ReviewOTPMsg"></apex:pagemessages>
    <div class="secondary-title">One Last Step...</div>
    <div class="padding10">
    <!-- Changes added for the defect 113948 by Jayashree ---->
        To complete the process, review and submit the information below.
        <br></br><b>Same day one-time payments cannot be edited or cancelled after {!cutOffTime} {!$Setup.Honda_Finance__c.Time_Zone__c}.</b>
    </div>
    
    
    
    <div class="round-box review-detail">
 
        <apex:outputpanel rendered="{!OTPid == null && standardAmount != '' && StandardAmount != null && standardAmount != '0.00' }">
        <div class="full-size">
            <div class="lbltitle"><apex:outputlabel value="Standard Payment Amount" /></div>
            <div class="lbldesc"><span>&#36;</span><apex:outputtext value="{!standardAmount}" /></div>
        </div>
    </apex:outputpanel>
 
    <apex:outputpanel rendered="{!(PrincipalAmount != null && PrincipalAmount !='' && OTPid  == null && isPrincipalEdited=='true')}">
    <div class="full-size">
        <div class="lbltitle"><apex:outputlabel value="Principal Payment Amount" /></div>
        <div class="lbldesc"><span>&#36;</span><apex:outputtext value="{!PrincipalAmount}" /></div>
    </div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!OTPid == null}">
<div class="full-size">
    <div class="lbltitle"><apex:outputlabel value="Payment Date" /></div>
    <div class="lbldesc"><apex:outputtext value="{!PaymentDate}" /></div>
</div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!OTPid  != null && recordTypeName == true }">
<div class="full-size">
    <div class="lbltitle"><apex:outputlabel value="Standard Payment Amount" /></div>
    <div class="lbldesc"><span>&#36;</span><apex:outputtext value="{!StandardAmount}" /></div>
</div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!OTPid  != null && recordTypeName == false}">
<div class="full-size">
    <div class="lbltitle"><apex:outputlabel value="Principal Payment Amount" /></div>
    <div class="lbldesc"><span>&#36;</span><apex:outputtext value="{!PrincipalAmount}" /></div>
</div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!OTPid != null}">
<div class="full-size">
    <div class="lbltitle"><apex:outputlabel value="Payment Date" /></div>
    <div class="lbldesc"><apex:outputtext value="{!PaymentDate}" /></div>
</div>
</apex:outputpanel>
 
<apex:outputpanel >
<div class="full-size">
    <div class="lbltitle"><apex:outputlabel value="Bank Account Nickname" /></div>
    <!--Defect:114271 -- Adding last4 Digits of Bank Account Number -->
    <div class="lbldesc"><apex:outputtext value="{!ReviewBanknameOTP}(XXXX-{!last4Num})" /></div>
</div>
</apex:outputpanel>
 
</div>
<!--- Jayashree added this onclick event for defect #113982 ---->
<div class="full-size btn-action">
    <div class="pull-left w30">
        <apex:commandbutton value="Edit" rerender="opOTPMain" onclick="DisableButton(this.id,'EditOTPBtn');return false;" id="EditOTPid" onblur="" styleclass="regular-btn btn-3 marginR10" oncomplete="setCalender(); shuffletop();" status="otpStatus"/>
    </div>
    <div class="pull-left ta-right w70">
        <apex:commandbutton value="Cancel" onclick="ovelayPop('{!$Component.clickmeotp1}');" id="clickmeotp1" action="{!displaypopupOTP}" rerender="OTPid" styleclass="regular-btn btn-3 mR10 getOverlay" oncomplete="shuffletop();"/>
        <apex:outputpanel rendered="{!isReadOnlyParam != 'true'}">
      <!--  <apex:commandbutton value="Submit" onclick="DisableButton(this.id,'SubOTPBtn');return false;" id="SubOTPId" rerender="opOTPMain,AccountOverviewSectionSubmitPage,AccountOverviewSection" styleclass="{!If(disableOTPbtn  = 'false','primary-btn btn-3','disabledbtn')}" disabled="{!disableOTPbtn = 'true'}"  oncomplete="shuffletop();" status="otpStatus"/> -->
            <apex:commandbutton value="Submit" onclick="DisableButton(this.id,'SubOTPBtn');return false;" id="SubOTPId" rerender="opOTPMain,AccountOverviewSectionSubmitPage,AccountOverviewSection" styleclass="{!If(disableOTPbtn  = 'false','primary-btn btn-3','disabledbtn')}" disabled="{!disableOTPbtn = 'true'}"  oncomplete="shuffletop();"/> 
        <!-- End -->
   </apex:outputpanel>
    <apex:outputpanel rendered="{!isReadOnlyParam == 'true'}">
    <apex:commandbutton value="Submit" rerender="opOTPMain" styleclass="disabledbtn" action="{!submitOTP}" disabled="{!isReadOnlyParam == 'true'}" oncomplete="shuffletop();" status="otpStatus"/>
</apex:outputpanel>
</div>
</div>
 
<!-- Popup1 -->
<apex:outputpanel id="popupotp" style="display:block; top:13%; margin:0 auto; position:absolute; right:0; left:0;border:0; outline:none; border-radius:4px; cursor:pointer;" layout="block" rendered="{!displaypopupotp == true}">
<div class="window-size-two" id="delete-pop">
    <h3>Cancel Changes?</h3>
    <div class="pop-up-details">
        <p class="window-msg">By clicking Yes, all the information you may have entered will be lost. Are you sure you want to proceed?</p>
 
 
        <div class="pop-btn-section">
            <label><apex:commandbutton styleclass="regular-btn btn-3 js-modal-close close" action="{!hidepopupOTP}" value="No" oncomplete="removeovelayPop('{!$Component.clickmeotpno2}');" id="clickmeotpno2" rerender="opOTPMain" /></label>
            <label><apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="window.top.location={!$Label.AccountOverviewURL}; return false;" rendered="{!Honda}"/><apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="window.top.location={!$Label.Accura_Account_Overview_URL}; return false;" rendered="{!Not(Honda)}"/></label>
        </div>
 
    </div>
</div>
</apex:outputpanel>
<!-- End of Popup1 -->
</div>
</apex:outputpanel>
 
 
 
<!------------------------------------------End of Review Mode OTP ------------------------- -->
<!------------------------------------------- Summary Mode of OTP ----------------------------- -->
<apex:outputpanel id="OTPSummary" rendered="{!editModeOTP == false && reviewModeOTP == false && successModeOTP == true}">
<div class="disable_easypayoffDrawer">
    <div class="step-pro-breadcrumb">
        <div class="process-level">
            <div class="step-one pull-left">
                <div class="step-name">Set Up</div>
                <div class="step-count">1</div>
            </div>
            <div class="process-control">
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
            </div>
 
        </div>
        <div class="process-level">
            <div class="step-one pull-left">
                <div class="step-name">Review</div>
                <div class="step-count">2</div>
            </div>
            <div class="process-control">
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
            </div>
        </div>
        <div class="step-one pull-left last">
            <div class="step-name">Completed</div>
            <div class="step-count">3</div>
        </div>
    </div>
 
 
    <div class="pull-right pT10">
        <div class="printer-version">
            <a href="/apex/PdfOTPSummary?isHonda={!honda}&OTPid={!OTPid}&StdOTPNumber={!confirmationstd}&PrincipalNumber={!confirmationPrincipal}"  target="_blank" >
                <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/printer.png')}" width="20" height="20" />
                <span>Printer Friendly Version</span>
            </a>
        </div>
    </div>
<div class="clear"></div>
    <apex:outputpanel rendered="{!(commpref[0].Payment_Confirmations_via_Email__c == false && commpref[0].Payment_Confirmations_via_Text__c == false) && OTPid == null}">
    <div class="secondary-title summary-title">Thank you!</div>
    <p class="padding10">
    <!-- Changes added for the defect 113948 by Jayashree ---->
        Your one-time payment was successfully scheduled.
    </p>
 
</apex:outputpanel>
 
 
<apex:outputpanel rendered="{!(commpref[0].Payment_Confirmations_via_Email__c == true && commpref[0].Payment_Confirmations_via_Text__c == false) && OTPid == null}">
<div class="secondary-title summary-title">Thank you!</div>
<p class="padding10">
<!-- Changes added for the defect 113948 by Jayashree ---->
    Your one-time payment was successfully scheduled and a confirmation was sent to {!commpref[0].Email_Address__c}.
</p>
 
</apex:outputpanel>
 
<apex:outputpanel rendered="{!(commpref[0].Payment_Confirmations_via_Text__c == true && commpref[0].Payment_Confirmations_via_Email__c == false) && OTPid == null}">
<div class="secondary-title summary-title">Thank you!</div>
<p class="padding10">
<!-- Changes added for the defect 113948 by Jayashree ---->
    Your one-time payment was successfully scheduled and a confirmation was sent to {!commpref[0].Text_Number__c }.
 
</p>
 
</apex:outputpanel>
 
<apex:outputpanel rendered="{!(commpref[0].Payment_Confirmations_via_Email__c == true && commpref[0].Payment_Confirmations_via_Text__c == true) && OTPid == null}">
<div class="secondary-title summary-title">Thank you!</div>
<p class="padding10">
<!-- Changes added for the defect 113948 by Jayashree ---->
    Your one-time payment was successfully scheduled and a confirmation was sent to {!commpref[0].Email_Address__c} and {!commpref[0].Text_Number__c }. 
 
</p>
 
</apex:outputpanel>
 
<apex:outputpanel rendered="{!((commpref[0].Payment_Confirmations_via_Email__c == false && commpref[0].Payment_Confirmations_via_Text__c == false) && OTPid != null)}">
<div class="secondary-title summary-title">Thank you!</div>
<p class="padding10">
<!-- Changes added for the defect 113948 by Jayashree ---->
    Your one-time payment was successfully updated.
</p>
 
</apex:outputpanel>
 
 
<apex:outputpanel rendered="{!((commpref[0].Payment_Confirmations_via_Email__c == true && commpref[0].Payment_Confirmations_via_Text__c == false) && OTPid != null)}">
<div class="secondary-title summary-title">Thank you!</div>
<p class="padding10">
<!-- Changes added for the defect 113948 by Jayashree ---->
    Your one-time payment was successfully updated and a confirmation was sent to {!commpref[0].Email_Address__c}.
 
</p>
 
</apex:outputpanel>
 
<apex:outputpanel rendered="{!((commpref[0].Payment_Confirmations_via_Text__c == true && commpref[0].Payment_Confirmations_via_Email__c == false) && OTPid != null)}">
<div class="secondary-title summary-title">Thank you!</div>
<p class="padding10">
<!-- Changes added for the defect 113948 by Jayashree ---->
    Your one-time payment was successfully updated and a confirmation has been sent to {!commpref[0].Text_Number__c }.
 
</p>
 
</apex:outputpanel>
 
<apex:outputpanel rendered="{!((commpref[0].Payment_Confirmations_via_Email__c == true && commpref[0].Payment_Confirmations_via_Text__c == true)&& OTPid != null)}">
<div class="secondary-title summary-title">Thank you!</div>
<p class="padding10">
<!-- Changes added for the defect 113948 by Jayashree ---->
    Your one-time payment was successfully updated and a confirmation has been sent to {!commpref[0].Email_Address__c} and {!commpref[0].Text_Number__c }.
 
</p>
 
</apex:outputpanel>
<apex:outputpanel rendered="{!confirmationstd != null || confirmationstd !=''}">
<p class="padding10">Standard Payment Confirmation #: <apex:outputtext value="{!confirmationstd}" rendered="{!(StandardAmount != null )}" /></p>
</apex:outputpanel>
<apex:outputpanel rendered="{!confirmationPrincipal != null || confirmationPrincipal !=''}">
<p class="padding10">Principal Payment Confirmation #: <apex:outputtext value="{!confirmationPrincipal}" rendered="{!(PrincipalAmount != null || (finaccountOTP.Principal_Balance_Amount__c <= onloadPrincipalAmt && OTPid  == null))}" /></p>
</apex:outputpanel>
 
<div class="round-box review-detail">
 
 
<!-- Added as part of July release 2018 Rss 41776-->
<apex:outputpanel >
<div class="full-size">
<div class="lbltitle"><apex:outputlabel value="Payment Authorized On" /></div>
<div class="lbldesc"><apex:outputtext value="{!PaymentAuthorizedOn}" /></div>
</div>
</apex:outputpanel>
<!-- Change ends for Rss 41776-->
 
<apex:outputpanel rendered="{!OTPid == null}">
<div class="full-size">
<div class="lbltitle"><apex:outputlabel value="Payment Date" /></div>
<div class="lbldesc"><apex:outputtext value="{!PaymentDate}" /></div>
</div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!OTPid != null}">
<div class="full-size">
    <div class="lbltitle"><apex:outputlabel value="Payment Date" /></div>
    <div class="lbldesc"><apex:outputtext value="{!PaymentDate}" /></div>
</div>
</apex:outputpanel>
 
<apex:outputpanel >
<div class="full-size">
    <div class="lbltitle"><apex:outputlabel value="Bank Account Nickname" /></div>
    
    <!--Defect:114271 -- Adding last4 Digits of Bank Account Number -->
    <div class="lbldesc"><apex:outputtext value="{!ReviewBanknameOTP}(XXXX-{!last4Num})" /></div>
</div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!OTPid == null && standardAmount != '' && StandardAmount != null && standardAmount != '0.00'}">
<div class="full-size">
    <div class="lbltitle"><apex:outputlabel value="Standard Payment Amount" /></div>
    <div class="lbldesc"><span>&#36;</span><apex:outputtext value="{!standardAmount}"/></div>
</div>
</apex:outputpanel>
 
 
<apex:outputpanel rendered="{!OTPid  != null && recordTypeName == true}">
<div class="full-size">
    <div class="lbltitle"><apex:outputlabel value="Standard Payment Amount" /></div>
    <div class="lbldesc"><span>&#36;</span><apex:outputtext value="{!StandardAmount}" /></div>
</div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!PrincipalAmount != null  && OTPid == null && isPrincipalEdited=='true'}">
<div class="full-size">
    <div class="lbltitle"><apex:outputlabel value="Principal Payment Amount" /></div>
    <div class="lbldesc"><span>&#36;</span><apex:outputtext value="{!PrincipalAmount}" /></div>
</div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!OTPid  != null && recordTypeName == false}">
<div class="full-size">
    <div class="lbltitle"><apex:outputlabel value="Principal Payment Amount" /></div>
    <div class="lbldesc"><span>&#36;</span><apex:outputtext value="{!PrincipalAmount}" /></div>
</div>
</apex:outputpanel>
 
 
<apex:outputpanel rendered="{!(StandardAmount != null && standardAmount != '0.00' && PrincipalAmount != null)}">
<div class="full-size">
    <div class="lbltitle"><apex:outputlabel value="Total Payment Amount" style="padding-top:0;font-weight:bold" /></div>
    <div class="lbldesc"><span>&#36;</span><apex:outputtext value="{!totalPaymentAmount}" /></div>
</div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!Honda}">
        <div class="pL10 pR10">For questions,&nbsp;<a href="{!$Label.HondaCSEP}" target="_blank" styleclass="clkhere"  >contact Customer Service</a> </div>
    </apex:outputpanel>
<apex:outputpanel rendered="{!Not(Honda)}">
    <div class="pL10 pR10">For questions,&nbsp;<a href="{!$Label.AcuraCSEP}" target="_blank" styleclass="clkhere"  >contact Customer Service</a></div>
</apex:outputpanel>
 
</div>
<apex:outputpanel rendered="{!scheduledEasypayAmt  == 0 || scheduledEasypayAmt  == null}">
<div class="secondary-title">
    Pay Automatically with EasyPay!
</div>
<p class="round-box">
    By signing up for EasyPay, your monthly payment will automatically transfer from your checking or savings account each month.
</p>
<apex:outputpanel rendered="{!scheduledEasypayAmt == 0 || scheduledEasypayAmt == null}">
    <script>
        console.log('<<<MakeAPaymentCompletePageLoad>>>');
       // _satellite.track('MakeAPaymentCompletePageLoad');
    </script>    
<div class="full-size btn-action ta-right">
    <apex:commandbutton value="Go to Pending Payments" onclick="{window.location='/apex/Pendingpayment?finnumber={!finIDVF}&isReadOnly={!isReadOnlyParam}'; return false;}" styleclass="regular-btn btn-1 mR10" oncomplete="shuffletop();" />
    <apex:commandbutton value="Set Up EasyPay" onclick="{window.location='/apex/MakeAPaymentLandingPage?finnumber={!finIDVF}&isReadOnly={!isReadOnlyParam}&type=2'; return false;}" styleclass="primary-btn btn-1" oncomplete="shuffletop();" />
 
</div>
</apex:outputpanel>    
</apex:outputpanel>
<apex:outputpanel rendered="{!scheduledEasypayAmt != null && scheduledEasypayAmt != 0}">
<div class="full-size btn-action ta-right">
    <apex:commandbutton value="Go to Pending Payments" onclick="{window.location='/apex/Pendingpayment?finnumber={!finIDVF}&isReadOnly={!isReadOnlyParam}'; return false;}" styleclass="primary-btn btn-1" oncomplete="shuffletop();" />
</div>
</apex:outputpanel>
</div>
</apex:outputpanel>
 
 
<!---------------------------------------------End of Summary Mode OTP -------------------- -->
 
</apex:outputpanel>
 
<!-- Popup -->
<apex:outputpanel id="popup3" style="display:block; top:13%; margin:0 auto; position:absolute; right:0; left:0;border:0; outline:none; border-radius:4px; cursor:pointer;" layout="block" rendered="{!displaypopupotp == true}">
<div class="window-size-two" id="delete-pop">
    <h3>Go to Account Overview?</h3>
    <div class="pop-up-details">
        <p class="window-msg">
            You will now be directed to your Account Overview page. All of the information that you have entered will be lost. Are you sure you want to proceed?
        </p>
 
 
        <div class="pop-btn-section">
            <label><apex:commandbutton styleclass="regular-btn btn-3 js-modal-close close" action="{!hidepopupOTP}" value="No" rerender="opOTPMain" id="clickmeotpno1" oncomplete="setCalender();removeovelayPop('{!$Component.clickmeotpno1}');" /></label>
            <label><apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="{window.top.location={!$Label.AccountOverviewURL}; return false;}" rendered="{!honda}"/>
                <apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="{window.top.location={!$Label.Accura_Account_Overview_URL}; return false;}" rendered="{!!honda}"/>
            </label>
        </div>
 
    </div>
</div>
</apex:outputpanel>
<!-- End of Popup1 -->
 
</apex:outputpanel>
</div>
<!------------------------End of OTP ------------------------------------------------------------ -->
 
 
 
 
 
<!-------------------- Start of Recurring Payment ---------------------------------------------- -->
<h1><apex:commandlink action="{!fetchdataRP}"  value="EasyPay Automatic Payments" rerender="opEasyPayMain" status="rpStatus" style="accordionlink" styleClass="accordionlink EPadope" oncomplete="setCalender(); fndisablechk(); disablePayoffopt();" /></h1>
 
<div id="easypay_auto_payment">
    <div class="waitingSearchDiv overlay-loader" id="recurringLoading" style="display:none;"> 
        <div class="waitingHolder">
            <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/loading.gif')}" title="Please Wait" width="32" height="32" />
        </div>
    </div>
     <!-- Start: Time out redirection functionality was added by Omkar for the Defect #114048--> 
    <div class="waitingSearchDiv overlay-loader" id="recurringLoadingmsg" style="display:none;"> 
        <div class="waitingHolder">
            <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/loading.gif')}" title="Please Wait" width="32" height="32" />
             <br/><div style="margin-left:-150px; width:500px;">
                    <span class="waitingDescription"> <b>Processing your request. Do not refresh this page.</b></span> 
                </div>
        </div>
    </div>
    <!-- End -->
  
    <apex:outputpanel id="opEasyPayMain">
 
    <apex:inputhidden id="RPtype" value="{!typecheck}" />
    <apex:actionfunction name="existRPactionfunction" action="{!editexistRP}" rerender="opEasyPayMain" status="rpStatus"/>
     <apex:actionfunction name="chargeDateactionfunction" action="{!checkDatevalue}" rerender="easypayid" oncomplete="setCalender(); fndisablechk(); disablePayoffopt();" status="rpStatus">
        <apex:param name="myParam" value=""/>
     </apex:actionfunction>
    <!--- Jayashree added this for defect #113982 ---->
    <apex:actionfunction name="CtRPBtn" action="{!reviewDetailsRP}" status="rpStatus" rerender="easypayid" oncomplete="disablePayoffopt(); shuffletop();"/>
    <apex:actionfunction name="EditRPBtn" rerender="easypayid" action="{!editRP}" status="rpStatus" oncomplete="disablePayoffopt(); shuffletop();"/>
    <!-- Start: Spinner wheel message was added by Omkar for the Defect #114048--> 
    <apex:actionfunction name="SubRPBtn" action="{!submitRP}" rerender="easypayid,AccountOverviewSectionSubmitPage,AccountOverviewSection" status="rpStatusmsg" oncomplete="disablePayoffopt(); shuffletop();"/>
    <!-- End -->
    
    <!--Eligibility check for Easy Payment-->
    <apex:outputpanel rendered="{!eligibleFlagRP != true}">
    
    <!--- Changes added to the links by Jayashree for 114165 --->
    <apex:outputpanel rendered="{!Honda}">
    <div class="secondary-title">Please Contact Us</div>
    <div class="pL10 pR10">Your finance account is currently ineligible for EasyPay enrollment. Please&nbsp;<a href="{!$Label.HondaCSEP}" styleclass="clkhere" target="_blank"  >click here</a>&nbsp;to contact a customer service representative for assistance.</div>
</apex:outputpanel>
<apex:outputpanel rendered="{!Not(Honda)}">
<div class="secondary-title">Please Contact Us</div>
<div class="pL10 pR10">Your finance account is currently ineligible for EasyPay enrollment. Please&nbsp;<a href="{!$Label.AcuraCSEP}" styleclass="clkhere" target="_blank"  >click here</a>&nbsp;to contact a customer service representative for assistance.</div>
</apex:outputpanel>
<!--- End of defect 114165 --->
</apex:outputpanel>
<!--Past Due will not be allowed for Easy Pay-->
<apex:outputpanel rendered="{!eligibleFlagRP == true && pastDueStatus == true && displaymodeRP != false}">
    
<div class="secondary-title summary-title">Please Make a Payment</div>
<div class="pL10 pR10">
    Your account is past due. You must first make a payment of ${!finAccount.Past_Amount_Due__c} and then return to the EasyPay page to proceed with enrollment.
</div>
</apex:outputpanel>
<!--Suspended and other criteria -->
<apex:outputpanel rendered="{!eligibleFlagRP == true && suspendedStatus == true && pastDueStatus == false}">
<div class="padding10">
    <p>
    <!--- Changes added to the links by Jayashree for 114165 --->
        <apex:outputpanel rendered="{!Honda}">
        Your EasyPay schedule is suspended. Please&nbsp;<a href="{!$Label.HondaCSEP}" target="_blank" styleclass="clkhere"  >click here</a>&nbsp;to contact a customer service representative for assistance.
    </apex:outputpanel>
    <apex:outputpanel rendered="{!Not(Honda)}">
    Your EasyPay schedule is suspended. Please&nbsp;<a href="{!$Label.AcuraCSEP}" target="_blank" styleclass="clkhere"    >click here</a>&nbsp;to contact a customer service representative for assistance.
</apex:outputpanel>
<!--- End of defect 114165 --->
</p>
<div class="round-box">
    <p>Status: <strong>{!cOrderListRP[0].Payment_Display_Status__c}</strong></p>
    <p>Bank Account Nickname: <strong>{!cOrderListRP[0].Payment_Source_Nickname__r.Payment_Source_Nickname__c}</strong></p>
    <p>Payment Amount: <strong><span>&#36;</span>{!cOrderListRP[0].ChargentOrders__Charge_Amount__c}</strong></p>
 
    <div class="right-icon">
       <!-- <p class="mR10">
            <a href="#">
                <apex:image width="24px" height="23px" alt="edit icon" url="{!URLFOR($Resource.PendingPayment, 'PendingPayment/images/GrayPencil.png')}" onclick="{window.location='/apex/MakeAPaymentLandingPage?id={!cOrderListRP[0].Id}'; return false;}" />
 
                <span>Edit</span>
            </a>
        </p> -->
        <p>
            <a href="#">
                <!--Changes made on fix of Defect no.113234-->
                <apex:image width="24px" height="23px" alt="edit icon" url="{!URLFOR($Resource.PendingPayment, 'PendingPayment/images/GrayX.png')}"  />
                <span>Cancel</span>
            </a>
        </p>
    </div>
</div>
</div>
</apex:outputpanel>
 
<!--if already enrolled in EasyPay-->
<apex:outputpanel id="existRPID" rendered="{!displaymodeRP == false && suspendedStatus == false && RecurringID == null  && eligibleFlagRP == true}">
            <script>var cancelRP = "{!allowCancel}";</script>
<div class="padding10">
    <p>
    <!-- Changes added for the defect 113948 by Jayashree ----><!-- RSS 41455 -  modified the message-->
        You are enrolled in EasyPay. EasyPay payments scheduled for Sunday will process on Monday and be credited to your account as of the payment date. Cancellations completed by {!cutOffTime} {!$Setup.Honda_Finance__c.Time_Zone__c} on the payment date will be effective immediately starting with the current scheduled payment.
    </p>
    <div class="round-box mTB10">
        <p>
            Next Withdrawal Date: <strong>
            <apex:outputtext value="{0, date, MM/dd/yyyy}">
            <apex:param value="{!cOrders[0].Next_Withdrawal_Date__c}" />
        </apex:outputtext>
   </strong>
</p>
<!--Defect:114271 -- Adding last4 Digits of Bank Account Number -->
<p>Bank Account Nickname: <strong>{!cOrders[0].Payment_Source_Nickname__r.Payment_Source_Nickname__c}(XXXX-{!cOrders[0].Payment_Source_Nickname__r.last_4__c})</strong></p>
<p>Payment Amount: <strong><span>&#36;</span>{!cOrders[0].ChargentOrders__Charge_Amount__c}</strong></p>
<div class="right-icon">
   <!-- <p class="mR10">
        <a href="#">
            <apex:image width="24px" height="23px" alt="edit icon" url="{!URLFOR($Resource.PendingPayment, 'PendingPayment/images/edit-icon.png')}" onclick="existRP();" />
            <span>Edit</span>
        </a>
    </p> -->
    <p>
        <a href="#">
            <apex:image width="24px" height="23px" alt="edit icon" url="{!URLFOR($Resource.PendingPayment, 'PendingPayment/images/close-icon.png')}" id="cancelrp2" styleclass="getOverlay">
            <span>Cancel</span>
            <apex:actionSupport id="isEPCancelledAfterCutoff" event="onclick" action="{!isEPCancelledAfterCutoff}" oncomplete="existdelRP('{!$Component.cancelrp2}');" reRender="existRPID">
                          <apex:param name="Pending" value="Pending" assignTo="{!epDisplayStatus}" />
                          <apex:param name="{!TEXT(cOrders[0].Next_Withdrawal_Date__c)}" value="{!TEXT(cOrders[0].Next_Withdrawal_Date__c)}" assignTo="{!NWDStr}" />
                        </apex:actionSupport>
            </apex:image>
        </a>
    </p>
</div>
</div>
</div>
 
<!-- Popup1 -->
<apex:outputpanel id="popupdeleteR" style="display:none; top:13%; margin:0 auto; position:absolute; right:0; left:0;border:0; outline:none; border-radius:4px; cursor:pointer;" layout="block">
<div class="window-size-two" id="delete-pop-easypay1">
    <h3>Cancel EasyPay?</h3>
    <div class="pop-up-details">
        <p class="window-msg">Are you sure you want to cancel EasyPay?</p>
        <ul>
            <li>
                <label>Next Withdrawal Date</label>
                <span class="mL8">
                    <apex:outputtext value="{0, date, MM/dd/yyyy}">
                    <apex:param value="{!cOrders[0].Next_Withdrawal_Date__c}" />
                </apex:outputtext>
            </span>
        </li>
        <li>
            <label>Bank Account Nickname</label>
            <span class="mL8">
            <!--Defect:114271 -- Adding last4 Digits of Bank Account Number -->
                <apex:outputtext value="{!cOrders[0].Payment_Source_Nickname__r.Payment_Source_Nickname__c}(XXXX-{!cOrders[0].Payment_Source_Nickname__r.last_4__c})" />
            </span>
        </li>
        <li>
            <label>Payment Amount </label>
            <span>
                &#36;<apex:outputtext value="{!cOrders[0].ChargentOrders__Charge_Amount__c}" />
            </span>
        </li>
    </ul>
    <div class="pop-btn-section">
        <label><apex:commandbutton styleclass="regular-btn btn-3" value="No" oncomplete="removeovelayPop('{!$Component.clickmepfno2}');" id="clickmerpno3" action="{!hidedeleteRP}" rerender="opEasyPayMain" status="rpStatus" /></label>
        <label><apex:commandbutton styleclass="primary-btn btn-3" value="Yes, Cancel" oncomplete="removeovelayPop('{!$Component.clickmepfno2}');" rendered="{!isReadOnlyParam == 'false'}" id="clickmerpno4" action="{!deleteRP}" rerender="opEasyPayMain" status="rpStatus"/>
        <apex:commandbutton value="Yes, Cancel" rendered="{!isReadOnlyParam == 'true'}" styleclass="disabledbtn" disabled="true" rerender="opEasyPayMain"/>
        </label>
        
    </div>
</div>
</div>
</apex:outputpanel>
<!-- End of Popup1 -->
 
<!-- Popup4 -->
<apex:outputpanel id="popup4" style="display:none; top:13%; margin:0 auto; position:absolute; right:0; left:0;border:0; outline:none; border-radius:4px; cursor:pointer;" layout="block">
<div class="window-size-two" id="delete-pop-easypay1">
    <h3>EasyPay payment is processing</h3>
    <div class="pop-up-details">
        <p class="window-msg">EasyPay cannot be cancelled at this time because your currently scheduled payment is being processed. Please try again later.</p>
        <ul>
            <li>
                <label>Next Withdrawal Date</label>
                <span class="mL8">
                    <apex:outputtext value="{0, date, MM/dd/yyyy}">
                    <apex:param value="{!cOrders[0].Next_Withdrawal_Date__c}" />
                </apex:outputtext>
            </span>
        </li>
        <li>
            <label>Bank Account Nickname</label>
            <span class="mL8">
            <!--Defect:114271 -- Adding last4 Digits of Bank Account Number -->
                <apex:outputtext value="{!cOrders[0].Payment_Source_Nickname__r.Payment_Source_Nickname__c}(XXXX-{!cOrders[0].Payment_Source_Nickname__r.last_4__c})" />
            </span>
        </li>
        <li>
            <label>Payment Amount </label>
            <span>
                &#36;<apex:outputtext value="{!cOrders[0].ChargentOrders__Charge_Amount__c}" />
            </span>
        </li>
    </ul>
   <div class="pop-btn-section" style="margin-left:15%"> 
        <label><apex:commandbutton styleclass="primary-btn btn-3" value="OK" oncomplete="removeovelayPop('{!$Component.clickmepfno2}');" id="clickmerpno5" rerender="opEasyPayMain" status="rpStatus" /></label>
        
    </div> 
</div>
</div>
</apex:outputpanel>
<!-- End of Popup4 -->
 
</apex:outputpanel>
 
<apex:outputpanel >
<div class="pL10 pR10">
    <apex:pagemessage severity="info" strength="2" summary="Please make a one time payment to complete the transaction." title="IMPORTANT NOTE :" rendered="{!OTPFlag == true}"></apex:pagemessage>
</div>
</apex:outputpanel>
 
<apex:outputpanel id="easypayid" style="display:block" rendered="{!eligibleFlagRP == true && pastDueStatus == false && suspendedStatus == false && displayModeRP == true && OTPFlag ==false}">
 
<apex:outputpanel id="page2" rendered="{!editMode == true && reviewMode == false}">
<div class="step-pro-breadcrumb">
    <div class="process-level">
        <div class="step-one pull-left">
            <div class="step-name">Set Up</div>
            <div class="step-count">1</div>
        </div>
        <div class="process-control process-none">
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
        </div>
 
    </div>
    <div class="process-level">
        <div class="step-one pull-left step-disable">
            <div class="step-name">Review</div>
            <div class="step-count">2</div>
        </div>
        <div class="process-control process-none">
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
        </div>
    </div>
    <div class="step-one pull-left step-disable last">
        <div class="step-name">Completed</div>
        <div class="step-count">3</div>
    </div>
</div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!editMode == true && reviewMode == false}">
 
<div class="secondary-title">Provide Your Automatic Payment Information</div>
<div class="padding10">
    Once you set up EasyPay, the payment amount you enter will be processed on the same day of every month that you select below.
</div>
 
 
<div class="round-box review-detail pending-clr">
 
    <apex:outputpanel >
    <div class="full-size">
        <div class="lbltitle strong"><apex:outputlabel value="Regular Monthly Payment" /></div>
        <div class="lbldesc strong"><span>&#36;</span><apex:outputtext value="{!finAccount.Regular_Monthly_Payment__c}" /></div>
    </div>
</apex:outputpanel>
 
<apex:outputpanel >
<div class="full-size">
    <div class="lbltitle"><apex:outputlabel value="Next Payment Due Date" /></div>
    <div class="lbldesc">
        <apex:outputtext value="{0, date, MM/dd/yyyy}">
        <apex:param value="{!finAccount.Next_Due_Date__c}" />
    </apex:outputtext>
</div>
</div>
</apex:outputpanel>
 
<div class="hr clear"></div>
<!--<div class="pTB10">In months without 31 days, your payment will be drafted on the last day of the month.</div>-->
<!--- below Changes added to the defect 114086 by Jayashree -->
<!-- Aded as part of RSS 41389-->
<apex:outputPanel styleClass="EasyPayMsg">
<apex:pagemessages id="PMEasypay" escape="false"></apex:pagemessages>
</apex:outputPanel>
<!-- End of Rss 41389-->
<!--- End of defect 114086 ---->
<div class="otp-info">
    <span class="error-model">* Required Field</span>
  <!--  <form id="form2" method="post" class="ta-center"> -->
  <div class="clear"></div>
 
        <apex:outputpanel id="RPamt" rendered="{!(finaccount.Account_Type__c == 'Retail' || (finaccount.Account_Type__c == 'Balloon' && finaccount.Fl_Refinanced__c == true))}">
        <div class="form-field">
            <label for="bank-name">* Automatic Payment Amount</label>
            <apex:actionfunction name="checkPayment" action="{!checkPaymentRP}" rerender="RPamt,PMEasypay" status="rpStatus">
            <apex:param id="param" name="paymentValue" value="" />
        </apex:actionfunction>
 
        <div class="form-fill doller-ctr"><span class="doller-fld"> &#36;</span><apex:inputtext value="{!RPAmount}" id="RPAmount" onblur="callCheckPayment();" styleclass="medium-input" style="{!IF(errorColor = 'Red','border:1px solid #FF6600',If(errorColor = 'Green','border:1px solid #00CC33','border:1px solid #FFF'))}" /></div>
    </div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!(finaccount.Account_Type__c == 'Lease' || (finaccount.Account_Type__c == 'Balloon' && finaccount.Fl_Refinanced__c ==false))}">
<div class="full-size">
    <div class="lbltitle"><label for="bank-name">* Automatic Payment Amount</label></div>
    <div class="lbldesc"> <span> &#36;</span><apex:outputtext value="{!RPAmount}" /></div>
 
</div>
</apex:outputpanel>
<script>
    function sampleSelect(sel){
        var selectedDate = sel.value;
      //  console.log('selectedDate is ' + selectedDate);
        chargeDateactionfunction(selectedDate);
    }
</script>
 
<!--Updated code for Rss 44870-->
<apex:outputpanel id="WD">
<div class="form-field">
    <label for="Withdraw-Payment-On">
                * Withdraw Payment On
    <a href="javascript:;" class="tooltip">
    <b>?</b>
    <span class="tooltip-box">Selecting a Withdraw Payment On date other than your due date will not change your due date.</span>
    </a>
    </label>
    <div class="form-fill">
        <!--[if !IE]> -->
        <div class="select-box-cover">
            <!-- <![endif]-->
            <span class="fancyArrow"></span>
            <!--changes has made for defect# 112553-->
            <apex:selectlist styleclass="medium-input inprmg" style="{!IF(errorColorWD = 'Red','border:1px solid #FF6600',If(errorColorWD = 'Green','border:1px solid #00CC33','border:1px solid #FFF'))}" id="ChargeDateid" value="{!chargeDate}" size="1" multiselect="false" title="Withdrawal Payment On" onchange="sampleSelect(this)">
            <!--changes has made for defect# 112553-->
            <apex:selectoptions value="{!ChargeDateList}"></apex:selectoptions>
                                                                                        
        </apex:selectlist>
        <!--[if !IE]> -->
    </div>
    <!-- <![endif]-->
</div>
</div>  <!--End of Rss44870 code-->
</apex:outputpanel>
<apex:outputpanel id="NxtwithdrawDateNew" rendered="{!RPID == null}">
<div class="full-size">
    <div class="lbltitle">
        <apex:outputlabel value="Next Withdrawal Date" />
    </div>
    <div class="lbldesc">
        <apex:outputtext value="{0, date, MM/dd/yyyy}">
        <apex:param value="{!ChargentOrders__ChargentOrder__c.Next_Withdrawal_Date__c}" />
    </apex:outputtext>
</div>
</div>
</apex:outputpanel>
 
<apex:outputpanel id="NxtwithdrawDateEdit" rendered="{!RPID != null}">
<div class="full-size mTB10">
    <div class="lbltitle">
        <apex:outputlabel value="Next Withdrawal Date
        " />
    </div>
    <div class="lbldesc">
        <apex:outputtext value="{0, date, MM/dd/yyyy}">
        <apex:param value="{!NextTransactionDate}" />
    </apex:outputtext>
</div>
</div>
</apex:outputpanel>
 
<apex:outputpanel >
<div class="form-field">
    <apex:outputlabel value="* Bank Account Nickname" />
    <div class="form-fill">
        <!--[if !IE]> -->
        <div class="select-box-cover">
            <!-- <![endif]-->
            <span class="fancyArrow"></span>
            <apex:selectlist styleclass="medium-input inprmg" id="BanknameRP" value="{!bankAccntName}" size="1" title="Bank Account Nickname" style="{!IF(errorColorBA = 'Red','border:1px solid #FF6600',If(errorColorBA = 'Green','border:1px solid #00CC33','border:1px solid #FFF'))}">
            <apex:actionsupport event="onchange" action="{!checkdataNew}" rerender="accountoverview" oncomplete="reenterDisable();">
            <apex:param name="transactionType" value="easypay" />
        </apex:actionsupport>
        <apex:selectoptions value="{!bankValuesRP}"></apex:selectoptions>
    </apex:selectlist>
    <!--[if !IE]> -->
</div>
<!-- <![endif]-->
</div>
</div>
 
</apex:outputpanel>
<div class="hr clear"></div>
<!--</form> -->
</div>
<apex:outputpanel rendered="{!RPID != null}">
<div class="pTB10">
    Your payment is being submitted in accordance with the <a href="/apex/PDFTermsandCondEasyPay?isHonda={!honda}" target="_blank" >Terms &amp; Conditions</a> for EasyPay Automatic Payments.
</div>
</apex:outputpanel>
</div>
 
<apex:outputpanel rendered="{!RPID == null}">
<div class="term-condition">
   <div class="pull-right pT10">
        <div class="printer-version">
            <a href="/apex/PDFTermsandCondEasyPay?isHonda={!honda}" target="_blank" >
                <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/printer.png')}" width="20" height="20" />
                <span>Printer Friendly Version</span>
            </a>
        </div>
    </div>
    <div class="clear"></div>
    <div class="secondary-title padding10 pull-left">
        Terms &amp; Conditions
    </div>
 
    <div class="clear padding10">
        To continue, read the following, <span class="red-bold">scroll to the bottom</span> and agree to the Terms &amp; Conditions.
    </div>
 
 
    <div class="textarea-text terms-condition" onscroll="fnscroll();" id="TermsConditiontxtarea">
        <apex:outputpanel rendered="{!Honda}">
        <div class="print-pdf-section">
           <h2 style="text-decoration: underline;">EasyPay Terms &amp; Conditions</h2>
           <p>To continue the EasyPaySM enrollment process, please read the following terms &amp; conditions:</p>
 
           <p class="tc-head" style="text-decoration: underline;">Consent To Do Business Electronically</p>
           
           <p class="tc-content">You have a right to receive a copy of your preauthorized electronic funds transfer authorization and consent to receive such copy electronically. Your consent is limited to receiving a copy of your authorization and information relating to EasyPay.</p>
 
           <p class="tc-content">You can withdraw your consent at any time during this enrollment process before you click the Enrollment Confirmation's "Submit" button by clicking on your browser's "Back" button or clicking on the "Cancel" button. However, your enrollment may be completed online only if you agree to accept the copy of your authorization in electronic form. Otherwise, you may complete the enrollment form on the back of your statement and mail it with your next payment.</p>
           <p class="tc-content">If you accept an electronic copy of your authorization, you may later obtain a paper copy by contacting your Honda Financial Services (HFS) region below. In addition, you can cancel or update your information at any time by clicking on the Manage EasyPay  button on your Account Overview home page.</p>
 
           <p class="tc-content">In order to transmit, receive, and retain your authorization and other information related to your EasyPay enrollment, you should have and continue to have: Windows 95/98/NT/2000 or Macintosh OS 8.5 or higher and an Internet browser (Microsoft Internet Explorer 4.0 or higher, Netscape Navigator 4.08 or higher, or AOL 4.0 or higher). To print or download disclosures you should have a printer connected to your PC or sufficient hard-drive space for saving the disclosure.</p>
           <p class="tc-content">By checking the I Agree  box below, you agree that you have the ability to transmit, receive, and retain disclosures in electronic form and that you consent to receive such disclosures electronically.</p>
           
        <p class="tc-head" style="text-decoration: underline;">Consent To Automatic Payments</p>
        
        <p class="tc-content">You authorize Honda Financial Services (HFS) to withdraw funds by electronic transfer from the financial institution and account named for regularly scheduled payments ("EasyPay") due under the terms of the Retail Installment Contract/Motor Vehicle Lease Agreement between HFS and the owner/lessee named in the contract/agreement. You understand that the regularly scheduled payment, or the amount that you designate, will be automatically withdrawn even if additional payments are submitted during the same calendar month.  Your EasyPay monthly payment will be transferred from your checking or savings account within two business days of the day of the month you select. Should the payment due date fall on a Sunday or holiday, the payment will be processed within the next two business days. If your selected payment date falls on the 29th, 30th, or 31st, for months with a shorter number of days, we will process the payment  from your checking or savings account on the last day of the month (or within two business days if the last day of the month is a Sunday or holiday).</p>
        <p class="tc-content">You will continue to receive a monthly statement detailing the date and amount of the automatic payment and any other amounts owing, if applicable. The date and amount of the automatic payment on your statement is your proof of payment.</p>
        <p class="tc-content">You understand that HFS will discontinue EasyPay if it learns that you have filed a petition for bankruptcy,if we confirm your request to voluntarily surrender the vehicle/collateral subject to the Retail Installment Contract/Motor Vehicle Lease Agreement, or if the vehicle/collateral is subject to repossession.</p>
        
        <p class="tc-content">This authorization will remain in effect until you cancel the EasyPay schedule online; or we receive written notice from you; or until your account has been paid in full.   HFS may discontinue EasyPay at any time for any reason without prior notice. You may elect to cancel your authorization at any time online by accessing the EasyPay "Cancellation" option at www.hondafinancialservices.com/MyAccount, or contacting your HFS region or in your monthly statement. The cancellation will stop your next regularly scheduled payment as long as it is made five business days in advance of that scheduled payment, as we need time to process your cancellation. In addition, you may stop payment by notifying your financial institution verbally or in writing at any time up to 2 business days before the regularly scheduled payment date.</p>
        <p class="tc-content">These methods of cancellation (and other methods of cancellation we may make available from time to time) are the only ways that you can cancel this authorization.</p>
        
        <p class="tc-content">Please notify us of any checking or savings account or address changes as soon as possible to ensure timely payments.  Checking or savings account changes made via the web portal will be processed within that same day, but payments already scheduled to be made the same day of the change will still be processed.  Checking or savings account changes requested via other written mediums will require a 10 day processing period after receipt of the request.  You may change your personal bank account from which your monthly funds are deducted by accessing the Manage EasyPay option and selecting the "Edit icon  at www.hondafinancialservices.com/MyAccount, or contacting your HFS region at the return address below or in your monthly statement.</p>
        <p class="tc-content">You acknowledge that EasyPay does not automatically withdraw funds to pay charges in excess of your regularly scheduled payments. Such incidental charges may include property taxes, registration fees, parking tickets, etc. and must be paid separately.
        </p>
        <p class="tc-content">If your transfer is rejected due to insufficient funds, HFS may charge you a fee and your bank may also charge you a fee.  If your transfer is rejected due to insufficient funds on three occasions within a 12 month period, we will cancel your EasyPay enrollment and will no longer attempt to debit funds from your account.</p>
        
        <p class="tc-content">You agree that the payments authorized by you must comply with the terms of U.S. law.</p>
        <p class="tc-content">After you have accepted the terms and conditions and completed your EasyPay setup, we will confirm the date on which your first EasyPay payment will be processed.  Please follow the instructions regarding any payments due before your first EasyPay payment will be processed.</p>
        <!--- Below link change added to the defect 114165 by Jayashree -->
        <p class="tc-content">For information about how to contact Honda Financial Services <a href="{!$Label.HondaCSEP}" target="_blank" styleclass="clkhere"  >click here</a>.</p>
    </div>
 
</apex:outputpanel>    
<apex:outputpanel rendered="{!Not(Honda)}">    
<!-- Acura Terms condition -->
<div class="print-pdf-section">
   <h2 style="text-decoration: underline;">EasyPay Terms &amp; Conditions</h2>
   <p>To continue the EasyPaySM enrollment process, please read the following terms &amp; conditions:</p>
 
   <p class="tc-head" style="text-decoration: underline;">Consent To Do Business Electronically</p>
   <p class="tc-content">You have a right to receive a copy of your preauthorized electronic funds transfer authorization and consent to receive such copy electronically. Your consent is limited to receiving a copy of your authorization and information relating to EasyPay.</p>
 
   <p class="tc-content">You can withdraw your consent at any time during this enrollment process before you click the Enrollment Confirmation's "Submit" button by clicking on your browser's "Back" button or clicking on the "Cancel" button. However, your enrollment may be completed online only if you agree to accept the copy of your authorization in electronic form. Otherwise, you may complete the enrollment form on the back of your statement and mail it with your next payment.</p>
   <p class="tc-content">If you accept an electronic copy of your authorization, you may later obtain a paper copy by contacting your Acura  Financial Services (AFS) region below. In addition, you can cancel or update your information at any time by clicking on the Manage EasyPay  button on your Account Overview home page.</p>
 
   <p class="tc-content">In order to transmit, receive, and retain your authorization and other information related to your EasyPay enrollment, you should have and continue to have: Windows 95/98/NT/2000 or Macintosh OS 8.5 or higher and an Internet browser (Microsoft Internet Explorer 4.0 or higher, Netscape Navigator 4.08 or higher, or AOL 4.0 or higher). To print or download disclosures you should have a printer connected to your PC or sufficient hard-drive space for saving the disclosure.</p>
   <p class="tc-content">
    By checking the I Agree  box below, you agree that you have the ability to transmit, receive, and retain disclosures in electronic form and that you consent to receive such disclosures electronically.
</p>
<p class="tc-head" style="text-decoration: underline;">Consent To Automatic Payments</p>
<p class="tc-content">You authorize Acura Financial Services (AFS) to withdraw funds by electronic transfer from the financial institution and account named for regularly scheduled payments ("EasyPay") due under the terms of the Retail Installment Contract/Motor Vehicle Lease Agreement between AFS and the owner/lessee named in the contract/agreement. You understand that the regularly scheduled payment, or the amount that you designate, will be automatically withdrawn even if additional payments are submitted during the same calendar month.  Your EasyPay monthly payment will be transferred from your checking or savings account within two business days of the day of the month you select. Should the payment due date fall on a Sunday or holiday, the payment will be processed within the next two business days. If your selected payment date falls on the 29th, 30th, or 31st, for months with a shorter number of days, we will process the payment  from your checking or savings account on the last day of the month (or within two business days if the last day of the month is a Sunday or holiday).</p>
<p class="tc-content">You will continue to receive a monthly statement detailing the date and amount of the automatic payment and any other amounts owing, if applicable. The date and amount of the automatic payment on your statement is your proof of payment.</p>
<p class="tc-content">You understand that AFS will discontinue EasyPay if it learns that you have filed a petition for bankruptcy,if we confirm your request to voluntarily surrender the vehicle/collateral subject to the Retail Installment Contract/Motor Vehicle Lease Agreement, or if the vehicle/collateral is subject to repossession.</p>
<p class="tc-content">This authorization will remain in effect until you cancel the EasyPay schedule online; or we receive written notice from you; or until your account has been paid in full.   AFS may discontinue EasyPay at any time for any reason without prior notice. You may elect to cancel your authorization at any time online by accessing the EasyPay "Cancellation" option at www.acurafinancialservices.com/MyAccount, or contacting your AFS region or in your monthly statement. The cancellation will stop your next regularly scheduled payment as long as it is made five business days in advance of that scheduled payment, as we need time to process your cancellation. In addition, you may stop payment by notifying your financial institution verbally or in writing at any time up to 2 business days before the regularly scheduled payment date.</p>
<p class="tc-content">These methods of cancellation (and other methods of cancellation we may make available from time to time) are the only ways that you can cancel this authorization.</p>
<p class="tc-content">Please notify us of any checking or savings account or address changes as soon as possible to ensure timely payments.  Checking or savings account changes made via the web portal will be processed within that same day, but payments already scheduled to be made the same day of the change will still be processed.  Checking or savings account changes requested via other written mediums will require a 10 day processing period after receipt of the request.  You may change your personal bank account from which your monthly funds are deducted by accessing the Manage EasyPay option and selecting the "Edit icon  at www.acurafinancialservices.com/MyAccount, or contacting your AFS region at the return address below or in your monthly statement.</p>
<p class="tc-content">
    You acknowledge that EasyPay does not automatically withdraw funds to pay charges in excess of your regularly scheduled payments. Such incidental charges may include property taxes, registration fees, parking tickets, etc. and must be paid separately.
</p>
<p class="tc-content">If your transfer is rejected due to insufficient funds, AFS may charge you a fee and your bank may also charge you a fee.  If your transfer is rejected due to insufficient funds on three occasions within a 12 month period, we will cancel your EasyPay enrollment and will no longer attempt to debit funds from your account.</p>
 
<p class="tc-content">You agree that the payments authorized by you must comply with the terms of U.S. law.</p>
<p class="tc-content">After you have accepted the terms and conditions and completed your EasyPay setup, we will confirm the date on which your first EasyPay payment will be processed.  Please follow the instructions regarding any payments due before your first EasyPay payment will be processed.</p>
<!--- Below Link change added to the defect 114165 by Jayashree --->
<p class="tc-content">For information about how to contact Acura Financial Services <a href="{!$Label.AcuraCSEP}" target="_blank" styleclass="clkhere"  >click here</a>.</p>
</div>
</apex:outputpanel>
</div>
<div class="t-c-checkbox">
    <apex:inputfield id="check1" value="{!ChargentOrders__ChargentOrder__c.Terms_Condtions_Accepted__c }"  style="{!IF(errorcolorTC = 'Red','outline: 1px solid #F00;',If(errorcolorTC = 'Green','outline:1px solid #00CC33','outline:1px solid #FFF'))}"/>
    <apex:outputlabel for="check1" value="  I have read and agree to Terms & Conditions."></apex:outputlabel>
</div>
<apex:outputpanel rendered="{!RPID != null}"><div class="">Your payment is being submitted in accordance with Terms and Condition for EasyPay recurring payments.</div></apex:outputpanel>
 
 
</div>
</apex:outputpanel>
 
<!-- For Printer Friendly link only -->
<div class="pB10" id="PrintTermsCondition" style="display:none">
    <!-- Logo on pdf to print conditionally start -->
    <div class="print-header">
       <div class="logo" href="/apex/PDFTermsandCondEasyPay?isHonda={!honda}" target="_blank" >
            <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/honda-logo.png')}"  width="20" height="20"/>
        </div>
    </div>
    <!-- Logo on pdf to print conditionally End -->
    <apex:outputpanel rendered="{!Honda}">
    <!-- EasyPay tems and condition for Honda without logo Start -->
    <div class="print-content">
       <h2>EasyPay Terms &amp; Conditions</h2>
       <p>To continue the EasyPaySM enrollment process, please read the following terms &amp; conditions:</p>
 
       <p class="tc-head">Consent To Do Business Electronically</p>
       <p class="tc-content">You have a right to receive a copy of your preauthorized electronic funds transfer authorization and consent to receive such copy electronically. Your consent is limited to receiving a copy of your authorization and information relating to EasyPay.</p>
 
       <p class="tc-content">You can withdraw your consent at any time during this enrollment process before you click the Enrollment Confirmation's "Submit" button by clicking on your browser's "Back" button or clicking on the "Cancel" button. However, your enrollment may be completed online only if you agree to accept the copy of your authorization in electronic form. Otherwise, you may complete the enrollment form on the back of your statement and mail it with your next payment.</p>
       <p class="tc-content">If you accept an electronic copy of your authorization, you may later obtain a paper copy by contacting your Honda Financial Services (HFS) region below. In addition, you can cancel or update your information at any time by clicking on the Manage EasyPay  button on your Account Overview home page.</p>
 
       <p class="tc-content">In order to transmit, receive, and retain your authorization and other information related to your EasyPay enrollment, you should have and continue to have: Windows 95/98/NT/2000 or Macintosh OS 8.5 or higher and an Internet browser (Microsoft Internet Explorer 4.0 or higher, Netscape Navigator 4.08 or higher, or AOL 4.0 or higher). To print or download disclosures you should have a printer connected to your PC or sufficient hard-drive space for saving the disclosure.</p>
       <p class="tc-content">
        By checking the I Agree  box below, you agree that you have the ability to transmit, receive, and retain disclosures in electronic form and that you consent to receive such disclosures electronically.
    </p>
    <p class="tc-head">Consent To Automatic Payments</p>
    <p class="tc-content">You authorize Honda Financial Services (HFS) to withdraw funds by electronic transfer from the financial institution and account named for regularly scheduled payments ("EasyPay") due under the terms of the Retail Installment Contract/Motor Vehicle Lease Agreement between HFS and the owner/lessee named in the contract/agreement. You understand that the regularly scheduled payment, or the amount that you designate, will be automatically withdrawn even if additional payments are submitted during the same calendar month. Your EasyPay monthly payment will be transferred from your checking or savings account within two business days of the day of the month you select. Should the payment due date fall on a Sunday or holiday, the payment will be processed within the next two business days. If your selected payment date falls on the 29th, 30th, or 31st, for months with a shorter number of days, we will process the payment from your checking or savings account on the last day of the month (or within two business days if the last day of the month is a Sunday or holiday).</p>
    <p class="tc-content">You will continue to receive a monthly statement detailing the date and amount of the automatic payment and any other amounts owing, if applicable. The date and amount of the automatic payment on your statement is your proof of payment.</p>
    <p class="tc-content">You understand that HFS will discontinue EasyPay if it learns that you have filed a petition for bankruptcy,if we confirm your request to voluntarily surrender the vehicle/collateral subject to the Retail Installment Contract/Motor Vehicle Lease Agreement, or if the vehicle/collateral is subject to repossession.</p>
    <p class="tc-content">This authorization will remain in effect until you cancel the EasyPay schedule online; or we receive written notice from you; or until your account has been paid in full. HFS may discontinue EasyPay at any time for any reason without prior notice. You may elect to cancel your authorization at any time online by accessing the EasyPay "Cancellation" option at www.hondafinancialservices.com/MyAccount, or contacting your HFS region or in your monthly statement. The cancellation will stop your next regularly scheduled payment as long as it is made five business days in advance of that scheduled payment, as we need time to process your cancellation. In addition, you may stop payment by notifying your financial institution verbally or in writing at any time up to 2 business days before the regularly scheduled payment date.</p>
    <p class="tc-content">These methods of cancellation (and other methods of cancellation we may make available from time to time) are the only ways that you can cancel this authorization.</p>
    <p class="tc-content">Please notify us of any checking or savings account or address changes as soon as possible to ensure timely payments. Checking or savings account changes made via the web portal will be processed within that same day, but payments already scheduled to be made the same day of the change will still be processed. Checking or savings account changes requested via other written mediums will require a 10 day processing period after receipt of the request. You may change your personal bank account from which your monthly funds are deducted by accessing the Manage EasyPay option and selecting the "Edit icon  at www.hondafinancialservices.com/MyAccount, or contacting your HFS region at the return address below or in your monthly statement.</p>
    <p class="tc-content">
        You acknowledge that EasyPay does not automatically withdraw funds to pay charges in excess of your regularly scheduled payments. Such incidental charges may include property taxes, registration fees, parking tickets, etc. and must be paid separately.
    </p>
    <p class="tc-content">If your transfer is rejected due to insufficient funds, HFS may charge you a fee and your bank may also charge you a fee. If your transfer is rejected due to insufficient funds on three occasions within a 12 month period, we will cancel your EasyPay enrollment and will no longer attempt to debit funds from your account.</p>
    <p class="tc-content">You agree that the payments authorized by you must comply with the terms of U.S. law.</p>
    <p class="tc-content">After you have accepted the terms and conditions and completed your EasyPay setup, we will confirm the date on which your first EasyPay payment will be processed. Please follow the instructions regarding any payments due before your first EasyPay payment will be processed.</p>
    <p class="tc-content">For information about how to contact AMERICAN HONDA FINANCE CORPORATION <a href="#" onclick="{window.top.location={!$Label.HondaCustomerService}; return false;}">click here</a>.</p>
</div>
<!-- EasyPay tems and condition for Honda without logo End -->
</apex:outputpanel>
<apex:outputpanel rendered="{!Not(Honda)}">
<!-- EasyPay tems and condition for acura without logo start -->
<div class="print-content">
   <h2>EasyPay Terms &amp; Conditions</h2>
   <p>To continue the EasyPaySM enrollment process, please read the following terms &amp; conditions:</p>
 
   <p class="tc-head">Consent To Do Business Electronically</p>
   <p class="tc-content">You have a right to receive a copy of your preauthorized electronic funds transfer authorization and consent to receive such copy electronically. Your consent is limited to receiving a copy of your authorization and information relating to EasyPay.</p>
 
   <p class="tc-content">You can withdraw your consent at any time during this enrollment process before you click the Enrollment Confirmation's "Submit" button by clicking on your browser's "Back" button or clicking on the "Cancel" button. However, your enrollment may be completed online only if you agree to accept the copy of your authorization in electronic form. Otherwise, you may complete the enrollment form on the back of your statement and mail it with your next payment.</p>
   <p class="tc-content">If you accept an electronic copy of your authorization, you may later obtain a paper copy by contacting your Acura Financial Services (AFS) region below. In addition, you can cancel or update your information at any time by clicking on the Manage EasyPay  button on your Account Overview home page.</p>
 
   <p class="tc-content">In order to transmit, receive, and retain your authorization and other information related to your EasyPay enrollment, you should have and continue to have: Windows 95/98/NT/2000 or Macintosh OS 8.5 or higher and an Internet browser (Microsoft Internet Explorer 4.0 or higher, Netscape Navigator 4.08 or higher, or AOL 4.0 or higher). To print or download disclosures you should have a printer connected to your PC or sufficient hard-drive space for saving the disclosure.</p>
   <p class="tc-content">
    By checking the I Agree  box below, you agree that you have the ability to transmit, receive, and retain disclosures in electronic form and that you consent to receive such disclosures electronically.
</p>
<p class="tc-head">Consent To Automatic Payments</p>
<p class="tc-content">You authorize Acura Financial Services (AFS) to withdraw funds by electronic transfer from the financial institution and account named for regularly scheduled payments ("EasyPay") due under the terms of the Retail Installment Contract/Motor Vehicle Lease Agreement between AFS and the owner/lessee named in the contract/agreement. You understand that the regularly scheduled payment, or the amount that you designate, will be automatically withdrawn even if additional payments are submitted during the same calendar month. Your EasyPay monthly payment will be transferred from your checking or savings account within two business days of the day of the month you select. Should the payment due date fall on a Sunday or holiday, the payment will be processed within the next two business days. If your selected payment date falls on the 29th, 30th, or 31st, for months with a shorter number of days, we will process the payment from your checking or savings account on the last day of the month (or within two business days if the last day of the month is a Sunday or holiday).</p>
<p class="tc-content">You will continue to receive a monthly statement detailing the date and amount of the automatic payment and any other amounts owing, if applicable. The date and amount of the automatic payment on your statement is your proof of payment.</p>
<p class="tc-content">You understand that AFS will discontinue EasyPay if it learns that you have filed a petition for bankruptcy,if we confirm your request to voluntarily surrender the vehicle/collateral subject to the Retail Installment Contract/Motor Vehicle Lease Agreement, or if the vehicle/collateral is subject to repossession.</p>
<p class="tc-content">This authorization will remain in effect until you cancel the EasyPay schedule online; or we receive written notice from you; or until your account has been paid in full. AFS may discontinue EasyPay at any time for any reason without prior notice. You may elect to cancel your authorization at any time online by accessing the EasyPay "Cancellation" option at www.acurafinancialservices.com/MyAccount, or contacting your AFS region or in your monthly statement. The cancellation will stop your next regularly scheduled payment as long as it is made five business days in advance of that scheduled payment, as we need time to process your cancellation. In addition, you may stop payment by notifying your financial institution verbally or in writing at any time up to 2 business days before the regularly scheduled payment date.</p>
<p class="tc-content">These methods of cancellation (and other methods of cancellation we may make available from time to time) are the only ways that you can cancel this authorization.</p>
<p class="tc-content">Please notify us of any checking or savings account or address changes as soon as possible to ensure timely payments. Checking or savings account changes made via the web portal will be processed within that same day, but payments already scheduled to be made the same day of the change will still be processed. Checking or savings account changes requested via other written mediums will require a 10 day processing period after receipt of the request. You may change your personal bank account from which your monthly funds are deducted by accessing the Manage EasyPay option and selecting the "Edit icon  at www.acurafinancialservices.com/MyAccount, or contacting your AFS region at the return address below or in your monthly statement.</p>
<p class="tc-content">
    You acknowledge that EasyPay does not automatically withdraw funds to pay charges in excess of your regularly scheduled payments. Such incidental charges may include property taxes, registration fees, parking tickets, etc. and must be paid separately.
</p>
<p class="tc-content">If your transfer is rejected due to insufficient funds, AFS may charge you a fee and your bank may also charge you a fee. If your transfer is rejected due to insufficient funds on three occasions within a 12 month period, we will cancel your EasyPay enrollment and will no longer attempt to debit funds from your account.</p>
<p class="tc-content">You agree that the payments authorized by you must comply with the terms of U.S. law.</p>
<p class="tc-content">After you have accepted the terms and conditions and completed your EasyPay setup, we will confirm the date on which your first EasyPay payment will be processed. Please follow the instructions regarding any payments due before your first EasyPay payment will be processed.</p>
<p class="tc-content">For information about how to contact Acura Financial Services: <a href="#" onclick="{window.top.location={!$Label.AcuraCustomerSupport}; return false;}">click here</a>.</p>
</div>
<!-- EasyPay tems and condition for acura without logo End --> 
</apex:outputpanel>     
</div>
 
<div class="pR10 ta-right">
    <apex:commandbutton styleclass="regular-btn btn-3 getOverlay mR10" value="Cancel" onclick="ovelayPop('{!$Component.clickmerp}');" id="clickmerp" action="{!displaypopupRP}" rerender="easypayid" status="rpStatus" oncomplete="shuffletop();"/>
    <!--- Jayashree added this onclick event for defect #113982 ---->
    <apex:commandbutton value="Continue" onclick="DisableButton(this.id,'CtRPBtn');return false;" id="CtRPid" rerender="easypayid" styleclass="primary-btn btn-3" status="rpStatus" oncomplete="disablePayoffopt(); shuffletop();"/>
 
 
</div>
 
<!-- Popup1 -->
<apex:outputpanel id="popup2" style="display:block; top:13%; margin:0 auto; position:absolute; right:0; left:0;border:0; outline:none; border-radius:4px; cursor:pointer;" layout="block" rendered="{!displaypopupRP == true}">
<div class="window-size-two" id="delete-popRP">
    <h3>Go to Account Overview?</h3>
    <div class="pop-up-details">
        <p class="window-msg">
            You will now be directed to your Account Overview page. All of the information that you have entered will be lost. Are you sure you want to proceed?
        </p>
 
 
        <div class="pop-btn-section">
            <label><apex:commandbutton styleclass="regular-btn btn-3 js-modal-close close" action="{!hidepopupRP}" value="No" oncomplete="removeovelayPop('{!$Component.clickmerpno1}');" id="clickmerpno1" rerender="easypayid" /></label>
            <label><apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="{window.top.location={!$Label.AccountOverviewURL}; return false;}" rendered="{!honda}" />
            <apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="{window.top.location={!$Label.Accura_Account_Overview_URL}; return false;}" rendered="{!!honda}"/></label>
        </div>
 
    </div>
</div>
</apex:outputpanel>
<!-- End of Popup1 -->
 
 
 
</apex:outputpanel>
 
 
 
 
<!--  Review Mode -- -->
<apex:outputpanel id="rpreview" rendered="{!editMode == false && reviewMode == true}">
<div class="disable_payoffotpDrawer">
    <div class="step-pro-breadcrumb">
        <div class="process-level">
            <div class="step-one pull-left">
                <div class="step-name"><apex:commandlink value="Set Up" action="{!editRP}" rerender="easypayid" style="text-decoration: none;" /></div>
                <div class="step-count">1</div>
            </div>
            <div class="process-control ">
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
            </div>
 
        </div>
        <div class="process-level">
            <div class="step-one pull-left">
                <div class="step-name">Review</div>
                <div class="step-count">2</div>
            </div>
            <div class="process-control process-none">
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
            </div>
        </div>
        <div class="step-one pull-left step-disable last">
            <div class="step-name">Completed</div>
            <div class="step-count">3</div>
        </div>
    </div>
    <script>
		console.log('<<<loading...EnrollEasyPayStep2PageLoad>>>');
        // _satellite.track('EnrollEasyPayStep2PageLoad');
    </script>    
    <apex:pagemessages id="ReviewRPMsg"></apex:pagemessages>
    <div class="secondary-title">One Last Step...</div>
    <div class="padding10">
        To complete the process, review and submit the information below.   
    </div>
    
   
 
    <div class="round-box review-detail">
 
        <apex:outputpanel >
        <div class="full-size">
            <div class="lbltitle strong">Automatic Payment Amount</div>
            <div class="lbldesc strong"> <span> &#36;</span><apex:outputtext value="{!RPAmount}" /></div>
        </div>
    </apex:outputpanel>
 
    <apex:outputpanel >
    <div class="full-size">
        <div class="lbltitle">Withdraw Payment On</div>
        <div class="lbldesc">
            <apex:outputtext value="{!reviewDate}" styleclass="medium-input" />
        </div>
    </div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!RPID == null}">
<div class="full-size">
    <div class="lbltitle">Next Withdrawal Date</div>
    <div class="lbldesc">
        <apex:outputtext value="{0, date, MM/dd/yyyy}">
        <apex:param value="{!ChargentOrders__ChargentOrder__c.Next_Withdrawal_Date__c}" />
    </apex:outputtext>
</div>
</div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!RPID != null}">
<div class="full-size">
    <div class="lbltitle">
        <apex:outputlabel value="Next Withdrawal Date" />
    </div>
    <div class="lbldesc">
        <apex:outputtext value="{0, date, MM/dd/yyyy}">
        <apex:param value="{!NextTransactionDate}" />
    </apex:outputtext>
</div>
</div>
</apex:outputpanel>
 
<apex:outputpanel >
<div class="full-size">
    <div class="lbltitle">Bank Account Nickname</div>
    <div class="lbldesc"><apex:outputtext value="{!reviewBankName}(XXXX-{!last4Num})"> </apex:outputtext></div>
</div>
</apex:outputpanel>
 
</div>
 
<!--- Jayashree added this onclick event for defect #113982 ---->
<apex:outputpanel >
<div class="full-size btn-action">
    <div class="pull-left w30">
        <apex:commandbutton value="Edit" onclick="DisableButton(this.id,'EditRPBtn');return false;" id="EditRPid" rerender="easypayid" styleclass="regular-btn btn-3 mR10" oncomplete="disablePayoffopt(); shuffletop();"/>
 
    </div>
    <div class="pull-left ta-right w70">
        <apex:commandbutton value="Cancel" styleclass="regular-btn btn-3 mR10 getOverlay" onclick="ovelayPop('{!$Component.clickmerp1}');" id="clickmerp1" action="{!displaypopupRP}" rerender="easypayid" status="rpStatus" oncomplete="shuffletop();" />
        <apex:outputpanel rendered="{!isReadOnlyParam != 'true'}">
        <!-- Start: Spinner Wheel Message was added by Omkar for the Defect #114048-->
        <apex:commandbutton value="Submit" onclick="DisableButton(this.id,'SubRPBtn');return false;" id="SubRPId" rerender="easypayid,AccountOverviewSectionSubmitPage,AccountOverviewSection" styleclass="{!If(disableRPbtn  = 'false','primary-btn btn-3','disabledbtn')}" disabled="{!disableRPbtn = 'true'}" status="rpStatusmsg" oncomplete="disablePayoffopt(); shuffletop();"/>
        <!-- End -->
    </apex:outputpanel>
    <apex:outputpanel rendered="{!isReadOnlyParam == 'true'}">
    <apex:commandbutton value="Submit" rerender="easypayid" styleclass="disabledbtn" action="{!submitRP}" disabled="{!isReadOnlyParam = 'true'}" oncomplete="disablePayoffopt(); shuffletop();" />
</apex:outputpanel>
 
 
</div>
</div>
</apex:outputpanel>
 
<!-- Popup1 -->
<apex:outputpanel id="popupRP" style="display:block; top:13%; margin:0 auto; position:absolute; right:0; left:0;border:0; outline:none; border-radius:4px; cursor:pointer;" layout="block" rendered="{!displaypopupRP == true}">
<div class="window-size-two" id="delete-pop1">
    <h3>Cancel Changes?</h3>
    <div class="pop-up-details">
        <p class="window-msg">By clicking Yes, all the information you may have entered will be lost. Are you sure you want to proceed?</p>
 
 
        <div class="pop-btn-section">
            <label><apex:commandbutton styleclass="regular-btn btn-3 js-modal-close close" action="{!hidepopupRP}" value="No" oncomplete="removeovelayPop('{!$Component.clickmerpno2}');" id="clickmerpno2" rerender="easypayid" status="rpStatus"/></label>
            <label><apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="{window.top.location={!$Label.AccountOverviewURL}; return false;}" status="rpStatus" rendered="{!Honda}"/><apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="{window.top.location={!$Label.Accura_Account_Overview_URL}; return false;}" status="rpStatus" rendered="{!Not(Honda)}"/></label>
        </div>
 
    </div>
</div>
</apex:outputpanel>
<!-- End of Popup1 -->
</div>
 
</apex:outputpanel>
<!--End of Review Mode -->
<!-- Sumamry Mode RP-->
<apex:outputpanel rendered="{!editMode == false && reviewMode == false && successMode == true}">
    <script>
        console.log('<<<EnrollEasyPayCompletePageLoad>>>>>');
        // _satellite.track('EnrollEasyPayCompletePageLoad');
    </script>    
<div class="disable_payoffotpDrawer">
    <div class="step-pro-breadcrumb">
        <div class="process-level">
            <div class="step-one pull-left">
                <div class="step-name">Set Up</div>
                <div class="step-count">1</div>
            </div>
            <div class="process-control">
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
            </div>
 
        </div>
        <div class="process-level">
            <div class="step-one pull-left">
                <div class="step-name">Review</div>
                <div class="step-count">2</div>
            </div>
            <div class="process-control">
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
            </div>
        </div>
        <div class="step-one pull-left last">
            <div class="step-name">Completed</div>
            <div class="step-count">3</div>
        </div>
    </div>
    <div class="pull-right pT10">
        <div class="printer-version">
            <a href="/apex/PDFEasypaySummary?isHonda={!honda}&RPID={!RPID}&finnumber={!finIDVF}&withdrawdate={!reviewDate}" target="_blank" >
                <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/printer.png')}" width="20" height="20" />
                <span>Printer Friendly Version</span>
            </a>
        </div>
    </div>
<div class="clear"></div>
    <div id='tobePrinted'>
        <apex:outputpanel rendered="{!(commpref[0].EasyPay_Communications_via_Email__c == false && commpref[0].EasyPay_Communications_via_Text__c == false) && RPID == null}">
        <div class="secondary-title summary-title">Thank you!</div>
        <p class="padding10">
            You have successfully enrolled in EasyPay. Your next payment will be processed at {!cutOffTime} {!$Setup.Honda_Finance__c.Time_Zone__c} on <apex:outputtext value="{0, date, MM/dd/yyyy}"><apex:param value="{!ChargentOrders__ChargentOrder__c.Next_Withdrawal_Date__c}" /></apex:outputtext>. You can cancel this schedule at any time.
        </p>
 
    </apex:outputpanel>
 
 
    <apex:outputpanel rendered="{!(commpref[0].EasyPay_Communications_via_Email__c == true && commpref[0].EasyPay_Communications_via_Text__c == false) && RPID == null}">
    <div class="secondary-title summary-title">Thank you!</div>
    <p class="padding10">
        You have successfully enrolled in EasyPay and a confirmation was sent to {!commpref[0].Email_Address__c}. Your next payment will be processed at {!cutOffTime} {!$Setup.Honda_Finance__c.Time_Zone__c} on <apex:outputtext value="{0, date, MM/dd/yyyy}"><apex:param value="{!ChargentOrders__ChargentOrder__c.Next_Withdrawal_Date__c}" /></apex:outputtext>. You can cancel this schedule at any time.
    </p>
 
</apex:outputpanel>
 
<apex:outputpanel rendered="{!(commpref[0].EasyPay_Communications_via_Text__c == true && commpref[0].EasyPay_Communications_via_Email__c == false) && RPID == null}">
<div class="secondary-title summary-title">Thank you!</div>
<p class="padding10">
    You have successfully enrolled in EasyPay and a confirmation was sent to {!commpref[0].Text_Number__c }. Your next payment will be processed at {!cutOffTime} {!$Setup.Honda_Finance__c.Time_Zone__c} on <apex:outputtext value="{0, date, MM/dd/yyyy}"><apex:param value="{!ChargentOrders__ChargentOrder__c.Next_Withdrawal_Date__c}" /></apex:outputtext>. You can cancel this schedule at any time.
</p>
 
</apex:outputpanel>
 
<apex:outputpanel rendered="{!(commpref[0].EasyPay_Communications_via_Email__c == true && commpref[0].EasyPay_Communications_via_Text__c == true) && RPID == null}">
<div class="secondary-title summary-title">Thank you!</div>
<p class="padding10">
    You have successfully enrolled in EasyPay and a confirmation was sent to {!commpref[0].Email_Address__c} and {!commpref[0].Text_Number__c }. Your next payment will be processed at {!cutOffTime} {!$Setup.Honda_Finance__c.Time_Zone__c} on <apex:outputtext value="{0, date, MM/dd/yyyy}"><apex:param value="{!ChargentOrders__ChargentOrder__c.Next_Withdrawal_Date__c}" /></apex:outputtext>. You can cancel this schedule at any time.
</p>
 
</apex:outputpanel>
 
<apex:outputpanel rendered="{!((commpref[0].EasyPay_Communications_via_Email__c == false && commpref[0].EasyPay_Communications_via_Text__c == false) && RPID != null)}">
<div class="secondary-title summary-title">Thank you!</div>
<p class="padding10">
    You have successfully updated your EasyPay schedule. Your next payment will be processed at {!cutOffTime} {!$Setup.Honda_Finance__c.Time_Zone__c} on <apex:outputtext value="{0, date, MM/dd/yyyy}"><apex:param value="{!ChargentOrders__ChargentOrder__c.Next_Withdrawal_Date__c}" /></apex:outputtext>. You can cancel this schedule at any time.
</p>
 
</apex:outputpanel>
 
 
<apex:outputpanel rendered="{!((commpref[0].EasyPay_Communications_via_Email__c == true && commpref[0].EasyPay_Communications_via_Text__c == false) && RPID != null)}">
<div class="secondary-title summary-title">Thank you!</div>
<p class="padding10">
    You have successfully updated your EasyPay schedule and a confirmation was sent to {!commpref[0].Email_Address__c}. Your next payment will be processed at {!cutOffTime} {!$Setup.Honda_Finance__c.Time_Zone__c} on <apex:outputtext value="{0, date, MM/dd/yyyy}"><apex:param value="{!ChargentOrders__ChargentOrder__c.Next_Withdrawal_Date__c}" /></apex:outputtext>. You can cancel this schedule at any time.
</p>
 
</apex:outputpanel>
 
<apex:outputpanel rendered="{!((commpref[0].EasyPay_Communications_via_Text__c == true && commpref[0].EasyPay_Communications_via_Email__c == false) && RPID != null)}">
<div class="secondary-title summary-title">Thank you!</div>
<p class="padding10">
    You have successfully updated your EasyPay schedule and a confirmation was sent to {!commpref[0].Text_Number__c }. Your next payment will be processed at {!cutOffTime} {!$Setup.Honda_Finance__c.Time_Zone__c} on <apex:outputtext value="{0, date, MM/dd/yyyy}"><apex:param value="{!ChargentOrders__ChargentOrder__c.Next_Withdrawal_Date__c}" /></apex:outputtext>. You can cancel this schedule at any time.
</p>
 
</apex:outputpanel>
 
<apex:outputpanel rendered="{!((commpref[0].EasyPay_Communications_via_Email__c == true && commpref[0].EasyPay_Communications_via_Text__c == true)&& RPID != null)}">
<div class="secondary-title summary-title">Thank you!</div>
<p class="padding10">
    You have successfully updated your EasyPay schedule and a confirmation was sent to {!commpref[0].Email_Address__c} and {!commpref[0].Text_Number__c }. Your next payment will be processed at {!cutOffTime} {!$Setup.Honda_Finance__c.Time_Zone__c} on <apex:outputtext value="{0, date, MM/dd/yyyy}"><apex:param value="{!ChargentOrders__ChargentOrder__c.Next_Withdrawal_Date__c}" /></apex:outputtext>. You can cancel this schedule at any time.
</p>
 
</apex:outputpanel>
 
<div class="round-box review-detail">
 
 
 
    <apex:outputpanel >
    <div class="full-size">
        <div class="lbltitle">Withdraw Payment On</div>
        <div class="lbldesc">
            <apex:outputtext value="{!reviewDate}" styleclass="medium-input" />
        </div>
    </div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!RPID == null}">
<div class="full-size">
    <div class="lbltitle">Next Withdrawal Date</div>
    <div class="lbldesc">
        <apex:outputtext value="{0, date, MM/dd/yyyy}">
        <apex:param value="{!ChargentOrders__ChargentOrder__c.Next_Withdrawal_Date__c}" />
    </apex:outputtext>
</div>
</div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!RPID != null}">
<div class="full-size">
    <div class="lbltitle"><apex:outputlabel value="Next Withdrawal Date" /></div>
    <div class="lbldesc">
        <apex:outputtext value="{0, date, MM/dd/yyyy}">
        <apex:param value="{!NextTransactionDate}" />
    </apex:outputtext>
</div>
</div>
</apex:outputpanel>
 
<apex:outputpanel >
<div class="full-size">
    <div class="lbltitle">Bank Account Nickname</div>
    <div class="lbldesc"><apex:outputtext value="{!reviewBankName}(XXXX-{!last4Num})"> </apex:outputtext></div>
</div>
</apex:outputpanel>
 
<apex:outputpanel >
<div class="full-size">
    <div class="lbltitle">Automatic Payment Amount</div>
    <div class="lbldesc"> <span> &#36;</span><apex:outputtext value="{!RPAmount}" /></div>
</div>
</apex:outputpanel>
 
</div>
</div>
 
<!--Added as part of RSS 41389 -->
<apex:outputPanel id="RPwarning"  rendered="{!(ChargentOrders__ChargentOrder__c.Next_Withdrawal_Date__c > finAccount.Next_Due_Date__c && finAccount.Paid_to_Date__c<=ChargentOrders__ChargentOrder__c.Next_Withdrawal_Date__c )}" styleClass="EasyPayMsg">
<p style="font-weight:bold">Your first EasyPay payment will withdraw on <apex:outputtext value="{0, date, MM/dd/yyyy}"><apex:param value="{!ChargentOrders__ChargentOrder__c.Next_Withdrawal_Date__c}" /></apex:outputText>. Your due date is <apex:outputtext value="{0, date, MM/dd/yyyy}"><apex:param value="{!finAccount.Next_Due_Date__c}" /></apex:outputText>. 
If you have not already made a payment, please click on Make a Payment below to keep your account current.</p>
</apex:outputPanel>
<!--End of code for RSS 41389 -->
 
<!-- Following code is updated as part of RSS 41389 -->
 
<apex:outputpanel rendered="{!(commpref[0].EasyPay_Communications_via_Email__c == false && commpref[0].EasyPay_Communications_via_Text__c == false && (finAccount.Next_Due_Date__c==null || finaccount.Next_Due_Date__c >= NextTransactionDate))}">
<div class="secondary-title">Set Up EasyPay Communications!</div>
<p class="round-box">
    Sign up to receive EasyPay notifications through email and/or text.
</p>
<div class="full-size btn-action ta-right">
    <apex:commandbutton value="Go to Pending Payments" onclick="{window.location='/apex/Pendingpayment?finnumber={!finIDVF}&isReadOnly={!isReadOnlyParam}'; return false;}" styleclass="regular-btn btn-1 mR10" />
    <apex:commandbutton value="Set Up Communications" onclick="{window.location='/apex/CommunicationPreferences?finnumber={!finIDVF}&isReadOnly={!isReadOnlyParam}'; return false;}" styleclass="primary-btn btn-1" />
 
</div>
</apex:outputpanel>
    
<apex:outputpanel rendered="{!(commpref[0].EasyPay_Communications_via_Email__c == false && commpref[0].EasyPay_Communications_via_Text__c == false && finAccount.Next_Due_Date__c!=null && finaccount.Next_Due_Date__c < NextTransactionDate)}">
<!--Commented as part Of Verbiage Change<p class="round-box">
    Sign up to receive EasyPay notifications through email and/or text.
</p> -->
<div class="full-size btn-action ta-right">
    <apex:commandbutton value="Go to Pending Payments" onclick="{window.location='/apex/Pendingpayment?finnumber={!finIDVF}&isReadOnly={!isReadOnlyParam}'; return false;}" styleclass="regular-btn btn-1 mR10" />
    <apex:commandbutton value="Make A Payment" onclick="{window.location='/apex/MakeAPaymentLandingPage?finnumber={!finIDVF}&isReadOnly={!isReadOnlyParam}&type=3'; return false;}" styleclass="primary-btn btn-1" />
</div>
</apex:outputpanel> 
 
<apex:outputpanel rendered="{!((commpref[0].EasyPay_Communications_via_Email__c == true || commpref[0].EasyPay_Communications_via_Text__c == true) && (finAccount.Next_Due_Date__c==null || finaccount.Next_Due_Date__c >= NextTransactionDate))}">
<div class="full-size btn-action ta-right">
    <apex:commandbutton value="Go to Pending Payments" onclick="{window.location='/apex/Pendingpayment?finnumber={!finIDVF}&isReadOnly={!isReadOnlyParam}'; return false;}" styleclass="primary-btn btn-1" />
</div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!((commpref[0].EasyPay_Communications_via_Email__c == true || commpref[0].EasyPay_Communications_via_Text__c == true) && finAccount.Next_Due_Date__c!=null && finaccount.Next_Due_Date__c < NextTransactionDate)}">
<!-- Commented as part of Verbiage Change<p class="round-box">
    Sign up to receive EasyPay notifications through email and/or text.
</p> -->
<div class="full-size btn-action ta-right">
    <apex:commandbutton value="Go to Pending Payments" onclick="{window.location='/apex/Pendingpayment?finnumber={!finIDVF}&isReadOnly={!isReadOnlyParam}'; return false;}" styleclass="regular-btn btn-1 mR10" />
    <apex:commandbutton value="Make A Payment" onclick="{window.location='/apex/MakeAPaymentLandingPage?finnumber={!finIDVF}&isReadOnly={!isReadOnlyParam}&type=3'; return false;}" styleclass="primary-btn btn-1" />
</div>
</apex:outputpanel> 
 
 
<!--End of updated code for RSS 41389 -->
 
</div>
</apex:outputpanel>
<!-- End of Summary Mode -->
</apex:outputpanel>
</apex:outputpanel>
</div>
<!---------------------End of RP ---------------------------------------------------------------- -->
 
 
 
 
 
 
<!---------------  Start of Payoff -------------------------------------------------------------------------- -->
 
<h1><apex:commandlink action="{!fetchData}" value="Payoff Payment" oncomplete="fndisablechkeach();" rerender="opPayOffMain" status="pfStatus" style="accordionlink"/></h1>
 
<div id="payoff_payment">
 
    <apex:outputpanel id="opPayOffMain">
    <div class="waitingSearchDiv overlay-loader" id="pfLoading" style="display:none;"> 
        <div class="waitingHolder">
            <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/loading.gif')}" title="Please Wait" width="32" height="32" />
        </div>
    </div>
    <!-- Start: Time out redirection functionality was added by Omkar for the Defect #114048-->  
    <div class="waitingSearchDiv overlay-loader" id="pfLoadingmsg" style="display:none;"> 
        <div class="waitingHolder">
            <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/loading.gif')}" title="Please Wait" width="32" height="32" />
           <br/><div style="margin-left:-150px; width:500px;">
                    <span class="waitingDescription"> <b>Processing your request. Do not refresh this page.</b></span> 
                </div>
        </div>
    </div>
    <!-- End -->
 
    <apex:actionfunction name="existPFactionfunction" action="{!editexistPF}" rerender="opPayOffMain" status="pfStatus"/>
    <apex:actionfunction name="existPFdelactionfunction" action="{!popupdeletePF}" rerender="opPayOffMain"  status="pfStatus"/>
    <!-- Start Cancel Request -->
    <apex:actionfunction name="cancelPage_JS" action="{!checkDevice}" oncomplete="{!If(mobile==false,'redirectToHFS_JS();','popWinClose()')}"/>
    <apex:actionfunction action="{!redirectToHFS}" name="redirectToHFS_JS" />
    <!-- End Cancel Request -->
    <!--  Used in Cancel payoff  -->
    <apex:actionFunction name="hidedrawPF1" action="{!hidepopupdrawPF1}" oncomplete="acc();" reRender="payoff_payment" status="pfStatus"/>
    <apex:actionFunction name="hidedrawPF2" action="{!hidepopupdrawPF2}" oncomplete="acc();"  reRender="payoff_payment" status="pfStatus"/>
 
    <!--- Jayashree added this for defect #113982 ---->
    <apex:actionfunction name="CtPFBtn" action="{!reviewDetails}" rerender="opPayOffMain" status="pfStatus" oncomplete="disableotpeasy(); shuffletop();"/>
    <apex:actionfunction name="EditPFBtn" action="{!editPayOff}" rerender="opPayOffEdit" status="pfStatus" oncomplete="disableotpeasy(); shuffletop();"/>
    <!-- Start: Spinner Wheel message was added by Omkar for the Defect #114048--> 
    <apex:actionfunction name="SubPFBtn" action="{!submitPayOff}"  rerender="opPayOffEdit,AccountOverviewSectionSubmitPage,AccountOverviewSection" status="pfStatusmsg" oncomplete="shuffletop();"/>
    <!-- End -->
    
    <!--if the user is eligible for PayOff-->
    <apex:outputpanel rendered="{!finaccountPF.Fl_Payoff_Payment_Eligible_Web__c == false}">
    <!---- Changes added to the links by Jayashree for 114165 --->
    <apex:outputpanel rendered="{!Honda}">
    <div class="secondary-title">Please Contact Us</div>
    <div class="pL10 pR10">Your finance account is currently ineligible for Payoff Payments. Please&nbsp;<a href="{!$Label.HondaCSEP}" target="_blank"  styleclass="clkhere" >click here</a>&nbsp;to contact a customer service representative for assistance.</div>
</apex:outputpanel>
<apex:outputpanel rendered="{!Not(Honda)}">
<div class="secondary-title">Please Contact Us</div>
<div class="pL10 pR10">Your finance account is currently ineligible for Payoff Payments. Please&nbsp;<a href="{!$Label.AcuraCSEP}" target="_blank"  styleclass="clkhere" >click here</a>&nbsp;to contact a customer service representative for assistance.</div>
</apex:outputpanel>
<!--- End of defect 114165 ---->
</apex:outputpanel>
 
<!--if existing Payoff just show the pencil icons / cancel icons-->
<apex:outputpanel id="existpayoffid" rendered="{!finaccountPF.Fl_Payoff_Payment_Eligible_Web__c == true && existingPFFlag == true && editModePF == false}">
<div class="padding10">
    <p>
        You already have a scheduled payoff payment on this finance account. The payment can be edited until {!cutOffTime} {!$Setup.Honda_Finance__c.Time_Zone__c}.
    </p>
    <div class="round-box mTB10">
        <ul >
     <!-- Added as part of July 2018 release RSS 41776 --->      
     <li Style="width:236px">
                Payment Authorized On:<strong>
               <apex:outputText value="{0,date,M/dd/yyyy}">
               <apex:param value="{!cOrderListPFExist[0].PaymentAuthorizedOn__c}" />
            </apex:outputText>
        </strong>
    </li>
    <li Style="width:180px">Confirmation# : <strong>{!cOrderListPFExist[0].Confirmation_Number__c} </strong> </li>
   <!--- Change ends 41776--> 
    <li Style="width:236px">
                Payment Date: <strong>
                <apex:outputtext value="{0,date,M/dd/yyyy}">
                <apex:param value="{!cOrderListPFExist[0].ChargentOrders__Payment_Start_Date__c}" />
            </apex:outputtext>
        </strong>
    </li>
    
    <li Style="width:180px">Payment Type: <strong>{!if(cOrderListPFExist[0].Payment_Type__c == 'P', 'Payoff','')}</strong></li>
    
    <li Style="width:236px">Amount: <strong>{!cOrderListPFExist[0].ChargentOrders__Charge_Amount__c}</strong></li>
    
    <li Style="width:180px">Status: <strong>{!cOrderListPFExist[0].Payment_Display_Status__c}</strong></li>
 
    <li Style="width:400px"> Bank Account Nickname : <strong>{!cOrderListPFExist[0].Payment_Source_Nickname__r.Payment_Source_Nickname__c}(XXXX-{!cOrderListPFExist[0].Payment_Source_Nickname__r.last_4__c})</strong></li>
    
    
    </ul>
 
    
 
<div class="right-icon">
    <p class="mR10">
        <a href="#">
            <apex:image id="imgedit1" width="24px" height="23px" alt="edit icon" url="{!URLFOR($Resource.PendingPayment, 'PendingPayment/images/edit-icon.png')}" onclick="existPF();" rendered="{!readOnlyPF==false}" />
            <apex:image id="imgedit1-Readonly" width="24px" height="23px" alt="edit icon" url="{!URLFOR($Resource.PendingPayment, 'PendingPayment/images/GrayPencil.png')}" rendered="{!readOnlyPF==true && cOrderListPFExist[0].Payment_Display_Status__c != 'Processing' && cOrderListPFExist[0].Payment_Display_Status__c != 'Researching'}" />
            <span>Edit</span>
        </a>
    </p>
    <p>
        <a href="#">
            <apex:image width="24px" id="imgcan1" height="23px" alt="edit icon" url="{!URLFOR($Resource.PendingPayment, 'PendingPayment/images/close-icon.png')}" onclick="existcancelPF('{!$Component.imgcan1}');" rendered="{!readOnlyPF==false}"/>
            <apex:image width="24px" id="imgcan1-readonly" height="23px" alt="edit icon" url="{!URLFOR($Resource.PendingPayment, 'PendingPayment/images/GrayX.png')}"  rendered="{!readOnlyPF==true && cOrderListPFExist[0].Payment_Display_Status__c != 'Processing' && cOrderListPFExist[0].Payment_Display_Status__c != 'Researching'}"/>                                                           
            <span>Cancel</span>
        </a>
    </p>
</div>
</div>
</div>
 
 
<!-- Popup1 -->
<apex:outputpanel id="popupdeletePF" rendered="{!displaypopupDeletePF == true}" style="display:block; top:13%; margin:0 auto; position:absolute; right:0; left:0;border:0; outline:none; border-radius:4px; cursor:pointer;" layout="block">
<div class="window-size-two" id="delete-pop-easypay1">
    <h3>Cancel Payment?</h3>
    <div class="pop-up-details">
        <p class="window-msg">Are you sure you want to cancel the following payment?</p>
        <ul>
            <li>
                <label>Payment Type</label>
                <span>
                    <apex:outputtext value="{!if(cOrderListPFExist[0].Payment_Type__c == 'P','Payoff','')}" />
 
                </span>
            </li>
            <li>
                <label>Bank Account Nickname</label>
                <span>
                    <apex:outputtext value="{!cOrderListPFExist[0].Payment_Source_Nickname__r.Payment_Source_Nickname__c}" />
                </span>
            </li>
            <li>
                <label>Payment Amount </label>
 
                <apex:outputfield value="{!cOrderListPFExist[0].ChargentOrders__Charge_Amount__c}" />
 
            </li>
        </ul>
        <div class="pop-btn-section">
            <label><apex:commandbutton styleclass="regular-btn btn-3" value="No" oncomplete="removeovelayPop('{!$Component.clickmepfno3}');" id="clickmepfno3" action="{!hidedeletePF}" rerender="existpayoffid" status="pfStatus"/></label>
            <label><apex:commandbutton styleclass="primary-btn btn-3" value="Yes, Cancel" oncomplete="removeovelayPop('{!$Component.clickmepfno4}');" rendered="{!isReadOnlyParam = 'false'}" id="clickmepfno4" action="{!deletePF}" rerender="opPayOffMain" status="pfStatus"/>
            <apex:commandbutton styleclass="btn-3 disabledbtn" style="margin :0" value="Yes, Cancel" rendered="{!isReadOnlyParam = 'true'}" disabled="true" rerender="opPayOffMain" /></label>
        </div>
    </div>
</div>
</apex:outputpanel>
<!-- End of Popup1 -->
 
 
 
 
</apex:outputpanel>
<!--Open in Edit mode or new mode-->
<apex:outputpanel id="opPayOffEdit" style="display:block" rendered="{!finaccountPF.Fl_Payoff_Payment_Eligible_Web__c == true && (existingPFFlag == false || editModePF==true)}">
 
 
<apex:outputpanel id="page1" rendered="{!editModePF == true && reviewModePF == false}">
<div class="step-pro-breadcrumb">
    <div class="process-level">
        <div class="step-one pull-left">
            <div class="step-name">Set Up</div>
            <div class="step-count">1</div>
        </div>
        <div class="process-control process-none">
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
        </div>
 
    </div>
    <div class="process-level">
        <div class="step-one pull-left step-disable">
            <div class="step-name">Review</div>
            <div class="step-count">2</div>
        </div>
        <div class="process-control process-none">
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
            <div class="process-dot pull-left"></div>
        </div>
    </div>
    <div class="step-one pull-left step-disable last">
        <div class="step-name">Completed</div>
        <div class="step-count">3</div>
    </div>
</div>
</apex:outputpanel>
 
<!--Edit / New PayOff-->
<apex:outputpanel rendered="{!editModePF == true && reviewModePF == false}">
<apex:pagemessages ></apex:pagemessages>
 
<div class="secondary-title">Provide your Payoff Payment Information</div>
<div class="padding10">
<!-- Changes added for the defect 113948 by Jayashree ---->
    Choose a bank account for your payoff payment. Your payoff payment will be credited to your account within 2 business days of your scheduled Payoff Date. <b>Payoffs made after {!cutOffTime} {!$Setup.Honda_Finance__c.Time_Zone__c} cannot be edited or cancelled.</b>
</div>
 
<div class="round-box review-detail">
 
    <apex:outputpanel >
    <div class="full-size">
        <div class="lbltitle strong">
            <label for="Payoff-Payment-Amount">
                Payoff Amount
                <a href="javascript:;" class="tooltip">
                    <b>?</b>
                    <span class="tooltip-box">The Payoff Amount is calculated based on today&#39;s date and cannot be changed.</span>
                </a>
            </label>
        </div>
        <div class="lbldesc"><strong>$<apex:outputtext value="{!PayoffAmount}" /></strong></div>
    </div>
</apex:outputpanel>
 
<apex:outputpanel >
<div class="full-size">
    <div class="lbltitle">
        <label for="Payoff-Payment-Date">
            Payoff Date
            <a href="javascript:;" class="tooltip">
                <b>?</b>
                <span class="tooltip-box">The Payoff Date cannot be changed.</span>
            </a>
        </label>
    </div>
 
    <div class="lbldesc"><apex:outputtext value="{!paymentStartDate}" /> </div>
</div>
 
 
</apex:outputpanel>
 
 
<div class="hr clear"></div>
<div class="otp-info">
 
    <!--<form id="form3" method="post" class="ta-center"></form>-->
    <div class="form-field">
        <label for="bank-name">Bank Account Nickname</label>
        <div>
            <!--[if !IE]> -->
            <div class="select-box-cover ml25">
                <!-- <![endif]-->
                <span class="fancyArrow"></span>
                <apex:selectlist id="BanknamePF" value="{!bankAccntNamePF}" size="1" title="Bank Account Nickname" styleclass="medium-input" style="{!IF(errorColorBA = 'Red','border:1px solid #FF6600',If(errorColorBA = 'Green','border:1px solid #00CC33','border:1px solid #FFF'))}">
 
                <apex:selectoptions value="{!bankValues}"></apex:selectoptions>
                <apex:actionsupport event="onchange" action="{!checkDataNew}" rerender="accountoverview" oncomplete="reenterDisable();">
                <apex:param name="transactionType" value="payoff" />
            </apex:actionsupport>
 
        </apex:selectlist>
        <!--[if !IE]> -->
    </div>
    <!-- <![endif]-->
</div>
</div>
 
</div>
<div class="hr clear"></div>
<div class="pTB10">Your payoff payment is being submitted in accordance with the &nbsp;<apex:commandlink onclick="window.open('apex/PdfTermsandCondNewBankAcc?ishonda={!Honda}')" target="_blank" rerender="opPayOffEdit">Terms &amp; Conditions </apex:commandlink> for Banking Authorization.</div>
</div>
 
<div class="pR10 ta-right">
    <apex:commandbutton styleclass="regular-btn btn-3 getOverlay mR10" value="Cancel" onclick="ovelayPop('{!$Component.clickme1}');" id="clickme1" action="{!displaypopup}" rerender="opPayOffMain" oncomplete="shuffletop();" />
    <!--- Jayashree added this onclick event for defect #113982 ---->
    <apex:commandbutton value="Continue" onclick="DisableButton(this.id,'CtPFBtn');return false;" id="CtPFid" rerender="opPayOffMain" styleclass="primary-btn btn-3" status="pfStatus" oncomplete="disableotpeasy(); shuffletop();" />
 
</div>
 
 
<!-- Bank Account Terms and condition --------------------- -->
<div id='TermstobeprintedPF'>
    <apex:outputpanel id="TermsConditionPF" style="display:none">
    <div>
 
        <div class="print-pdf-section">
            <apex:outputpanel rendered="{!Honda}">
            <p class="tc-head">Payment Withdrawal Authorization</p>
            <p class="tc-content">When you provide your bank account information to us, you authorize Honda Financial Services to withdraw funds by electronic transfer from the account identified by you each time you request a payment using our online or telephone payment services (and to make credits to correct errors). You will select the amount of the payment and the payment date when you request a payment. This authorization will remain in effect until you cancel it. You may cancel your authorization at any time online by accessing this website and removing the bank account information, but the cancellation will not apply to any payments you have already requested and are already in process. If you cancel your authorization, you will no longer be able to request payments using our online or telephone payment services. This method of cancellation (and other methods of cancellation we may make available from time to time) is the only way that you can cancel this authorization.</p>
            <p class="tc-content">If any payment is rejected due to insufficient funds, Honda Financial Services may charge you a fee and your bank may also charge you a fee.</p>
            <p class="tc-content">You agree that the payments authorized by you must comply with the terms of U.S. law.</p>
            <p class="tc-content">Please print or save a copy of this authorization for your records.</p>
            <p class="tc-content">For information about how to contact AMERICAN HONDA FINANCE CORPORATION <a href="#" target="_blank" styleclass="clkhere" onclick="{window.top.location={!$Label.HondaCustomerService}; return false;}" >click here</a>.</p>
        </apex:outputpanel>
    </div>
 
 
    <div class="print-pdf-section">
        <apex:outputpanel rendered="{!Not(Honda)}">
        <p class="tc-head">Payment Withdrawal Authorization</p>
        <p class="tc-content">When you provide your bank account information to us, you authorize Acura Financial Services to withdraw funds by electronic transfer from the account identified by you each time you request a payment using our online or telephone payment services (and to make credits to correct errors). You will select the amount of the payment and the payment date when you request a payment. This authorization will remain in effect until you cancel it. You may cancel your authorization at any time online by accessing this website and removing the bank account information, but the cancellation will not apply to any payments you have already requested and are already in process. If you cancel your authorization, you will no longer be able to request payments using our online or telephone payment services. This method of cancellation (and other methods of cancellation we may make available from time to time) is the only way that you can cancel this authorization.</p>
        <p class="tc-content">If any payment is rejected due to insufficient funds, Acura Financial Services may charge you a fee and your bank may also charge you a fee.</p>
        <p class="tc-content">You agree that the payments authorized by you must comply with the terms of U.S. law.</p>
        <p class="tc-content">Please print or save a copy of this authorization for your records.</p>
        <p class="tc-content">For information about how to contact AMERICAN HONDA FINANCE CORPORATION <a href="#" target="_blank" styleclass="clkhere" onclick="{window.top.location={!$Label.AcuraCustomerSupport}; return false;}" >click here</a>.</p>
    </apex:outputpanel>
</div>
</div>
 
</apex:outputpanel>
</div>
 
 
<!--------------------End of Terms and Conditions ----------------- -->
 
 
</apex:outputpanel>
 
<!--End of Edit Mode -->
<!--- Review Mode - -->
<apex:outputpanel id="reviewPayOff" rendered="{!editModePF == false && reviewModePF == true}">
<div class="disable_otpeasyDrawer">
    <div class="step-pro-breadcrumb">
        <div class="process-level">
            <div class="step-one pull-left">
                <div class="step-name"><apex:commandlink value="Set Up" action="{!editPayOff}" rerender="opPayOffEdit" style="text-decoration: none;" /></div>
                <div class="step-count">1</div>
            </div>
            <div class="process-control ">
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
            </div>
 
        </div>
        <div class="process-level">
            <div class="step-one pull-left">
                <div class="step-name">Review</div>
                <div class="step-count">2</div>
            </div>
            <div class="process-control process-none">
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
            </div>
        </div>
        <div class="step-one pull-left step-disable last">
            <div class="step-name">Completed</div>
            <div class="step-count">3</div>
        </div>
    </div>
    <apex:pagemessages id="ReviewPFMsg"></apex:pagemessages>
    <div class="secondary-title">One Last Step...</div>
    <p class="padding10">
    <!-- Changes added for the defect 113948 by Jayashree ---->
        To complete the process, review and submit the information below.
        <br></br><b>Payoffs made after {!cutOffTime} {!$Setup.Honda_Finance__c.Time_Zone__c} cannot be edited or cancelled.</b>
    </p>
    
    
 
    <div class="round-box review-detail">
        <apex:outputpanel >
        <div class="full-size">
            <div class="lbltitle strong">Payoff Amount</div>
            <div class="lbldesc strong"><span>&#36;</span><apex:outputtext value="{!PayoffAmount}"> </apex:outputtext></div>
        </div>
    </apex:outputpanel>
 
    <apex:outputpanel >
    <div class="full-size">
        <div class="lbltitle">Payoff Date</div>
 
        <div class="lbldesc">
            <apex:outputtext value="{!paymentStartDate}" />
 
        </div>
    </div>
</apex:outputpanel>
 
 
 
<apex:outputpanel >
<div class="full-size">
    <div class="lbltitle">Bank Account Nickname</div>
    <div class="lbldesc"><apex:outputtext value="{!reviewBanknamePF}"> </apex:outputtext></div>
</div>
 
</apex:outputpanel>
 
</div>
 
<!--- Jayashree added this onclick event for defect #113982 ---->
<div class="full-size btn-action payoff-btn">
    <div class="pull-left w30">
        <apex:commandbutton value="Edit" onclick="DisableButton(this.id,'EditPFBtn');return false;" id="EditPFid" rerender="opPayOffEdit" styleclass="regular-btn btn-3 mR10" status="pfStatus" oncomplete="disableotpeasy(); shuffletop();"/>
 
    </div>
    <div class="pull-left ta-right w55">
        <apex:commandbutton styleclass="regular-btn btn-3 getOverlay mR10" value="Cancel" onclick="ovelayPop('{!$Component.clickmepf1}');" id="clickmepf1" action="{!displaypopup}" rerender="opPayOffEdit" oncomplete="shuffletop();"/>
        <apex:outputpanel rendered="{!isReadOnlyParam != 'true'}">
        <!-- Start: Spinner Wheel message was added by Omkar for the Defect #114048-->
        <apex:commandbutton value="Submit" onclick="DisableButton(this.id,'SubPFBtn');return false;" id="SubPFId" rerender="opPayOffEdit,AccountOverviewSectionSubmitPage,AccountOverviewSection" styleclass="{!If(disablePFbtn  = 'false','primary-btn btn-3','disabledbtn')}" status="pfStatusmsg" disabled="{!disablePFbtn = 'true'}" oncomplete="shuffletop();"/>
        <!-- End -->
    </apex:outputpanel>
    <apex:outputpanel rendered="{!isReadOnlyParam == 'true'}">
    <apex:commandbutton value="Submit" rerender="opPayOffEdit" styleclass="readonly-btn disabledbtn" action="{!submitPayOff}" disabled="{!isReadOnlyParam = 'true'}" oncomplete="shuffletop();" />
</apex:outputpanel>
 
 
</div>
</div>
 
<!-- Popup1 -->
<apex:outputpanel id="popuprvPF" style="display:block; top:13%; margin:0 auto; position:absolute; right:0; left:0;border:0; outline:none; border-radius:4px; cursor:pointer;" layout="block" rendered="{!displaypopup == true}">
<div class="window-size-two" id="delete-pop">
    <h3>Cancel Changes?</h3>
    <div class="pop-up-details">
        <p class="window-msg">By clicking Yes, all the information you may have entered will be lost. Are you sure you want to proceed?</p>
 
 
        <div class="pop-btn-section">
            <label><apex:commandbutton styleclass="regular-btn btn-3 js-modal-close close" action="{!hidepopup}" value="No" oncomplete="removeovelayPop('{!$Component.clickmepfno2}');" id="clickmepfno2" rerender="opPayOffEdit" status="pfStatus"/></label>
            <label><apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="{window.top.location={!$Label.AccountOverviewURL}; return false;}" status="pfStatus" rendered="{!Honda}"/><apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="{window.top.location={!$Label.Accura_Account_Overview_URL}; return false;}" status="pfStatus" rendered="{!Not(Honda)}"/></label>
        </div>
 
    </div>
</div>
</apex:outputpanel>
<!-- End of Popup1 -->
</div>
</apex:outputpanel>
<!-- End Of Review Mode -->
 
<!-- Summary Mode - -->
 
<apex:outputpanel id="opPayOffSubmit" rendered="{!editModePF == false && reviewModePF == false && successModePF == true}">
<div class="disable_otpeasyDrawer">
    <div class="step-pro-breadcrumb">
        <div class="process-level">
           <div class="step-one pull-left">
                <div class="step-name">Set Up</div>
                <div class="step-count">1</div>
            </div>
            <div class="process-control">
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
            </div>
 
        </div>
        <div class="process-level">
            <div class="step-one pull-left">
                <div class="step-name">Review</div>
                <div class="step-count">2</div>
            </div>
            <div class="process-control">
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
                <div class="process-dot pull-left"></div>
            </div>
        </div>
        <div class="step-one pull-left last">
            <div class="step-name">Completed</div>
            <div class="step-count">3</div>
        </div>
    </div>
 
    <div align="right" class="pull-right pT10">
        <div class="printer-version">
            <a href="/apex/PdfPayoffSummary?isHonda={!honda}&Payoffid={!Payoffid}&finnumber={!finIDVF}" target="_blank" >
                <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/printer.png')}" width="20" height="20" />
                <span>Printer Friendly Version</span>
            </a>
        </div>
    </div>
<div class="clear"></div>
    <div id='tobePrinted'>
        <apex:outputpanel rendered="{!(commpref[0].Payment_Confirmations_via_Email__c == false && commpref[0].Payment_Confirmations_via_Text__c == false) && Payoffid == null}">
        <div class="secondary-title">Congratulations!</div>
        <p class="padding10">
        <!-- Changes added for the defect 113948 by Jayashree ---->
            Your payoff payment was successfully scheduled.
        </p>
 
    </apex:outputpanel>
 
 
    <apex:outputpanel rendered="{!(commpref[0].Payment_Confirmations_via_Email__c == true && commpref[0].Payment_Confirmations_via_Text__c == false) && Payoffid == null}">
    <div class="secondary-title">Congratulations!</div>
    <p class="padding10">
    <!-- Changes added for the defect 113948 by Jayashree ---->
        Your payoff payment was successfully scheduled and a confirmation was sent to {!commpref[0].Email_Address__c}.
 
    </p>
 
</apex:outputpanel>
 
<apex:outputpanel rendered="{!(commpref[0].Payment_Confirmations_via_Text__c == true && commpref[0].Payment_Confirmations_via_Email__c == false) && Payoffid == null}">
<div class="secondary-title">Congratulations!</div>
<p class="padding10">
<!-- Changes added for the defect 113948 by Jayashree ---->
    Your payoff payment was successfully scheduled and a confirmation was sent to {!commpref[0].Text_Number__c }.
 
</p>
 
</apex:outputpanel>
 
<apex:outputpanel rendered="{!(commpref[0].Payment_Confirmations_via_Email__c == true && commpref[0].Payment_Confirmations_via_Text__c == true) && Payoffid == null}">
<div class="secondary-title">Congratulations!</div>
<p class="padding10">
<!-- Changes added for the defect 113948 by Jayashree ---->
    Your payoff payment was successfully scheduled and a confirmation was sent to {!commpref[0].Email_Address__c} and {!commpref[0].Text_Number__c }.
</p>
 
</apex:outputpanel>
 
 
<apex:outputpanel rendered="{!((commpref[0].Payment_Confirmations_via_Email__c == false && commpref[0].Payment_Confirmations_via_Text__c == false) && Payoffid != null)}">
<div class="secondary-title">Congratulations!</div>
<p class="padding10">
<!-- Changes added for the defect 113948 by Jayashree ---->
    Your payoff payment was successfully updated.
 
</p>
 
</apex:outputpanel>
 
 
<apex:outputpanel rendered="{!((commpref[0].Payment_Confirmations_via_Email__c == true && commpref[0].Payment_Confirmations_via_Text__c == false) && Payoffid != null)}">
<div class="secondary-title">Congratulations!</div>
<p class="padding10">
<!-- Changes added for the defect 113948 by Jayashree ---->
    Your payoff payment was successfully updated and a confirmation was sent to {!commpref[0].Email_Address__c}.
 
 
</p>
 
</apex:outputpanel>
<apex:outputpanel rendered="{!((commpref[0].Payment_Confirmations_via_Text__c == true && commpref[0].Payment_Confirmations_via_Email__c == false) && Payoffid != null)}">
<div class="secondary-title">Congratulations!</div>
<p class="padding10">
<!-- Changes added for the defect 113948 by Jayashree ---->
    Your payoff payment was successfully updated and a confirmation was sent to {!commpref[0].Text_Number__c }.
</p>
 
</apex:outputpanel>
 
<apex:outputpanel rendered="{!((commpref[0].Payment_Confirmations_via_Email__c == true && commpref[0].Payment_Confirmations_via_Text__c == true) && Payoffid != null)}">
<div class="secondary-title">Congratulations!</div>
<p class="padding10">
 
<!-- Changes added for the defect 113948 by Jayashree ---->
    Your payoff payment was successfully updated and a confirmation was sent to {!commpref[0].Email_Address__c} and {!commpref[0].Text_Number__c }.
 
 
</p>
 
</apex:outputpanel>
 
<p class="padding10">
    <div class="full-size">
        <div class="lbltitle pL10">Payoff Payment Confirmation #:<apex:outputtext value="{!confirmationPF}" /></div>
    </div>
</p>
 
<div class="round-box review-detail">
<!---- Added as part of July 2018 RSS 43709-->
<apex:outputpanel >
    <div class="full-size">
    <div class="lbltitle">Payment Authorized On</div>
   <div class="lbldesc"><apex:outputtext value="{!paymentAuthDate }" /></div>
    </div>
</apex:outputpanel>
<!--Change RSS 43709 ends -->
    <apex:outputpanel >
    <div class="full-size">
        <div class="lbltitle">Payoff Date</div>
        <div class="lbldesc"><apex:outputtext value="{!paymentStartDate}" /></div>
    </div>
</apex:outputpanel>
 
 
 
<apex:outputpanel >
<div class="full-size">
    <div class="lbltitle">Bank Account Nickname</div>
    <div class="lbldesc"><apex:outputtext value="{!reviewBanknamePF}"> </apex:outputtext></div>
</div>
 
</apex:outputpanel>
 
 
<apex:outputpanel >
<div class="full-size">
    <div class="lbltitle strong">Payoff Amount</div>
    <div class="lbldesc strong"><span>&#36;</span><apex:outputtext value="{!PayoffAmount}"> </apex:outputtext></div>
</div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!Honda}">
        <div class="pL10 pR10">For questions,&nbsp;<a href="{!$Label.HondaCSEP}" target="_blank" styleclass="clkhere" >contact Customer Service</a> </div>
</apex:outputpanel>
 
<apex:outputpanel rendered="{!Not(Honda)}">
        <div class="pL10 pR10">For questions,&nbsp;<a href="{!$Label.AcuraCSEP}" target="_blank" styleclass="clkhere" >contact Customer Service</a> </div>
</apex:outputpanel>
 
 
</div>
</div>
<div class="secondary-title">
    Next Steps
</div>
<p class="round-box">
<!-- Changes added to the links by Jayashree for the defect 114165 --->
    <apex:outputpanel rendered="{!finaccountPF.Account_Type__c == 'Retail' && Honda}">
    For information on obtaining your title and other frequently asked questions, please&nbsp;<a href="{!$Label.HondaRetailURL}" target="_blank" styleclass="clkhere"  >click here</a>.
</apex:outputpanel>
<apex:outputpanel rendered="{!finaccountPF.Account_Type__c == 'Lease' && Honda}">
For information on obtaining your title and other frequently asked questions, please&nbsp;<a href="{!$Label.HondaLeaseURL}" target="_blank" styleclass="clkhere"  >click here</a>.
</apex:outputpanel>
 
<apex:outputpanel rendered="{!finaccountPF.Account_Type__c == 'Balloon' && Honda}">
For information on obtaining your title and other frequently asked questions, please&nbsp;<a href="{!$Label.HondaBalloonURL}" target="_blank" styleclass="clkhere"  >click here</a>.
</apex:outputpanel>
<apex:outputpanel rendered="{!finaccountPF.Account_Type__c == 'Retail' && Not(Honda)}">
For information on obtaining your title and other frequently asked questions, please&nbsp;<a href="{!$Label.AcuraRetailURL}" target="_blank" styleclass="clkhere"  >click here</a>.
</apex:outputpanel>
<apex:outputpanel rendered="{!finaccountPF.Account_Type__c == 'Lease' && Not(Honda) }">
For information on obtaining your title and other frequently asked questions, please&nbsp;<a href="{!$Label.AcuraLeaseURL}" target="_blank" styleclass="clkhere"  >click here</a>.
 
</apex:outputpanel>
 
<apex:outputpanel rendered="{!finaccountPF.Account_Type__c == 'Balloon' && Not(Honda) }">
For information on obtaining your title and other frequently asked questions, please&nbsp;<a href="{!$Label.AcuraBalloonURL}" target="_blank" styleclass="clkhere"  >click here</a>.
</apex:outputpanel>
<!--- End of defect 114165 --->
</p>
<div class="full-size btn-action ta-right">
    <apex:commandbutton value="Go to Pending Payments" onclick="{window.location='/apex/Pendingpayment?finnumber={!finIDVF}&isReadOnly={!isReadOnlyParam}'; return false;}" styleclass="primary-btn btn-1" oncomplete="shuffletop();" />
 
</div>
 
</div>
</apex:outputpanel>
 
<!--End Of Summary Mode-->
</apex:outputpanel>
<!-- Navigate to Account Overview -->
<apex:outputpanel id="popup1" style="display:block; top:13%; margin:0 auto; position:absolute; right:0; left:0;border:0; outline:none; border-radius:4px; cursor:pointer;" layout="block" rendered="{!displaypopup == true}">
<div class="window-size-two" id="delete-pop">
    <h3>Go to Account Overview?</h3>
    <div class="pop-up-details">
        <p class="window-msg">
            You will now be directed to your Account Overview page. All of the information that you have entered will be lost. Are you sure you want to proceed?
        </p>
 
 
        <div class="pop-btn-section">
            <label><apex:commandbutton styleclass="regular-btn btn-3 js-modal-close close" action="{!hidepopup}" value="No" oncomplete="removeovelayPop('{!$Component.clickmepfno1}');" id="clickmepfno1" rerender="opPayOffMain" /></label>
            <label><apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="{window.top.location={!$Label.AccountOverviewURL}; return false;}" rendered="{!honda}"/>
                <apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="{window.top.location={!$Label.Accura_Account_Overview_URL}; return false;}" rendered="{!!honda}"/>
            </label>
        </div>
 
    </div>
</div>
</apex:outputpanel>
<!-- End of Popup1 -->
 
<!-- Cancel Payoff popup -->
<apex:outputpanel id="PFDrawer" rendered="{!displaypopupdrawer == true}" style="display:block; top:13%; margin:0 auto; position:absolute; right:0; left:0;border:0; outline:none; border-radius:4px; cursor:pointer;" layout="block">
<div class="window-size-two" id="delete-pop">
    <h3>Cancel Payment?</h3>
    <div class="pop-up-details">
        <p class="window-msg">
            By Continuing all the information that you have entered will be lost.
            Are you sure you want to cancel<br></br> this Payment?
        </p>
 
 
        <div class="pop-btn-section">
            <label><apex:commandbutton styleclass="regular-btn btn-3 js-modal-close close" onclick="hidePFdrawer1();" value="No" rerender="drawpopup1" status="pfStatus"/></label>
            <label><apex:commandbutton styleclass="primary-btn btn-3" value="Yes" action="{!doNothingMethod}" onclick="cancelPage_JS();return false;" rerender="drawpopup1" status="pfStatus"/></label>
        </div>
 
    </div>
</div>
</apex:outputpanel>
<!-- End of Popup1 -->
 
 
</apex:outputpanel>
</div>
 
<!---------------  End of Payoff -------------------------------------------------------------------------- -->
 
 
 
</div>
 
<!--------------------------------------------------POPUP PAGES------------------------------------------------------------------------------------------ -->
 
<apex:outputpanel id="accountoverview">
 
<script>
    var outputPanelId = '{!$Component.accountoverview}';
    var pj = jQuery.noConflict();
    pj("[id*=check2]").prop('checked', false);
    pj("[id*=check2]").prop("disabled", true);
    pj("[id*=TermsConditiontxtarea2]").scroll(function () {           
        if (pj("[id*=TermsConditiontxtarea2]").scrollTop() > 2) 
        { 
           pj("[id*=check2]").prop("disabled", false);
 
       }
   });
</script>
<apex:outputpanel id="OPnewBank" styleclass="custPopup" layout="block" rendered="{!if((bankAccntNamePF == 'Add New' || BankaccntNameOTP == 'Add New' || bankAccntName == 'Add New'),true,false)}">
    <div class="waitingSearchDiv overlay-loader" id="bankLoading" style="display:none;"> 
   
        <div class="waitingHolder">
            <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/loading.gif')}" title="Please Wait" width="32" height="32" />        
        </div>
    </div>
 
<!-- Start: Time out redirection functionality was added by Omkar for the Defect #114048-->  
    <div class="waitingSearchDiv overlay-loader" id="bankLoadingmsg" style="display:none;"> 
        <div class="waitingHolder">
            <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/loading.gif')}" title="Please Wait" width="32" height="32" />
           <br/><div style="margin-left:-150px; width:500px;">
                    <span class="waitingDescription"> <b>Processing your request. Do not refresh this page.</b></span> 
                </div>
        </div>
    </div>
    <!-- End -->
 
<apex:outputpanel id="outputPanel11">
<apex:actionfunction name="validateRoutingNumber" action="{!validateRoutingNumber}" reRender="routingNumberPanel,bankNamePanel" oncomplete="reenterDisable();"/>
<apex:actionfunction name="reviewBankAccounts" action="{!reviewBankAccounts}" rerender="outputPanel11,outputPanle12" status="bankStatus" oncomplete="reenterDisable(); shuffletop();;"/>
 
<apex:outputpanel id="outputPanel11-1" rendered="{!bankeditMode == true && bankreviewMode == false}">
<!--Breadcrum-->
<div class="middle-col pB10 bank-acc-modal">
    <div class="middle-title">
                                                <!-- p>
                                                    <span>Account Overview </span>
                                                    <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/home.png')}" width="20" height="20" />
                                                </p -->
                                                <h4>Add a New Bank Account</h4>
                                            </div>
                                            <section>
                                                <div class="step-pro-breadcrumb">
                                                    <div class="process-level">
                                                        <div class="step-one pull-left">
                                                            <div class="step-name">Set Up</div>
                                                            <div class="step-count">1</div>
                                                        </div>
                                                        <div class="process-control process-none">
                                                            <div class="process-dot pull-left"></div>
                                                            <div class="process-dot pull-left"></div>
                                                            <div class="process-dot pull-left"></div>
                                                            <div class="process-dot pull-left"></div>
                                                        </div>
                                                    </div>
                                                    <div class="process-level">
                                                        <div class="step-one step-disable pull-left">
                                                            <div class="step-name">Review</div>
                                                            <div class="step-count">2</div>
                                                        </div>
                                                        <div class="process-control process-none">
                                                            <div class="process-dot pull-left"></div>
                                                            <div class="process-dot pull-left"></div>
                                                            <div class="process-dot pull-left"></div>
                                                            <div class="process-dot pull-left"></div>
                                                        </div>
                                                    </div>
                                                    <div class="step-one pull-left step-disable last">
                                                        <div class="step-name">Completed</div>
                                                        <div class="step-count">3</div>
                                                    </div>
                                                </div>
                                                <!--Breadcrum-->
                                                <div class="bank-acc-details">
                                                    <div class="secondary-title">
                                                        Provide your bank account information
                                                    </div>
                                                   
                                                    <div class="round-box">
                                                        <div class="bank-info">
                                                            <span class="error-model">* Required Field</span>
 
                                                            <div class="form-field">
                                                                <label for="bank-name">Bank Account Nickname</label>
                                                                <div align="center">
                                                                    <apex:inputfield value="{!ps.Payment_Source_Nickname__c}" id="bankAccountNicknameId" styleclass="medium-input allowplaceholder" html-placeholder="Enter Bank Name" />
                                                                </div>
                                                            </div>
 
                                                            <div class="form-field">
                                                                <label for="bank-name">* Bank Account Type</label>
                                                                <div class="select-box-cover">
                                                                    <span class="fancyArrow"></span>
                                                                    <!-- <apex:inputfield value="{!ps.Bank_Account_Type__c}" id="accountTypeId"  onblur="return bankAccountTypeJs()" styleclass="medium-input" html-placeholder="Enter Nick Name" /> -->
                                                                    <apex:selectList value="{!bankAccountType}" multiselect="false" size="1" id="accountTypeId" onblur="return bankAccountTypeJs()" styleClass="medium-input" >
                                                                            <apex:selectOption itemValue="Select One" itemLabel="Select One"/>
                                                                            <apex:selectOption itemValue="Checking" itemLabel="Checking"/>
                                                                            <apex:selectOption itemValue="Savings" itemLabel="Savings"/>
                                                                    </apex:selectList>
                                                                </div>
                                                                <div id="errorsAccountTypeId">
                                                                </div>
                                                            </div>
 
                                                            <div class="form-field">
                                                                <label for="bank-name">
                                                                    * Bank Routing Number
                                                                    <a href="javascript:;" class="tooltip">
                                                                        <b>?</b>
                                                                        <span class="tooltip-box">The routing number contains 9 digits and is printed on your checks (see example below). Please contact your financial institution if you need assistance.</span>
                                                                    </a>
                                                                </label>
                                                                <apex:outputPanel id="routingNumberPanel">
                                                                <div align="center">
                                                                    <apex:inputfield value="{!ps.Bank_Routing_Number__c}" id="routingNumberId" onblur="return validateRoutingNumberJs()" styleclass="medium-input allowplaceholder" html-placeholder="Enter Bank Routing Number" style="{!IF(isValidRouting = 'No','border:1px solid #FF6600','border:1px solid #FFF')}" />
                                                                    <div id="errors">
                                                                     <apex:outputPanel styleClass="inValidRN" rendered="{!routingNumberError == 'Invalid'}" >
                                                                     <apex:pageMessage severity="error"   summary="Enter a valid 9-digit routing number." />
                                                                     </apex:outputPanel>
                                                                     <apex:outputPanel style="color:red; font-size:12px !important; text-align:right; float:right;" id="ErrorOnService" rendered="{!routingNumberError == 'Error on Service'}">
                                                                     <apex:pageMessage severity="error"   summary="Something is wrong in validating routing number" />
                                                                     </apex:outputPanel>
                                                                    </div>
                                                                    <div id="errorsRoutingNumberId">
                                                                    </div>
                                                               </div>
                                                            </apex:outputPanel>
                                                            </div>
 
                                                            <div class="form-field">
                                                                <label for="bank-name">
                                                                    * Bank Account Number
                                                                    <a href="javascript:;" class="tooltip">
                                                                        <b>?</b>
                                                                        <span class="tooltip-box">The bank account number is printed on your checks (see example below) and bank statements. Please contact your financial institution if you need assistance.</span>
                                                                    </a>
                                                                </label>
                                                                <div align="center">
                                                                    <apex:inputfield value="{!ps.Bank_Account_Number__c}" id="bankAccountNumberId" onblur="return bankNumberJs()" styleclass="medium-input allowplaceholder" html-placeholder="Enter Bank Account Number" />
                                                                    <div id="errorsBankAccountNumberId">
                                                                    </div>
                                                                </div>
                                                            </div>
 
                                                            <div class="form-field">
                                                                <label for="bank-name">* Re-enter Bank Account Number </label>
                                                                <div align="center">
                                                                    <apex:inputfield value="{!ps.Bank_Account_Number__c}" id="reEnterBankNumberId" onblur="return reEnterbankNumberJs()" styleclass="medium-input allowplaceholder" html-placeholder="Re-enter Bank Account Number" />
                                                                    <div id="errorsReEnterBankNumberId">
                                                                    </div>
                                                                </div>
                                                            </div>
 
                                                            <div class="form-field">
                                                                <label for="bank-name">* Bank Name <a href="javascript:;" class="tooltip">
                                                                    <b>?</b>
                                                                    <span class="tooltip-box">More than one bank name might be associated to your routing number. If the bank name is incorrect please type in the correct name, or contact your financial institution for further assistance.</span>
                                                                </a></label>
                                                                <apex:outputPanel id="bankNamePanel" layout="block">
                                                                <div align="center">
                                                                    
                                                                    <apex:inputfield value="{!ps.Bank_Name__c}" rendered="{!bankNameFlag}" id="bankNameId" onblur="return validateBankName()"  styleclass="medium-input allowplaceholder" html-placeholder="Enter Bank Name" />
                                                                    <div id="errorsBankNameId">
                                                                    </div>
                                                                    <apex:outputfield value="{!ps.Bank_Name__c}" id="bankNameOutputId" rendered="{!NOT(bankNameFlag)}" styleclass="medium-input" />
                                                                </div>
                                                                </apex:outputPanel>
                                                           </div>
 
                                                        <script>
                                                            var banknames = '{!$Component.bankNameId}';
                                                            var nickname = '{!$Component.bankAccountNicknameId}';
                                                            var type = '{!$Component.accountTypeId}';
                                                            var routingNumberids = '{!$Component.routingNumberId}';
                                                            var accountNumber = '{!$Component.bankAccountNumberId}';
                                                            var reenteraccountnumber = '{!$Component.reEnterBankNumberId}';
 
                                                        </script>
 
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Bank Account Details first section End -->
                                            <div align="center">
                                                <apex:image url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/check.png')}" />
                                            </div>
                                            <div class="term-condition">
                                             <div class="pull-right pT10">
                                                    <div class="printer-version">
                                                        <a href="/apex/PdfTermsandCondNewBankAcc?isHonda={!honda}" target="_blank" >
                                                            <apex:image url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/printer.png')}" width="20" height="20" />
                                                            <!-- <img src="images/printer-icon.png" width="20px" height="20px"/> -->
                                                            <span>Printer Friendly Version</span>
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="clear"></div>
                                                <div class="secondary-title padding10 pull-left">
                                                    Terms &amp; Conditions
                                                </div>
                                               
                                                <div class="clear padding10">
                                                    To continue, read the following, <span class="red-bold">scroll to the bottom</span> and agree to the Terms &amp; Conditions.
                                                </div>
                                                <div class="textarea-text terms-condition" id="TermsConditiontxtarea2" >
                                                    <apex:outputpanel rendered="{!Honda}">
                                                    <div class="print-pdf-section" >
                                                        <p class="tc-head">Payment Withdrawal Authorization</p>
                                                        <p class="tc-content">When you provide your bank account information to us, you authorize Honda Financial Services to withdraw funds by electronic transfer from the account identified by you each time you request a payment using our online or telephone payment services (and to make credits to correct errors). You will select the amount of the payment and the payment date when you request a payment. This authorization will remain in effect until you cancel it. You may cancel your authorization at any time online by accessing this website and removing the bank account information, but the cancellation will not apply to any payments you have already requested and are already in process. If you cancel your authorization, you will no longer be able to request payments using our online or telephone payment services. This method of cancellation (and other methods of cancellation we may make available from time to time) is the only way that you can cancel this authorization.</p>
                                                        <p class="tc-content">If any payment is rejected due to insufficient funds, Honda Financial Services may charge you a fee and your bank may also charge you a fee.</p>
                                                        <p class="tc-content">You agree that the payments authorized by you must comply with the terms of U.S. law.</p>
                                                        <p class="tc-content">Please print or save a copy of this authorization for your records.</p>
                                                       
                                                    </div>
                                                </apex:outputpanel>    
                                                <apex:outputpanel rendered="{!Not(Honda)}">    
                                                <div class="print-pdf-section">
                                                    <p class="tc-head">Payment Withdrawal Authorization</p>
                                                    <p class="tc-content">When you provide your bank account information to us, you authorize Acura Financial Services to withdraw funds by electronic transfer from the account identified by you each time you request a payment using our online or telephone payment services (and to make credits to correct errors). You will select the amount of the payment and the payment date when you request a payment. This authorization will remain in effect until you cancel it. You may cancel your authorization at any time online by accessing this website and removing the bank account information, but the cancellation will not apply to any payments you have already requested and are already in process. If you cancel your authorization, you will no longer be able to request payments using our online or telephone payment services. This method of cancellation (and other methods of cancellation we may make available from time to time) is the only way that you can cancel this authorization.</p>
                                                    <p class="tc-content">If any payment is rejected due to insufficient funds, Acura Financial Services may charge you a fee and your bank may also charge you a fee.</p>
                                                    <p class="tc-content">You agree that the payments authorized by you must comply with the terms of U.S. law.</p>
                                                    <p class="tc-content">Please print or save a copy of this authorization for your records.</p>
                                                    
                                                </div>
                                            </apex:outputpanel>    
                                        </div>
                                        <div>
                                            <apex:inputcheckbox id="check2" style="{!IF(errorstdColorPD = 'Red','border:1px solid #FF6600',If(errorstdColorPD = 'Green','border:1px solid #00CC33','border:1px solid #FFF'))}"/>
                                            <apex:outputlabel for="check2">&nbsp;I have read and agree to Terms &amp; Conditions</apex:outputlabel>
                                            <div id="errorscheck1Id">
                                            </div>
                                        </div>
                                        <script>
                                            var checkboxval='{!$Component.check2}';
                                        </script>
                                        <div class="pR10 ta-right pT10">
 
                                            <apex:commandbutton value="Cancel" onclick="cancelBankPopup();return false;" rerender="opMainContainer" styleclass="regular-btn btn-3 mR10" style="border:0;border-radius:4px;outline:none;box-shadow:inset -2px -3px 3px 0px rgba(50, 50, 50, 0.75);" />
                                            <apex:commandbutton value="Continue" onclick="validateDataJs(); return false" styleclass="primary-btn btn-3 scroll-top" style="border:0;border-radius:4px;outline:none;box-shadow:inset -2px -3px 3px 0px rgba(50, 50, 50, 0.75);" />
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </apex:outputpanel>
 
                    </apex:outputpanel>
                    <!-- First section end-->
                    <!-- Review Section -->
                    <apex:outputpanel id="outputPanle12">
                    <apex:outputpanel rendered="{!bankeditMode == false && bankreviewMode == false && banksuccessMode == false}">
                            <div class="middle-col pB10 bank-acc-modal">
                                <div class="middle-title">
                                    <h4>Add a New Bank Account</h4>
                                </div>
                                <div class="unable-bank-acc">
                                <!--- Changes added to the links by Jayashree for defect 114165 --->
                                    <apex:outputpanel rendered="{!Honda}">
                                        <div class="pL10 pR10">We are unable to  process your request at this time. Please try again later. For customer support,&nbsp;<a href="{!$Label.HondaCSEP}" target="_blank" styleclass="clkhere"  >click here</a> for contact information.</div>
                                    </apex:outputpanel>
                                    <apex:outputpanel rendered="{!Not(Honda)}">
                                        <div class="pL10 pR10">We are unable to  process your request at this time. Please try again later. For customer support,&nbsp;<a href="{!$Label.AcuraCSEP}" target="_blank" styleclass="clkhere"  >click here</a> for contact information.</div>
                                    </apex:outputpanel>
                                    <!--- End of defect 114165 --->
                                </div>
                            </div>
                  </apex:outputpanel>
                    <apex:outputpanel rendered="{!bankeditMode == false && bankreviewMode == true}">
 
                    <div class="middle-col pB10 bank-acc-modal">
                        <div class="middle-title">
                            <h4>Add a New Bank Account</h4>
                        </div>
                        <section>
                            <div class="step-pro-breadcrumb">
                                <div class="process-level">
                                    <div class="step-one pull-left">
                                        <div class="step-name"><apex:commandlink value="Set Up" action="{!editBankAccounts}" rerender="OPnewBank" style="text-decoration: none;" oncomplete="reenterDisable();"/></div>
                                        <div class="step-count">1</div>
                                    </div>
                                    <div class="process-control">
                                        <div class="process-dot pull-left"></div>
                                        <div class="process-dot pull-left"></div>
                                        <div class="process-dot pull-left"></div>
                                        <div class="process-dot pull-left"></div>
                                    </div>
                                </div>
                                <div class="process-level">
                                    <div class="step-one pull-left">
                                        <div class="step-name">Review</div>
                                        <div class="step-count">2</div>
                                    </div>
                                    <div class="process-control process-none">
                                        <div class="process-dot pull-left"></div>
                                        <div class="process-dot pull-left"></div>
                                        <div class="process-dot pull-left"></div>
                                        <div class="process-dot pull-left"></div>
                                    </div>
                                </div>
                                <div class="step-one pull-left step-disable last">
                                    <div class="step-name">Completed</div>
                                    <div class="step-count">3</div>
                                </div>
                            </div>
                            <div class="secondary-title">One last Step...</div>
                            <div class="padding10">
                                To complete the process, review and submit the information below.
                            </div>
                            <div class="round-box review-detail">
                                <div class="full-size">
                                    <div class="lbltitle">Bank Account Nickname</div>
                                    <div class="lbldesc">
                                    
                                        <apex:outputText value="{!ps.Payment_Source_Nickname__c}(XXXX-{!RIGHT(ps.Bank_Account_Number__c,4)})" style="align:left;" />
                                    </div>
                                </div>
                                <div class="full-size">
                                    <div class="lbltitle">Bank Account Type</div>
                                    <div class="lbldesc">
                                       <!-- <apex:outputfield value="{!ps.Bank_Account_Type__c}" /> -->
                                          <apex:outputText value="{!bankAccountType}"/>
                                    </div>
                                </div>
                                <div class="full-size">
                                    <div class="lbltitle">Bank Routing Number</div>
                                    <div class="lbldesc">
 
                                        <apex:outputfield value="{!ps.Bank_Routing_Number__c}" />
                                    </div>
                                </div>
                                <div class="full-size">
                                    <div class="lbltitle">Bank Account Number</div>
                                    <div class="lbldesc">
                                        <!--<apex:outputtext value="{!tempBankAccNumber}" />-->
                                        <apex:outputfield value="{!ps.Bank_Account_Number__c}" /> 
                                    </div>
                                </div>
 
                                <div class="full-size">
                                    <div class="lbltitle">Bank Name</div>
                                    <div class="lbldesc">
                                        <apex:outputfield value="{!ps.Bank_Name__c}" />
                                    </div>
                                </div>
                            </div>
                            <div class="full-size btn-action">
                                <div class="pull-left w30">
                                    <apex:commandbutton value="Edit" action="{!editBankAccounts}" rerender="OPnewBank" styleclass="regular-btn btn-3 mR10" style="border:0;border-radius:4px;outline:none;box-shadow:inset -2px -3px 3px 0px rgba(50, 50, 50, 0.75);" status="bankStatus" oncomplete="shuffletop();"/>
                                </div>
                                <div class="pull-left ta-right w70">
                                    <apex:commandbutton value="Cancel" immediate="true" onclick="cancelBankPopup();return false;" styleclass="regular-btn btn-3 mR10" oncomplete="shuffletop();" style="border:0;border-radius:4px;outline:none;border-right-width:333px;box-shadow:inset -2px -3px 3px 0px rgba(50, 50, 50, 0.75);" status="bankStatus"/>
                                    &nbsp;
                                    <!-- Spinner wheel message was added by Omkar for the defect 114048 -->
                                    <apex:commandbutton value="Submit" action="{!submitBankAccounts}" rerender="outputPanel13,outputPanle12" styleclass="primary-btn btn-3" style="border:0;border-radius:4px;outline:none;box-shadow:inset -2px -3px 3px 0px rgba(50, 50, 50, 0.75);" rendered="{!isReadOnlyParam != 'true'}" status="bankStatusmsg"/>
                                    <!-- End -->
                                    <apex:commandbutton value="Submit" styleclass="disabledbtn" rendered="{!isReadOnlyParam == 'true'}" disabled="true" />
 
 
                                </div>
                            </div>
                        </section>
                    </div>
                </apex:outputpanel>
            </apex:outputpanel>
 
            <apex:outputpanel id="outputPanel13">
            
            <script>
                function chkbankvalue(){
                     var bnOTP = document.getElementById('{!$Component.BanknameOTP}');
                     var bnRP = document.getElementById('{!$Component.BanknameRP}');
                     var bnPF = document.getElementById('{!$Component.BanknamePF}');
                
                     if (bnOTP != null) {
                         bnOTP.value = '{!ps.id}';
                     }
                     if (bnRP != null) {
                         bnRP.value = '{!ps.id}';
                     }
 
                     if (bnPF != null) {
                         bnPF.value = '{!ps.id}';
                     }
                }
                
             </script>
            
            <apex:outputpanel rendered="{!bankeditMode == false && bankreviewMode == false && banksuccessMode == true && displaypopup_bankNew==true}">
            <div class="middle-col pB10 bank-acc-modal ">
                <div class="middle-title">
                 
                    <h4>Add a New Bank Account</h4>
                </div>
                <section>
                    <div class="step-pro-breadcrumb">
                        <div class="process-level">
                            <div class="step-one pull-left">
                                <div class="step-name">Set Up</div>
                                <div class="step-count">1</div>
                            </div>
                            <div class="process-control">
                                <div class="process-dot pull-left"></div>
                                <div class="process-dot pull-left"></div>
                                <div class="process-dot pull-left"></div>
                                <div class="process-dot pull-left"></div>
                            </div>
                        </div>
                        <div class="process-level">
                            <div class="step-one pull-left">
                                <div class="step-name">Review</div>
                                <div class="step-count">2</div>
                            </div>
                            <div class="process-control">
                                <div class="process-dot pull-left"></div>
                                <div class="process-dot pull-left"></div>
                                <div class="process-dot pull-left"></div>
                                <div class="process-dot pull-left"></div>
                            </div>
                        </div>
                        <div class="step-one pull-left last">
                            <div class="step-name">Completed</div>
                            <div class="step-count">3</div>
                        </div>
                    </div>
                    <!-- Breadcrumb  End -->
                    <div class="pull-right pT10">
                        <div class="printer-version">
                            <a href="/apex/PdfBankAccSummary?isHonda={!honda}&BankAccId={!ps.Id}"  target="_blank" >
                                <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/printer.png')}" width="20" height="20" />
                                <span>Printer Friendly Version</span>
                            </a>
                        </div>
                    </div>
                    <div class="clear"></div>
                    <div class="padding10">
                            Your new bank account was successfully added.
                    </div>
                    <div class="secondary-title summary-title"> You're almost there. Please click button below to continue payment setup.</div>
 
                    <div id="bankSection" class="round-box review-detail">
                        <div class="full-size">
                            <div class="lbltitle">Bank Account Nickname</div>
                            <div class="lbldesc">
                            <!--Defect:114271 -- Adding last4 Digits of Bank Account Number -->
                                <apex:outputText value="{!ps.Payment_Source_Nickname__c}(XXXX-{!ps.Last_4__c})" />
                            </div>
                        </div>
                        <div class="full-size">
                            <div class="lbltitle">Bank Account Type</div>
                            <div class="lbldesc">
 
                                <apex:outputfield value="{!ps.Bank_Account_Type__c}" />
                            </div>
                        </div>
                        <div class="full-size">
                            <div class="lbltitle">Bank Account Number</div>
                            <div class="lbldesc">
                                <apex:outputtext value="{!tempBankAccNumber}" />
                                <!-- <apex:outputfield value="{!ps.Bank_Account_Number__c}" /> -->
                            </div>
                        </div>
                        <div class="full-size">
                            <div class="lbltitle">Bank Name</div>
                            <div class="lbldesc">
 
                                <apex:outputfield value="{!ps.Bank_Name__c}" />
                            </div>
                        </div>
                    </div>
                    <div id="bankprinterSection" class="round-box review-detail" style="display:none">
                        <!-- Logo on pdf to print conditionally start -->
                        <div class="print-header">
                            <div class="logo" href="/">
                                <apex:image alt="" url="{!URLFOR($Resource.AFSHFS, 'AfsHfs/images/honda-logo.png')}"  width="20" height="20"/>
                            </div>
                        </div>
                        <!-- Logo on pdf to print conditionally End -->
                        <div class="full-size">
                            <div class="lbltitle">Bank Account Nickname</div>
                            <div class="lbldesc">
                                <apex:outputfield value="{!ps.Payment_Source_Nickname__c}" />
                            </div>
                        </div>
                        <div class="full-size">
                            <div class="lbltitle">Bank Account Type</div>
                            <div class="lbldesc">
 
                                <apex:outputfield value="{!ps.Bank_Account_Type__c}" />
                            </div>
                        </div>
                        <div class="full-size">
                            <div class="lbltitle">Bank Account Number</div>
                            <div class="lbldesc">
                                <apex:outputtext value="{!tempBankAccNumber}" />
                                <!-- <apex:outputfield value="{!ps.Bank_Account_Number__c}" /> -->
                            </div>
                        </div>
                        <div class="full-size">
                            <div class="lbltitle">Bank Name</div>
                            <div class="lbldesc">
 
                                <apex:outputfield value="{!ps.Bank_Name__c}" />
                            </div>
                        </div>
                    </div>
                    <div class="full-size btn-action ta-right">
                    <!---- Changes added to the defect 114262 by Jayashree --------------------------->
                        <apex:commandbutton value="Continue with Payment" id="bkPopupBtn2" onclick="closeBankPopupJS();" action="{!closeBankPopupNew}" rendered="{!(bankAccntNamePF == 'Add New' || BankaccntNameOTP == 'Add New')}" rerender="BanknamePF,BanknameRP,BanknameOTP,outputPanel13" styleclass="primary-btn btn-1 mR10" style="border: 0;outline: none;border-radius: 4px;cursor: pointer;box-shadow: inset -2px -3px 3px 0px rgba(50, 50, 50, 0.75);"  oncomplete="chkbankvalue();"/>
                        <apex:commandbutton value="Continue EasyPay Setup" id="bkPopupBtn3" onclick="closeBankPopupJS();" action="{!closeBankPopupNew}" rendered="{!bankAccntName == 'Add New'}" rerender="BanknamePF,BanknameRP,BanknameOTP,outputPanel13" styleclass="primary-btn btn-1 mR10" style="border: 0;outline: none;border-radius: 4px;cursor: pointer;box-shadow: inset -2px -3px 3px 0px rgba(50, 50, 50, 0.75);"  oncomplete="chkbankvalue();"/>
                    <!---- End of Defect 114262 ----------------------------------->
                    </div>
                </section>
            </div>
        </apex:outputpanel>
    </apex:outputpanel>
 
 
</apex:outputpanel>
</apex:outputpanel>
 
 
 
<!-- ------------------------------------------------------------ POPUP PAGES ----------------------------------------------------------------------------------------------------- -->
 
<apex:outputpanel id="GenAccOverviewPopup" styleclass="conformation-popup" style="display:none;" layout="block">
<div class="window-size-two" id="delete-pop">
    <h3>Cancel Changes?</h3>
    <div class="pop-up-details">
        <p class="window-msg">By clicking Yes, all the information you may have entered will be lost. Are you sure you want to proceed?</p>
 
 
        <div class="pop-btn-section">
            <label><apex:commandbutton styleclass="regular-btn btn-3 js-modal-close close" value="No" onclick="hideGenCancelPayment()" id="GEAccOverviewNo" rerender="GenAccOverviewPopup"/></label>
            <label><apex:commandbutton styleclass="primary-btn btn-3" value="Yes" onclick="drawerYesButton()" rerender="GenAccOverviewPopup"/></label>
        </div>
 
    </div>
</div>
</apex:outputpanel>
</div>
 
    
 
<script>
 
    var pj = jQuery.noConflict();
 
 
 
    pj(function() {
                        // Invoke the plugin
                        
                       pj('.allowplaceholder, textarea').attr('placeholder',{customClass:'my-placeholder'});
 
                    });
 
 
 
    function JSMethod(input,lid, textid) {
 
        document.getElementById(textid).style.display= "block";
        document.getElementById(lid).style.display= "none";
        document.getElementById('{!$Component.hiddenPrincipalFlag}').value = 'true';
 
    }
 
    function existRP() {
        existRPactionfunction();
    }
 
    function existdelRP() {
        
                if (cancelRP == "Yes") {
                    document.getElementById('{!$Component.PaymentPage:theForm:pbMainBlock:popupdeleteR}').style.display = 'block';
                } else {
                    document.getElementById('{!$Component.PaymentPage:theForm:pbMainBlock:popup4}').style.display = 'block';
                }
        var pj = jQuery.noConflict();
        pj(document).ready(function() {
            pj('.overlay ').addClass('overlay-layer');
 
        });
        
    }
 
    function existPF() {
        existPFactionfunction();
 
    }
 
    function existcancelPF(cme) {
        existPFdelactionfunction();
        var pj = jQuery.noConflict();
        pj(document).ready(function() {
            pj('.overlay ').addClass('overlay-layer');
 
        });
    }
 
    function showdrawerpopup(){
 
        var drawer = '{!$Component.RPtype}';
        var d = document.getElementById(drawer).value;
                            //alert(d);
                            if(d != null && d.length != 0){
                                showdrawerPF();
                            }
 
                        }
 
                        function hidePFdrawer1(){
                            var outputPanelId = '{!$Component.PFDrawer}';
                            document.getElementById(outputPanelId).style.display = 'none';
                            hidedrawPF1();
                            return false;
                        }
 
                        function hidePFdrawer2(){
                            var outputPanelId = '{!$Component.PFDrawer}';
                            document.getElementById(outputPanelId).style.display = 'none';
                            hidedrawPF2();
                            return false;
                        }
 
                        function callCheckPayment(){
                            // alert('test');
                            var RPAmt = '{!$Component.RPAmount}';
                            RPamt1 = document.getElementById(RPAmt).value;
                            checkPayment(RPamt1);
                        }
 
                    </script>
                    <script type="text/javascript">
 
                        function setCalender()
                        {
                            disableEasyPayoff();
                            var pj = jQuery.noConflict();
                            pj(function(e) {
                                pj("input[id$='datepickerexample1']").Zebra_DatePicker({
                                    format: 'm/d/Y',
                                    onSelect: function(){isselected= true;checkpayday();},
                                    readonly_element:false,
                                    direction: true 
                                });
                            });
                        }
 
                        function checkpayday(){
                            checkdateOTP();
                        }
                    </script>
                    
                    
                    <script type="text/javascript">
                        // Start disable drawer on basis of conditions
                        function disableEasyPayoff() {
                            var pj = jQuery.noConflict();   
                            pj(function() {   
                                if (pj('div').hasClass('disable_easypayoffDrawer')){
                                    // alert("hello");
                                    var dis_easy = pj(".accordion").find(".drawer:eq(1)").addClass("intro");
                                    var dis_payoff = pj(".accordion").find(".drawer:eq(2)").addClass("intro");
 
                                    if(dis_easy && dis_payoff){
                                        pj(".drawer.intro .accordion-item .accordion-header").css({"opacity":"0.5","pointer-events":"none"});
                                    }else {
                                        pj(".drawer.intro .accordion-item .accordion-header").css({"opacity":"1","pointer-events":"auto"});
                                    }
 
                                } else {
                                    pj(".drawer.intro .accordion-item .accordion-header").css({"opacity":"1","pointer-events":"auto"});
                                    var dis_easy = pj(".accordion").find(".drawer:eq(1)").removeClass("intro");
                                    var dis_payoff = pj(".accordion").find(".drawer:eq(2)").removeClass("intro");  
 
                                }
                            });
                        }
                        function disablePayoffopt() {
                            var pj = jQuery.noConflict();   
                            pj(function() {   
                                if (pj('div').hasClass('disable_payoffotpDrawer')){
                                    //alert("hello1");
                                    var c = pj(".accordion").find(".drawer:eq(2)").addClass("intro");
                                    var d = pj(".accordion").find(".drawer:eq(0)").addClass("intro");
                                    if(c && d){
                                        pj(".drawer.intro .accordion-item .accordion-header").css({"opacity":"0.5","pointer-events":"none"});
                                    }else {
                                        pj(".drawer.intro .accordion-item .accordion-header").css({"opacity":"1","pointer-events":"auto"});
                                        pj(".accordion").find(".drawer:eq(2)").removeClass("intro");
                                        pj(".accordion").find(".drawer:eq(0)").removeClass("intro"); 
                                    }
 
                                } else {
                                   pj(".drawer.intro .accordion-item .accordion-header").css({"opacity":"1","pointer-events":"auto"});
                                   pj(".accordion").find(".drawer:eq(2)").removeClass("intro");
                                   pj(".accordion").find(".drawer:eq(0)").removeClass("intro"); 
 
                               }
                           });
                        }
                        function disableotpeasy() {
                            var pj = jQuery.noConflict();   
                            pj(function() {   
                                if (pj('div').hasClass('disable_otpeasyDrawer')){
                                    //alert("hello2");
                                    var e = pj(".accordion").find(".drawer:eq(0)").addClass("intro");
                                    var f = pj(".accordion").find(".drawer:eq(1)").addClass("intro");
                                    if(e && f){
                                        pj(".drawer.intro .accordion-item .accordion-header").css({"opacity":"0.5","pointer-events":"none"});
                                    } else {
                                    // alert("hi hi")
                                    pj(".drawer.intro .accordion-item .accordion-header").css({"opacity":"1","pointer-events":"auto"});
                                    pj(".accordion").find(".drawer:eq(0)").removeClass("intro");
                                    pj(".accordion").find(".drawer:eq(1)").removeClass("intro");
                                }
 
                            } else {
                                    // alert("hi2"); 
                                    pj(".drawer.intro .accordion-item .accordion-header").css({"opacity":"1","pointer-events":"auto"});
                                    pj(".accordion").find(".drawer:eq(0)").removeClass("intro");
                                    pj(".accordion").find(".drawer:eq(1)").removeClass("intro");  
                                }
                            });
                        }
                        // End disable drawer on basis of conditions
                       </script>
                         
                        
 
                        <script>
                            function ovelayPop(cme){
                                var pj = jQuery.noConflict();
                                pj(document).ready(function() {
                                    pj('.overlay ').addClass('overlay-layer');
 
                                });
 
 
                            }
 
                            function removeovelayPop(cme){
                                var pj = jQuery.noConflict();
                                pj(document).ready(function() {
                                    pj('.overlay').removeClass('overlay-layer');
 
                                });
                            }
                        </script>
                        <script type="text/javascript">
                            var pj = jQuery.noConflict();
 
                            pj(document).ready(function () {
                                            //checkbox
 
                                            pj("[id*=check1]").prop('checked', false);
                                            pj("[id*=check1]").prop("disabled", true);
                                        });
 
 
                            function fnscroll()
                            {   
                                pj("[id*=TermsConditiontxtarea]").scroll(function () {         
                                    if (pj("[id*=TermsConditiontxtarea]").scrollTop() > 1000 ) 
                                    { 
                                       pj("[id*=check1]").prop("disabled", false);
 
                                   } 
                               });          
                            }
 
                            function fndisablechk()
                            {
                                
                                console.log('---');                
                                pj("[id*=check1]").prop('checked', false);
                                pj("[id*=check1]").prop("disabled", true);
 
                            }
                        </script>
                        <script type="text/javascript">
                        function shuffletop() {                         
                            var pj = jQuery.noConflict();
                            pj(document).ready(function () {
                                 document.getElementById('checkindex').focus();
                           //Changes added to the defect 114188 by Jayashree      
                            if(pj('#dummyFld0').length){
                                    if(pj('#dummyFld0').val()=='true'){
                                        document.getElementById('deletePopPaymnts').focus(); 
                                    }
                                }     
                            });
                       }   
                         </script>
 
                        <script type="text/javascript">
                            var pj = jQuery.noConflict();
 
                            pj(document).ready(function () {
                                            //checkbox
                                            pj("[id*=check2]").prop('checked', false);
                                            pj("[id*=check2]").prop("disabled", true);
                                            
 
                                        });
 
 
                            function fnscrolleach()
                            {
                                var pj = jQuery.noConflict();
 
 
                            }
                            
                            function fndisablechkeach()
                            {
                                
                                pj("[id*=check2]").prop('checked', false);
                                pj("[id*=check2]").prop("disabled", true);
                            }
 
                            function hideGenCancelPayment(){
                                document.getElementById("{!$Component.GenAccOverviewPopup}").style.display= "None";
                                pj('.overlay').removeClass('overlay-layer');
                                return false;
                            }
 
                        </script> 
 
                        <script type="text/javascript">
 
                          function loading(val, divname) {
                            if (val) {
                              document.getElementById(divname).style.display = 'block';
                          }
                          else {
                              document.getElementById(divname).style.display = 'none';
                          }
                        }
                        </script>
                        <script type="text/javascript">
          function Shuffletop1() {
            var pj = jQuery.noConflict();
            j$('.focustop')[0].scrollIntoView();
           } 
         // called to set preffered bank
         
         function setpreferredbankaccount(){
        
         var bnOTP = document.getElementById('{!$Component.BanknameOTP}');
         var bnRP = document.getElementById('{!$Component.BanknameRP}');
         var bnPF = document.getElementById('{!$Component.BanknamePF}');
         var preferedBankNameNullCheck = '{!preferedBankName}';
         //Changes added to the defect 114262 by Jayashree
         if(preferedBankNameNullCheck){
         if (bnOTP != null) {
             bnOTP.value = '{!preferedBankName}';
         }
         if (bnRP != null) {
             bnRP.value = '{!preferedBankName}';
         }
         if (bnPF != null) {
             bnPF.value = '{!preferedBankName}';
         }
         }
         
 
}
    setpreferredbankaccount();
      
      </script>
                        
                        <!----------------- Accordion Scripts ---------------------------------------------------------- -->
 
                        <script type="text/javascript">
                            var drawerLink;
                            function acc() {
                                var pj = jQuery.noConflict();
                                (
                                   function(pj)
                                   {
                                       pj.fn.accordion = function(options)
                                       {
                                           return this.each(function() {
                                               var settings = pj.extend(
                                               {
                                                   firstChildExpand: false,
                                                   multiExpand: false,
                                                   slideSpeed: 500,
                                                   dropDownIcon: '&#9660'
                                               }, options );
 
                                               pj(this).children("h1").each(
                                                   function()
                                                   {
                                                       pj(this).next('div').andSelf().wrapAll("<div class='accordion-item'></div>");
                                                   }
                                                   );
                                               pj(this).children().children('div').addClass("accordion-content");
                                               pj(this).find("h1").wrap("<div class='accordion-header'></div>");
                                               pj(this).find("h1").after("<div class='accordion-header-icon'></div>");
                                               pj(this).children('.accordion-item').wrap('<div class="drawer"></div>');
 
                                               if(settings.firstChildExpand==true)
                                               {
                                                   pj(this).find(".accordion-header:first").toggleClass("accordion-header-active");
                                                   pj(this).find(".accordion-header:first").parent().toggleClass("accordion-item-active");
                                                   pj(this).find(".accordion-header:first").next().slideToggle(0);
                                                   pj(this).find(".accordion-header:first").children(".accordion-header-icon").toggleClass("accordion-header-icon-active");
                                               }
 
                                               var counter = 0;
                                               pj(this).find(".accordion-header").click(
                                                   function()
                                                   {
 
                                                    if(pj(".accordion-item-active").length > 0){
                                                        drawerLink = pj(this).children().children('a');
                                                        document.getElementById("{!$Component.GenAccOverviewPopup}").style.display= "block";
                                                        pj('.overlay ').addClass('overlay-layer');
                                                        if(!closeBoolean)
                                                            return closeBoolean;
                                                    }else{
                                                        closeBoolean = false;
                                                    }
 
                                                    if(settings.multiExpand==false){
                                                       if(!pj(this).hasClass('accordion-header-active'))
                                                       {
                                                           pj(this).parent().parent().parent().find(".accordion-header-active").removeClass('accordion-header-active');
                                                           pj(this).parent().parent().parent().find(".accordion-item-active").children(".accordion-content").slideUp(settings.slideSpeed);
                                                           pj(this).parent().parent().parent().find(".accordion-header-icon-active").removeClass("accordion-header-icon-active");
                                                           pj(this).parent().parent().parent().find(".accordion-item-active").removeClass("accordion-item-active");
                                                       }
                                                   }
                                                   pj(this).toggleClass("accordion-header-active");
                                                   pj(this).parent().toggleClass("accordion-item-active");
                                                   pj(this).next().slideToggle(settings.slideSpeed);
                                                   pj(this).children(".accordion-header-icon").toggleClass("accordion-header-icon-active");
                                                   if(pj(this).children().find(".accordionlink").hasClass("OTPadope")){ 
                                                     console.log('<<<MakeAPaymentStep1PageLoad>>>func>>>');
                                                   // _satellite.track('MakeAPaymentStep1PageLoad');
                                                   }
                                                   if(pj(this).children().find(".accordionlink").hasClass("EPadope")){ 
                                                     console.log('<<<-EnrollEasyPayStep1PageLoad->>>');
                                                    // _satellite.track('EnrollEasyPayStep1PageLoad');
                                                   }
                                                   
                                               }
                                               );
                                    });
                                }
                            }
                        (pj));
 
                        var pj = jQuery.noConflict();
 
                        pj(function() {
 
                            pj(".accordion").accordion();
                            var Poff = pj('[id$=hdAccordionDrawer]').val();
                            if(Poff == 1) {
                                console.log('<<<MakeAPaymentStep1PageLoad>>>');
                              //  _satellite.track('MakeAPaymentStep1PageLoad'); 
                                pj(".accordion").find(".accordion-header:first").toggleClass("accordion-header-active");
                                pj(".accordion").find(".accordion-header:first").parent().toggleClass("accordion-item-active");
                                pj(".accordion").find(".accordion-header:first").next().slideToggle(0);
                                pj(".accordion").find(".accordion-header:first").children(".accordion-header-icon").toggleClass("accordion-header-icon-active");
                            }
                            if(Poff == 2) {
                                console.log('<<<-EnrollEasyPayStep1PageLoad->>>');
                              //  _satellite.track('EnrollEasyPayStep1PageLoad'); 
                                pj(".accordion").find(".accordion-header:eq(1)").toggleClass("accordion-header-active");
                                pj(".accordion").find(".accordion-header:eq(1)").parent().toggleClass("accordion-item-active");
                                pj(".accordion").find(".accordion-header:eq(1)").next().slideToggle(0);
                                pj(".accordion").find(".accordion-header:eq(1)").children(".accordion-header-icon").toggleClass("accordion-header-icon-active");
                            }
                            if(Poff == 3) {
                               // alert('3');
                                pj(".accordion").find(".accordion-header:eq(2)").toggleClass("accordion-header-active");
                                pj(".accordion").find(".accordion-header:eq(2)").parent().toggleClass("accordion-item-active");
                                pj(".accordion").find(".accordion-header:eq(2)").next().slideToggle(0);
                                pj(".accordion").find(".accordion-header:eq(2)").children(".accordion-header-icon").toggleClass("accordion-header-icon-active");
                            }
                            <!--- Changes added to the defect 114085 by Jayashree --->  
                            pj("input[id$='datepickerexample1']").Zebra_DatePicker({
                                format: 'm/d/Y',
                                onSelect: function(){isselected= true;checkpayday();},
                                readonly_element:false,
                                direction: true 
                            });
                            <!------ End of defect 114085 --------------------->
 
                        });
                        }
 
                        function drawerYesButton(){
                            closeBoolean = true;
                            drawerLink.click();
                            pj('.overlay').removeClass('overlay-layer');                    
                            closeBoolean = false;
                        }
                        </script>
 
 
                        <!------------------------ End of ACCORDION SCRIPTS ----------------------------------------------- -->
                        
                        <!-------------------------Disable Buttons Onclick Script Defect #113982 ------------------------------------->
                
                        <script>
                        function DisableButton(btnId,actName) {
                            var v = document.getElementById(btnId).disabled = true;
                            document.getElementById(btnId).style.background= '#ccc';
                                if(actName == 'SubRPBtn'){
                                SubRPBtn();
                                }
                                if(actName == 'EditRPBtn') {
                                EditRPBtn();
                                }
                                if(actName == 'CtRPBtn') {
                                CtRPBtn();
                                }
                                if(actName == 'SubPFBtn'){
                                SubPFBtn();
                               }
                                if(actName == 'EditPFBtn') {
                                EditPFBtn();
                                }
                                if(actName == 'CtPFBtn') {
                                CtPFBtn();
                                }
                                if(actName == 'SubOTPBtn'){
                                SubOTPBtn();
                                }
                                if(actName == 'EditOTPBtn') {
                                EditOTPBtn();
                                }
                                if(actName == 'CtOTPBtn') {
                                CtOTPBtn();
                                }
                        }
                        </script>
                            
                        <!------------------------ End of Disable Logic Scrpits ----------------------------------->
                        
                        <!---- Scripts added for the defect 114188 by Jayashree ----------------------------->
                         <script>
                        function clickNoOnEnter(e)  {
                                if(e.keyCode == 13){
                                    window.location='/apex/Pendingpayment?finnumber={!finIDVF}&isReadOnly={!isReadOnlyParam}'; 
                                    return false;
                                }
                         }
 
                         
                         function setOverlay() {
                               var pj = jQuery.noConflict();
 
                                    if(pj('#dummyFld0').length){
                                        if(pj('#dummyFld0').val()=='true'){
                                            pj('.overlay ').addClass('overlay-layer');
 
                                   }
                              }  
                        }
 
    
                        function setZattribute() {
                           document.getElementById("{!$Component.popupConfirmotp}").style.zIndex= "1";
                           reviewOTPNavigate();
                        }
 
                        </script>
                        <!---- End of defect 114188 ------------------------------------------------>
 
</apex:outputpanel>
</apex:pageblock>
</body>
 
</html>
</apex:form>
     
</apex:page>